This file is a merged representation of a subset of the codebase, containing specifically included files and files not matching ignore patterns, combined into a single document by Repomix.
The content has been processed where empty lines have been removed, line numbers have been added.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
- Pay special attention to the Repository Description. These contain important context and guidelines specific to this project.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: **/*
- Files matching these patterns are excluded: *.log, .agent/tmp/**, .git/**, node_modules/**, optimizations/, dist/**, .vscode/**, .idea/**, *.png, *.jpg, *.jpeg, *.gif, *.svg, *.ico, *.webp, *.woff, *.woff2, *.ttf, *.eot, package-lock.json, pnpm-lock.yaml, yarn.lock, docs/brainstorming/**
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Empty lines have been removed from all files
- Line numbers have been added to the beginning of each line
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<user_provided_header>
Awesome Agentic AI Coding Template
</user_provided_header>

<directory_structure>
.agent/rules/coding-standards.md
.agent/scripts/analyze_pr.sh
.agent/scripts/fetch_gemini_reviews.py
.agent/scripts/gh-helpers.sh
.agent/scripts/jules-api.sh
.agent/scripts/jules-batch-review.js
.agent/scripts/jules-create-prs.sh
.agent/scripts/jules-extract-patch.js
.agent/skills/brainstorming/SKILL.md
.agent/skills/find-skills/SKILL.md
.agent/skills/frontend-design/LICENSE.txt
.agent/skills/frontend-design/SKILL.md
.agent/skills/jules-tasks/SKILL.md
.agent/skills/qa-audit/SKILL.md
.agent/skills/requesting-code-review/code-reviewer.md
.agent/skills/requesting-code-review/SKILL.md
.agent/skills/skill-creator/LICENSE.txt
.agent/skills/skill-creator/references/output-patterns.md
.agent/skills/skill-creator/references/workflows.md
.agent/skills/skill-creator/scripts/init_skill.py
.agent/skills/skill-creator/scripts/package_skill.py
.agent/skills/skill-creator/scripts/quick_validate.py
.agent/skills/systematic-debugging/condition-based-waiting-example.ts
.agent/skills/systematic-debugging/condition-based-waiting.md
.agent/skills/systematic-debugging/CREATION-LOG.md
.agent/skills/systematic-debugging/defense-in-depth.md
.agent/skills/systematic-debugging/find-polluter.sh
.agent/skills/systematic-debugging/root-cause-tracing.md
.agent/skills/systematic-debugging/SKILL.md
.agent/skills/systematic-debugging/test-academic.md
.agent/skills/systematic-debugging/test-pressure-1.md
.agent/skills/systematic-debugging/test-pressure-2.md
.agent/skills/systematic-debugging/test-pressure-3.md
.agent/skills/using-superpowers/SKILL.md
.agent/skills/writing-plans/SKILL.md
.agent/workflows/architecture-change.md
.agent/workflows/doc-audit.md
.agent/workflows/feature-delivery.md
.agent/workflows/get-jules-tasks.md
.agent/workflows/hotfix.md
.agent/workflows/post-merge-analysis.md
.agent/workflows/pr-analysis.md
.agent/workflows/qa-audit.md
.agent/workflows/release-readiness.md
.agents/skills/brainstorming/SKILL.md
.agents/skills/find-skills/SKILL.md
.agents/skills/frontend-design/LICENSE.txt
.agents/skills/frontend-design/SKILL.md
.agents/skills/jules-tasks/SKILL.md
.agents/skills/qa-audit/SKILL.md
.agents/skills/requesting-code-review/code-reviewer.md
.agents/skills/requesting-code-review/SKILL.md
.agents/skills/skill-creator/LICENSE.txt
.agents/skills/skill-creator/references/output-patterns.md
.agents/skills/skill-creator/references/workflows.md
.agents/skills/skill-creator/scripts/init_skill.py
.agents/skills/skill-creator/scripts/package_skill.py
.agents/skills/skill-creator/scripts/quick_validate.py
.agents/skills/systematic-debugging/condition-based-waiting-example.ts
.agents/skills/systematic-debugging/condition-based-waiting.md
.agents/skills/systematic-debugging/CREATION-LOG.md
.agents/skills/systematic-debugging/defense-in-depth.md
.agents/skills/systematic-debugging/find-polluter.sh
.agents/skills/systematic-debugging/root-cause-tracing.md
.agents/skills/systematic-debugging/SKILL.md
.agents/skills/systematic-debugging/test-academic.md
.agents/skills/systematic-debugging/test-pressure-1.md
.agents/skills/systematic-debugging/test-pressure-2.md
.agents/skills/systematic-debugging/test-pressure-3.md
.agents/skills/using-superpowers/SKILL.md
.agents/skills/writing-plans/SKILL.md
.gitignore
.kilocode/rules/coding-standards.md
.markdownlint-cli2.yaml
.pre-commit-config.yaml
.repomixignore
AGENTS.md
CHANGELOG.md
CLAUDE.md
CODE_OF_CONDUCT.md
CONTRIBUTING.md
docs/ai-coding-agents-best-practices.md
docs/ARCHITECTURE.md
docs/CUSTOMIZATION-GUIDE.md
docs/SKILLS-CATALOG.md
LICENSE
README.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".agent/rules/coding-standards.md">
 1: ---
 2: trigger: always
 3: ---
 4: 
 5: # Coding Standards
 6: 
 7: <!-- SETUP: Fill in all [FILL: ...] placeholders to match your project. Remove sections that don't apply. -->
 8: 
 9: ## Architecture
10: 
11: - **[FILL: Key architectural constraint 1]** ‚Äî e.g. "Config-driven: all data in `config/*.js` (IIFE + Object.freeze)"
12: - **[FILL: Key architectural constraint 2]** ‚Äî e.g. "Vanilla HTML/CSS/JS only ‚Äî no frameworks, no build step"
13: - **[FILL: Key architectural constraint 3]** ‚Äî e.g. "Runs in iOS WKWebView and Android WebView ‚Äî touch-first"
14: 
15: ## [FILL: Language/Framework-Specific Rules]
16: 
17: <!-- Add mandatory rules specific to your stack, e.g. CSS touch rules, JS IIFE pattern, etc. -->
18: 
19: ## General Rules
20: 
21: - Minimal changes only ‚Äî don't touch unrelated files
22: - No unsolicited features
23: - **[FILL: Project Rule 1]** ‚Äî e.g. "No runtime frameworks, no CDN imports"
24: - **[FILL: Project Rule 2]** ‚Äî e.g. "Relative paths only ‚Äî no leading `/` or `./`"
25: - **[FILL: Immutable contract]** ‚Äî e.g. "Do NOT change binding variant IDs listed in AGENTS.md"
26: 
27: ## Git Hook Policy
28: 
29: - Activate repo-local hooks: `git config core.hooksPath .githooks`
30: - Ensure hooks are executable: `chmod +x .githooks/pre-commit .githooks/commit-msg`
31: - `pre-commit` must pass before final handoff
32: - Commit messages must follow `type(optional-scope): description`
33: 
34: ## Markdown Quality
35: 
36: - **Tables:** Use simplified `| --- | --- |` separator style for consistent alignment.
37: - **Code Blocks:** Always include a language specifier (e.g., `text`, `js`, `html`, `css`).
38: - **Headings:** Single H1 per file, logical hierarchy, and unique subheadings.
39: 
40: ## Documentation & Comments
41: 
42: - Config files should have a **JSDoc-style block comment** at the top explaining the schema
43: - Use `/* ... */` block comments for section headers and multi-line explanations
44: - Use `//` inline comments sparingly ‚Äî only where intent is non-obvious
45: - Keep all code-level comments in **English**
46: - When adding a new config field, update the file-top comment to document it
</file>

<file path=".agent/scripts/fetch_gemini_reviews.py">
  1: import subprocess
  2: import json
  3: import sys
  4: import argparse
  5: import concurrent.futures
  6: import os
  7: def parse_args():
  8:     parser = argparse.ArgumentParser(description="Fetch and display Gemini Code Assistant comments for PRs.")
  9:     parser.add_argument("prs", metavar="N", type=int, nargs="*", help="List of PR numbers to analyze.")
 10:     parser.add_argument("--output-dir", default=".agent/tmp", help="Directory to save individual PR reports.")
 11:     return parser.parse_args()
 12: def get_repo_info():
 13:     try:
 14:         cmd = ["gh", "repo", "view", "--json", "owner,name"]
 15:         result = subprocess.run(cmd, capture_output=True, text=True, check=True, timeout=10)
 16:         data = json.loads(result.stdout)
 17:         return f"{data['owner']['login']}/{data['name']}"
 18:     except Exception:
 19:         return None
 20: def get_pr_data_comprehensive(pr_id, repo_full_name):
 21:     # 1. Fetch Basic Data (Issue Comments + Reviews + Metadata)
 22:     try:
 23:         cmd = ["gh", "pr", "view", str(pr_id), "--json", "comments,reviews,title,url,number,headRefName,baseRefName"]
 24:         result = subprocess.run(cmd, capture_output=True, text=True, check=True, timeout=10)
 25:         pr_data = json.loads(result.stdout)
 26:     except Exception as e:
 27:         return {"id": pr_id, "error": str(e)}
 28:     # 2. Fetch Inline Review Comments via API (Pulls all comments for the PR)
 29:     try:
 30:         # endpoint: GET /repos/{owner}/{repo}/pulls/{pull_number}/comments
 31:         api_cmd = ["gh", "api", f"/repos/{repo_full_name}/pulls/{pr_id}/comments"]
 32:         api_result = subprocess.run(api_cmd, capture_output=True, text=True, check=True, timeout=10)
 33:         review_comments = json.loads(api_result.stdout)
 34:         pr_data["reviewComments"] = review_comments
 35:     except Exception:
 36:         pr_data["reviewComments"] = [] # fallback
 37:     return pr_data
 38: def extract_gemini_insights(pr_data):
 39:     if "error" in pr_data:
 40:         return f"‚ùå PR #{pr_data.get('id','?')}: Error fetching data - {pr_data['error']}"
 41:     pr_number = pr_data.get("number", pr_data.get("id", "Unknown"))
 42:     title = pr_data.get("title", "No Title")
 43:     url = pr_data.get("url", "")
 44:     # Combine all interaction types
 45:     all_interactions = []
 46:     # Label them for context
 47:     # Issues comments (top level)
 48:     for c in pr_data.get("comments", []):
 49:         c["_type"] = "Comment"
 50:         all_interactions.append(c)
 51:     # Full review objects (verdicts/summaries)
 52:     for r in pr_data.get("reviews", []):
 53:         r["_type"] = "Review"
 54:         all_interactions.append(r)
 55:     # Inline review comments (diff-linked)
 56:     for rc in pr_data.get("reviewComments", []):
 57:         rc["_type"] = "Inline Code Comment"
 58:         all_interactions.append(rc)
 59:     # Sort by creation date
 60:     all_interactions.sort(key=lambda x: x.get("createdAt", x.get("submittedAt", x.get("created_at", ""))))
 61:     gemini_comments = []
 62:     # Filter for Gemini bot comments
 63:     for c in all_interactions:
 64:         # PR view uses 'author', GH API uses 'user'
 65:         author_obj = c.get("author", c.get("user", {}))
 66:         author_raw = author_obj.get("login", "")
 67:         author = author_raw.lower()
 68:         body = c.get("body", "")
 69:         # Robust pattern matching
 70:         is_gemini = (
 71:             author_raw == "gemini-code-assist[bot]" or
 72:             "gemini" in author or
 73:             "gemini" in body.lower() or
 74:             "gstatic.com/codereviewagent" in body
 75:         )
 76:         if is_gemini:
 77:             type_label = c.get("_type", "Comment")
 78:             created_at = c.get("createdAt", c.get("submittedAt", c.get("created_at", "Unknown Time")))
 79:             block = []
 80:             block.append(f"   **[{type_label}]** {created_at}")
 81:             # Inline comment extra details
 82:             if type_label == "Inline Code Comment":
 83:                 path = c.get("path", "unknown file")
 84:                 line = c.get("line", c.get("original_line", "?"))
 85:                 block.append(f"   *File: {path}:{line}*")
 86:                 diff_hunk = c.get("diff_hunk", "")
 87:                 if diff_hunk:
 88:                     diff_indented = "\n".join([f"   | {l}" for l in diff_hunk.splitlines()])
 89:                     block.append("   *Target Code Context:*")
 90:                     block.append(diff_indented)
 91:                     block.append("")
 92:             # Body content
 93:             if body:
 94:                 block.append("   *Gemini Suggestion:*")
 95:                 body_indented = "\n".join([f"   > {l}" for l in body.splitlines()])
 96:                 block.append(body_indented)
 97:             else:
 98:                  block.append("   > [Empty Body]")
 99:             block.append("") # Spacer
100:             gemini_comments.append("\n".join(block))
101:     output = []
102:     output.append(f"üîç **PR #{pr_number}: {title}**")
103:     output.append(f"   Link: {url}")
104:     if gemini_comments:
105:         output.append("\n   ü§ñ **Gemini Analysis (Full Content):**\n")
106:         output.extend(gemini_comments)
107:     else:
108:         output.append("   ‚ö™ No Gemini comments found.")
109:     return "\n".join(output)
110: if __name__ == "__main__":
111:     args = parse_args()
112:     repo_full_name = get_repo_info()
113:     if not repo_full_name:
114:         sys.exit(1)
115:     target_prs = args.prs
116:     if not target_prs:
117:         print("Usage: fetch_gemini_reviews.py <PR_NUMBERS...>")
118:         sys.exit(0)
119:     os.makedirs(args.output_dir, exist_ok=True)
120:     with concurrent.futures.ThreadPoolExecutor(max_workers=5) as executor:
121:         future_to_pr = {executor.submit(get_pr_data_comprehensive, pr_id, repo_full_name): pr_id for pr_id in target_prs}
122:         results = []
123:         for future in concurrent.futures.as_completed(future_to_pr):
124:             data = future.result()
125:             if "number" not in data and "id" in data:
126:                  data["number"] = data["id"]
127:             results.append(data)
128:     results.sort(key=lambda x: x.get("number", 0))
129:     final_report = []
130:     for r in results:
131:         report_segment = extract_gemini_insights(r)
132:         # Output to individual file
133:         pr_id = r.get("number", "unknown")
134:         with open(os.path.join(args.output_dir, f"pr_{pr_id}_gemini_report.md"), "w") as f:
135:             f.write(f"# Gemini Insights for PR #{pr_id}\n\n")
136:             f.write(report_segment)
137:         print(report_segment)
138:         final_report.append(report_segment)
139:     # Master report
140:     with open(os.path.join(args.output_dir, "gemini_insights_report.md"), "w") as f:
141:         f.write("# Gemini Code Assist - PR Insights Report (Full Content)\n\n")
142:         f.write("\n---\n".join(final_report))
</file>

<file path=".agent/scripts/gh-helpers.sh">
  1: #!/bin/bash
  2: # .agent/scripts/gh-helpers.sh
  3: # Robust, non-interactive wrappers for GitHub CLI to prevent hanging in agent environments.
  4: # PROJECT SETTINGS (Modify these if you use GitHub Projects for this repo)
  5: # Currently set to generic placeholders because dotfiles metadata varies from this repo.
  6: PROJECT_ID="YOUR_PROJECT_ID"
  7: FIELD_ID="YOUR_FIELD_ID"
  8: OWNER="[FILL: your-github-username-or-org]"  # Your GitHub username or org that owns the project board
  9: PROJECT_NUM=1 # Update to your actual project number
 10: # Function: post_pr_comment <pr_number> <comment_body>
 11: # Posts a comment to a PR non-interactively.
 12: post_pr_comment() {
 13:   local pr="$1"
 14:   local body="$2"
 15:   if [[ -z "$pr" ]] || [[ -z "$body" ]]; then
 16:     echo "Usage: post_pr_comment <pr_number> <comment_body>" >&2
 17:     return 1
 18:   fi
 19:   echo "üì° Posting comment to PR #$pr..."
 20:   if gh pr comment "$pr" --body "$body" < /dev/null; then
 21:     echo "‚úÖ Successfully commented on PR #$pr."
 22:     return 0
 23:   else
 24:     echo "‚ùå Failed to comment on PR #$pr."
 25:     return 1
 26:   fi
 27: }
 28: # Function: set_project_completed_date <pr_number> [date]
 29: # Synchronizes the "Completed Date" metadata field in GitHub Projects.
 30: set_project_completed_date() {
 31:   local pr_num="$1"
 32:   local date="${2:-$(date +%Y-%m-%d)}"
 33:   echo "üì° Synchronizing Project Metadata for PR #$pr_num..."
 34:   if [[ "$PROJECT_ID" == "YOUR_PROJECT_ID" ]]; then
 35:     echo "‚ÑπÔ∏è  Project tracking not configured. Skipping metadata update."
 36:     echo "   (Update PROJECT_ID, FIELD_ID, and PROJECT_NUM in gh-helpers.sh to enable)"
 37:     return 0
 38:   fi
 39:   local item_id
 40:   item_id=$(gh project item-list "$PROJECT_NUM" --owner "$OWNER" --format json --limit 1000 \
 41:     | python3 -c "import json, sys; data=json.load(sys.stdin); \
 42:         items=data.get('items', []); \
 43:         match=[i['id'] for i in items if i.get('content', {}).get('number') == $pr_num]; \
 44:         print(match[0]) if match else exit(1)" 2> /dev/null)
 45:   if [[ $? -ne 0 || -z "$item_id" ]]; then
 46:     echo "‚ö†Ô∏è  Could not find PR #$pr_num in Project $PROJECT_NUM. Skipping metadata update."
 47:     return 0
 48:   fi
 49:   if gh project item-edit --id "$item_id" --project-id "$PROJECT_ID" --field-id "$FIELD_ID" --date "$date" < /dev/null; then
 50:     echo "‚úÖ Metadata 'Completed Date' set to $date for PR #$pr_num."
 51:   else
 52:     echo "‚ùå Failed to update metadata for PR #$pr_num."
 53:   fi
 54: }
 55: # Function: batch_set_project_completed_date <date> <pr_number1> <pr_number2> ...
 56: # Batch updates multiple PRs with a specific completion date.
 57: batch_set_project_completed_date() {
 58:   local date="$1"
 59:   shift
 60:   local prs=("$@")
 61:   echo "üîÑ Starting batch metadata update for date: $date"
 62:   for pr in "${prs[@]}"; do
 63:     set_project_completed_date "$pr" "$date"
 64:   done
 65:   echo "‚úÖ Batch update finished."
 66: }
 67: # Function: close_pr <pr_number> [optional_comment]
 68: # Closes a PR non-interactively, optionally posting a final comment.
 69: close_pr() {
 70:   local pr="$1"
 71:   local comment="$2"
 72:   if [[ -z "$pr" ]]; then
 73:     echo "Usage: close_pr <pr_number> [optional_comment]" >&2
 74:     return 1
 75:   fi
 76:   if [[ -n "$comment" ]]; then
 77:     post_pr_comment "$pr" "$comment"
 78:   fi
 79:   echo "üîí Closing PR #$pr..."
 80:   if gh pr close "$pr" < /dev/null; then
 81:     echo "‚úÖ Successfully closed PR #$pr."
 82:     # Auto-sync metadata on close if desired (optional: could be set to current date)
 83:     # set_project_completed_date "$pr"
 84:     return 0
 85:   else
 86:     echo "‚ùå Failed to close PR #$pr."
 87:     return 1
 88:   fi
 89: }
 90: # Function: close_as_superseded <target_pr> <superior_pr>
 91: # Standardized way to close a PR that has been replaced by a better implementation.
 92: close_as_superseded() {
 93:   local target="$1"
 94:   local superior="$2"
 95:   local msg="üî¥ Closed as **Superseded**. The changes in this PR have been integrated into a more comprehensive implementation in #$superior. Thank you for the contribution!"
 96:   close_pr "$target" "$msg"
 97: }
 98: # Function: close_as_duplicate <target_pr> <original_pr>
 99: # Standardized way to close a PR that duplicates existing scope.
100: close_as_duplicate() {
101:   local target="$1"
102:   local original="$2"
103:   local msg="üî¥ Closed as **Duplicate**. This PR covers the same scope as #$original. Further review will continue there."
104:   close_pr "$target" "$msg"
105: }
</file>

<file path=".agent/scripts/jules-batch-review.js">
 1: #!/usr/bin/env node
 2: const { execFileSync } = require('child_process');
 3: const path = require('path');
 4: const fs = require('fs');
 5: async function getJulesKey() {
 6:     const envPath = path.resolve(__dirname, '../../.env');
 7:     if (fs.existsSync(envPath)) {
 8:         const envContent = fs.readFileSync(envPath, 'utf8');
 9:         const match = envContent.match(/^JULES_API_KEY=(.+)$/m);
10:         if (match) return match[1].trim();
11:     }
12:     console.error("‚ùå Error: JULES_API_KEY not found in .env");
13:     process.exit(1);
14: }
15: function getGitRepoSource() {
16:     try {
17:         const remoteUrl = execFileSync('git', ['config', '--get', 'remote.origin.url'], {
18:             encoding: 'utf8',
19:             timeout: 10000,
20:             stdio: ['ignore', 'pipe', 'pipe'],
21:         }).trim();
22:         const match = remoteUrl.match(/github\.com[/:](.+?)\/(.+?)(\.git)?$/);
23:         if (match) {
24:             return `sources/github/${match[1]}/${match[2]}`.replace(/\.git$/, '');
25:         }
26:     } catch (e) { }
27:     return null;
28: }
29: async function run() {
30:     const currentSource = getGitRepoSource();
31:     if (!currentSource) {
32:         console.error("‚ùå Could not determine Git repository source context.");
33:         process.exit(1);
34:     }
35:     const key = await getJulesKey();
36:     const API_BASE = "https://jules.googleapis.com/v1alpha";
37:     const res = await fetch(`${API_BASE}/sessions?pageSize=50`, {
38:         headers: { "X-Goog-Api-Key": key }
39:     });
40:     const data = await res.json();
41:     if (!data.sessions) return;
42:     const pendingSessions = data.sessions.filter(s =>
43:         s.sourceContext && s.sourceContext.source === currentSource &&
44:         (s.state === 'AWAITING_PLAN_APPROVAL' || s.state === 'COMPLETED')
45:     );
46:     for (const s of pendingSessions) {
47:         const id = s.name.split('/').pop();
48:         console.log(`[${id}] ${s.state.padEnd(25)} | ${s.title}`);
49:     }
50: }
51: run();
</file>

<file path=".agent/scripts/jules-extract-patch.js">
 1: #!/usr/bin/env node
 2: const { execSync } = require('child_process');
 3: const fs = require('fs');
 4: const path = require('path');
 5: const sessionIds = process.argv.slice(2);
 6: const API_SCRIPT = path.join(__dirname, 'jules-api.sh');
 7: for (const sessionId of sessionIds) {
 8:     console.log(`üîç Fetching session ${sessionId}...`);
 9:     if (!/^\d+$/.test(sessionId)) {
10:         console.error(`‚ùå Invalid session ID format: ${sessionId}`);
11:         continue;
12:     }
13:     try {
14:         const artifactsRaw = execSync(`${API_SCRIPT} get-artifacts ${sessionId} | jq -c '.'`, {
15:             encoding: 'utf8',
16:             timeout: 10000,
17:             stdio: ['ignore', 'pipe', 'pipe'],
18:         });
19:         const artifactsList = artifactsRaw.trim().split('\n').filter(Boolean).map(line => {
20:             try { return JSON.parse(line); } catch (e) { return null; }
21:         }).filter(Boolean);
22:         let found = false;
23:         for (const artifactsObj of artifactsList) {
24:             if (!artifactsObj.changeSets) continue;
25:             for (const changeSet of artifactsObj.changeSets) {
26:                 let patch = changeSet.gitPatch ? changeSet.gitPatch.unidiffPatch : changeSet.diff;
27:                 if (patch) {
28:                     const tmpDir = path.join(__dirname, '../tmp');
29:                     if (!fs.existsSync(tmpDir)) fs.mkdirSync(tmpDir, { recursive: true });
30:                     fs.writeFileSync(path.join(tmpDir, `${sessionId}.patch`), patch + '\n');
31:                     fs.writeFileSync(path.join(tmpDir, `${sessionId}_msg.txt`), changeSet.gitPatch ? changeSet.gitPatch.suggestedCommitMessage : `Jules session ${sessionId}`);
32:                     console.log(`‚úÖ Extracted ${sessionId}.patch`);
33:                     found = true; break;
34:                 }
35:             }
36:             if (found) break;
37:         }
38:     } catch (e) {
39:         console.error(`‚ùå Failed for ${sessionId}`);
40:     }
41: }
</file>

<file path=".agent/skills/brainstorming/SKILL.md">
 1: ---
 2: name: brainstorming
 3: description: "You MUST use this before any creative work - creating features, building components, adding functionality, or modifying behavior. Explores user intent, requirements and design before implementation."
 4: ---
 5: 
 6: # Brainstorming Ideas Into Designs
 7: 
 8: ## Overview
 9: 
10: Help turn ideas into fully formed designs and specs through natural collaborative dialogue.
11: 
12: Start by understanding the current project context, then ask questions one at a time to refine the idea. Once you understand what you're building, present the design and get user approval.
13: 
14: <HARD-GATE>
15: Do NOT invoke any implementation skill, write any code, scaffold any project, or take any implementation action until you have presented a design and the user has approved it. This applies to EVERY project regardless of perceived simplicity.
16: </HARD-GATE>
17: 
18: ## Anti-Pattern: "This Is Too Simple To Need A Design"
19: 
20: Every project goes through this process. A todo list, a single-function utility, a config change ‚Äî all of them. "Simple" projects are where unexamined assumptions cause the most wasted work. The design can be short (a few sentences for truly simple projects), but you MUST present it and get approval.
21: 
22: ## Checklist
23: 
24: You MUST create a task for each of these items and complete them in order:
25: 
26: 1. **Explore project context** ‚Äî check files, docs, recent commits
27: 2. **Ask clarifying questions** ‚Äî one at a time, understand purpose/constraints/success criteria
28: 3. **Propose 2-3 approaches** ‚Äî with trade-offs and your recommendation
29: 4. **Present design** ‚Äî in sections scaled to their complexity, get user approval after each section
30: 5. **Write design doc** ‚Äî save to `docs/plans/YYYY-MM-DD-<topic>-design.md` and commit
31: 6. **Transition to implementation** ‚Äî invoke writing-plans skill to create implementation plan
32: 
33: ## Process Flow
34: 
35: ```dot
36: digraph brainstorming {
37:     "Explore project context" [shape=box];
38:     "Ask clarifying questions" [shape=box];
39:     "Propose 2-3 approaches" [shape=box];
40:     "Present design sections" [shape=box];
41:     "User approves design?" [shape=diamond];
42:     "Write design doc" [shape=box];
43:     "Invoke writing-plans skill" [shape=doublecircle];
44: 
45:     "Explore project context" -> "Ask clarifying questions";
46:     "Ask clarifying questions" -> "Propose 2-3 approaches";
47:     "Propose 2-3 approaches" -> "Present design sections";
48:     "Present design sections" -> "User approves design?";
49:     "User approves design?" -> "Present design sections" [label="no, revise"];
50:     "User approves design?" -> "Write design doc" [label="yes"];
51:     "Write design doc" -> "Invoke writing-plans skill";
52: }
53: ```
54: 
55: **The terminal state is invoking writing-plans.** Do NOT invoke frontend-design, mcp-builder, or any other implementation skill. The ONLY skill you invoke after brainstorming is writing-plans.
56: 
57: ## The Process
58: 
59: **Understanding the idea:**
60: - Check out the current project state first (files, docs, recent commits)
61: - Ask questions one at a time to refine the idea
62: - Prefer multiple choice questions when possible, but open-ended is fine too
63: - Only one question per message - if a topic needs more exploration, break it into multiple questions
64: - Focus on understanding: purpose, constraints, success criteria
65: 
66: **Exploring approaches:**
67: - Propose 2-3 different approaches with trade-offs
68: - Present options conversationally with your recommendation and reasoning
69: - Lead with your recommended option and explain why
70: 
71: **Presenting the design:**
72: - Once you believe you understand what you're building, present the design
73: - Scale each section to its complexity: a few sentences if straightforward, up to 200-300 words if nuanced
74: - Ask after each section whether it looks right so far
75: - Cover: architecture, components, data flow, error handling, testing
76: - Be ready to go back and clarify if something doesn't make sense
77: 
78: ## After the Design
79: 
80: **Documentation:**
81: - Write the validated design to `docs/plans/YYYY-MM-DD-<topic>-design.md`
82: - Use elements-of-style:writing-clearly-and-concisely skill if available
83: - Commit the design document to git
84: 
85: **Implementation:**
86: - Invoke the writing-plans skill to create a detailed implementation plan
87: - Do NOT invoke any other skill. writing-plans is the next step.
88: 
89: ## Key Principles
90: 
91: - **One question at a time** - Don't overwhelm with multiple questions
92: - **Multiple choice preferred** - Easier to answer than open-ended when possible
93: - **YAGNI ruthlessly** - Remove unnecessary features from all designs
94: - **Explore alternatives** - Always propose 2-3 approaches before settling
95: - **Incremental validation** - Present design, get approval before moving on
96: - **Be flexible** - Go back and clarify when something doesn't make sense
</file>

<file path=".agent/skills/find-skills/SKILL.md">
  1: ---
  2: name: find-skills
  3: description: Helps users discover and install agent skills when they ask questions like "how do I do X", "find a skill for X", "is there a skill that can...", or express interest in extending capabilities. This skill should be used when the user is looking for functionality that might exist as an installable skill.
  4: ---
  5: 
  6: # Find Skills
  7: 
  8: This skill helps you discover and install skills from the open agent skills ecosystem.
  9: 
 10: ## When to Use This Skill
 11: 
 12: Use this skill when the user:
 13: 
 14: - Asks "how do I do X" where X might be a common task with an existing skill
 15: - Says "find a skill for X" or "is there a skill for X"
 16: - Asks "can you do X" where X is a specialized capability
 17: - Expresses interest in extending agent capabilities
 18: - Wants to search for tools, templates, or workflows
 19: - Mentions they wish they had help with a specific domain (design, testing, deployment, etc.)
 20: 
 21: ## What is the Skills CLI?
 22: 
 23: The Skills CLI (`npx skills`) is the package manager for the open agent skills ecosystem. Skills are modular packages that extend agent capabilities with specialized knowledge, workflows, and tools.
 24: 
 25: **Key commands:**
 26: 
 27: - `npx skills find [query]` - Search for skills interactively or by keyword
 28: - `npx skills add <package>` - Install a skill from GitHub or other sources
 29: - `npx skills check` - Check for skill updates
 30: - `npx skills update` - Update all installed skills
 31: 
 32: **Browse skills at:** https://skills.sh/
 33: 
 34: ## How to Help Users Find Skills
 35: 
 36: ### Step 1: Understand What They Need
 37: 
 38: When a user asks for help with something, identify:
 39: 
 40: 1. The domain (e.g., React, testing, design, deployment)
 41: 2. The specific task (e.g., writing tests, creating animations, reviewing PRs)
 42: 3. Whether this is a common enough task that a skill likely exists
 43: 
 44: ### Step 2: Search for Skills
 45: 
 46: Run the find command with a relevant query:
 47: 
 48: ```bash
 49: npx skills find [query]
 50: ```
 51: 
 52: For example:
 53: 
 54: - User asks "how do I make my React app faster?" ‚Üí `npx skills find react performance`
 55: - User asks "can you help me with PR reviews?" ‚Üí `npx skills find pr review`
 56: - User asks "I need to create a changelog" ‚Üí `npx skills find changelog`
 57: 
 58: The command will return results like:
 59: 
 60: ```
 61: Install with npx skills add <owner/repo@skill>
 62: 
 63: vercel-labs/agent-skills@vercel-react-best-practices
 64: ‚îî https://skills.sh/vercel-labs/agent-skills/vercel-react-best-practices
 65: ```
 66: 
 67: ### Step 3: Present Options to the User
 68: 
 69: When you find relevant skills, present them to the user with:
 70: 
 71: 1. The skill name and what it does
 72: 2. The install command they can run
 73: 3. A link to learn more at skills.sh
 74: 
 75: Example response:
 76: 
 77: ```
 78: I found a skill that might help! The "vercel-react-best-practices" skill provides
 79: React and Next.js performance optimization guidelines from Vercel Engineering.
 80: 
 81: To install it:
 82: npx skills add vercel-labs/agent-skills@vercel-react-best-practices
 83: 
 84: Learn more: https://skills.sh/vercel-labs/agent-skills/vercel-react-best-practices
 85: ```
 86: 
 87: ### Step 4: Offer to Install
 88: 
 89: If the user wants to proceed, you can install the skill for them:
 90: 
 91: ```bash
 92: npx skills add <owner/repo@skill> -g -y
 93: ```
 94: 
 95: The `-g` flag installs globally (user-level) and `-y` skips confirmation prompts.
 96: 
 97: ## Common Skill Categories
 98: 
 99: When searching, consider these common categories:
100: 
101: | Category        | Example Queries                          |
102: | --------------- | ---------------------------------------- |
103: | Web Development | react, nextjs, typescript, css, tailwind |
104: | Testing         | testing, jest, playwright, e2e           |
105: | DevOps          | deploy, docker, kubernetes, ci-cd        |
106: | Documentation   | docs, readme, changelog, api-docs        |
107: | Code Quality    | review, lint, refactor, best-practices   |
108: | Design          | ui, ux, design-system, accessibility     |
109: | Productivity    | workflow, automation, git                |
110: 
111: ## Tips for Effective Searches
112: 
113: 1. **Use specific keywords**: "react testing" is better than just "testing"
114: 2. **Try alternative terms**: If "deploy" doesn't work, try "deployment" or "ci-cd"
115: 3. **Check popular sources**: Many skills come from `vercel-labs/agent-skills` or `ComposioHQ/awesome-claude-skills`
116: 
117: ## When No Skills Are Found
118: 
119: If no relevant skills exist:
120: 
121: 1. Acknowledge that no existing skill was found
122: 2. Offer to help with the task directly using your general capabilities
123: 3. Suggest the user could create their own skill with `npx skills init`
124: 
125: Example:
126: 
127: ```
128: I searched for skills related to "xyz" but didn't find any matches.
129: I can still help you with this task directly! Would you like me to proceed?
130: 
131: If this is something you do often, you could create your own skill:
132: npx skills init my-xyz-skill
133: ```
</file>

<file path=".agent/skills/frontend-design/LICENSE.txt">
  1: Apache License
  2:                            Version 2.0, January 2004
  3:                         http://www.apache.org/licenses/
  4: 
  5:    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
  6: 
  7:    1. Definitions.
  8: 
  9:       "License" shall mean the terms and conditions for use, reproduction,
 10:       and distribution as defined by Sections 1 through 9 of this document.
 11: 
 12:       "Licensor" shall mean the copyright owner or entity authorized by
 13:       the copyright owner that is granting the License.
 14: 
 15:       "Legal Entity" shall mean the union of the acting entity and all
 16:       other entities that control, are controlled by, or are under common
 17:       control with that entity. For the purposes of this definition,
 18:       "control" means (i) the power, direct or indirect, to cause the
 19:       direction or management of such entity, whether by contract or
 20:       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 21:       outstanding shares, or (iii) beneficial ownership of such entity.
 22: 
 23:       "You" (or "Your") shall mean an individual or Legal Entity
 24:       exercising permissions granted by this License.
 25: 
 26:       "Source" form shall mean the preferred form for making modifications,
 27:       including but not limited to software source code, documentation
 28:       source, and configuration files.
 29: 
 30:       "Object" form shall mean any form resulting from mechanical
 31:       transformation or translation of a Source form, including but
 32:       not limited to compiled object code, generated documentation,
 33:       and conversions to other media types.
 34: 
 35:       "Work" shall mean the work of authorship, whether in Source or
 36:       Object form, made available under the License, as indicated by a
 37:       copyright notice that is included in or attached to the work
 38:       (an example is provided in the Appendix below).
 39: 
 40:       "Derivative Works" shall mean any work, whether in Source or Object
 41:       form, that is based on (or derived from) the Work and for which the
 42:       editorial revisions, annotations, elaborations, or other modifications
 43:       represent, as a whole, an original work of authorship. For the purposes
 44:       of this License, Derivative Works shall not include works that remain
 45:       separable from, or merely link (or bind by name) to the interfaces of,
 46:       the Work and Derivative Works thereof.
 47: 
 48:       "Contribution" shall mean any work of authorship, including
 49:       the original version of the Work and any modifications or additions
 50:       to that Work or Derivative Works thereof, that is intentionally
 51:       submitted to Licensor for inclusion in the Work by the copyright owner
 52:       or by an individual or Legal Entity authorized to submit on behalf of
 53:       the copyright owner. For the purposes of this definition, "submitted"
 54:       means any form of electronic, verbal, or written communication sent
 55:       to the Licensor or its representatives, including but not limited to
 56:       communication on electronic mailing lists, source code control systems,
 57:       and issue tracking systems that are managed by, or on behalf of, the
 58:       Licensor for the purpose of discussing and improving the Work, but
 59:       excluding communication that is conspicuously marked or otherwise
 60:       designated in writing by the copyright owner as "Not a Contribution."
 61: 
 62:       "Contributor" shall mean Licensor and any individual or Legal Entity
 63:       on behalf of whom a Contribution has been received by Licensor and
 64:       subsequently incorporated within the Work.
 65: 
 66:    2. Grant of Copyright License. Subject to the terms and conditions of
 67:       this License, each Contributor hereby grants to You a perpetual,
 68:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 69:       copyright license to reproduce, prepare Derivative Works of,
 70:       publicly display, publicly perform, sublicense, and distribute the
 71:       Work and such Derivative Works in Source or Object form.
 72: 
 73:    3. Grant of Patent License. Subject to the terms and conditions of
 74:       this License, each Contributor hereby grants to You a perpetual,
 75:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 76:       (except as stated in this section) patent license to make, have made,
 77:       use, offer to sell, sell, import, and otherwise transfer the Work,
 78:       where such license applies only to those patent claims licensable
 79:       by such Contributor that are necessarily infringed by their
 80:       Contribution(s) alone or by combination of their Contribution(s)
 81:       with the Work to which such Contribution(s) was submitted. If You
 82:       institute patent litigation against any entity (including a
 83:       cross-claim or counterclaim in a lawsuit) alleging that the Work
 84:       or a Contribution incorporated within the Work constitutes direct
 85:       or contributory patent infringement, then any patent licenses
 86:       granted to You under this License for that Work shall terminate
 87:       as of the date such litigation is filed.
 88: 
 89:    4. Redistribution. You may reproduce and distribute copies of the
 90:       Work or Derivative Works thereof in any medium, with or without
 91:       modifications, and in Source or Object form, provided that You
 92:       meet the following conditions:
 93: 
 94:       (a) You must give any other recipients of the Work or
 95:           Derivative Works a copy of this License; and
 96: 
 97:       (b) You must cause any modified files to carry prominent notices
 98:           stating that You changed the files; and
 99: 
100:       (c) You must retain, in the Source form of any Derivative Works
101:           that You distribute, all copyright, patent, trademark, and
102:           attribution notices from the Source form of the Work,
103:           excluding those notices that do not pertain to any part of
104:           the Derivative Works; and
105: 
106:       (d) If the Work includes a "NOTICE" text file as part of its
107:           distribution, then any Derivative Works that You distribute must
108:           include a readable copy of the attribution notices contained
109:           within such NOTICE file, excluding those notices that do not
110:           pertain to any part of the Derivative Works, in at least one
111:           of the following places: within a NOTICE text file distributed
112:           as part of the Derivative Works; within the Source form or
113:           documentation, if provided along with the Derivative Works; or,
114:           within a display generated by the Derivative Works, if and
115:           wherever such third-party notices normally appear. The contents
116:           of the NOTICE file are for informational purposes only and
117:           do not modify the License. You may add Your own attribution
118:           notices within Derivative Works that You distribute, alongside
119:           or as an addendum to the NOTICE text from the Work, provided
120:           that such additional attribution notices cannot be construed
121:           as modifying the License.
122: 
123:       You may add Your own copyright statement to Your modifications and
124:       may provide additional or different license terms and conditions
125:       for use, reproduction, or distribution of Your modifications, or
126:       for any such Derivative Works as a whole, provided Your use,
127:       reproduction, and distribution of the Work otherwise complies with
128:       the conditions stated in this License.
129: 
130:    5. Submission of Contributions. Unless You explicitly state otherwise,
131:       any Contribution intentionally submitted for inclusion in the Work
132:       by You to the Licensor shall be under the terms and conditions of
133:       this License, without any additional terms or conditions.
134:       Notwithstanding the above, nothing herein shall supersede or modify
135:       the terms of any separate license agreement you may have executed
136:       with Licensor regarding such Contributions.
137: 
138:    6. Trademarks. This License does not grant permission to use the trade
139:       names, trademarks, service marks, or product names of the Licensor,
140:       except as required for reasonable and customary use in describing the
141:       origin of the Work and reproducing the content of the NOTICE file.
142: 
143:    7. Disclaimer of Warranty. Unless required by applicable law or
144:       agreed to in writing, Licensor provides the Work (and each
145:       Contributor provides its Contributions) on an "AS IS" BASIS,
146:       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
147:       implied, including, without limitation, any warranties or conditions
148:       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
149:       PARTICULAR PURPOSE. You are solely responsible for determining the
150:       appropriateness of using or redistributing the Work and assume any
151:       risks associated with Your exercise of permissions under this License.
152: 
153:    8. Limitation of Liability. In no event and under no legal theory,
154:       whether in tort (including negligence), contract, or otherwise,
155:       unless required by applicable law (such as deliberate and grossly
156:       negligent acts) or agreed to in writing, shall any Contributor be
157:       liable to You for damages, including any direct, indirect, special,
158:       incidental, or consequential damages of any character arising as a
159:       result of this License or out of the use or inability to use the
160:       Work (including but not limited to damages for loss of goodwill,
161:       work stoppage, computer failure or malfunction, or any and all
162:       other commercial damages or losses), even if such Contributor
163:       has been advised of the possibility of such damages.
164: 
165:    9. Accepting Warranty or Additional Liability. While redistributing
166:       the Work or Derivative Works thereof, You may choose to offer,
167:       and charge a fee for, acceptance of support, warranty, indemnity,
168:       or other liability obligations and/or rights consistent with this
169:       License. However, in accepting such obligations, You may act only
170:       on Your own behalf and on Your sole responsibility, not on behalf
171:       of any other Contributor, and only if You agree to indemnify,
172:       defend, and hold each Contributor harmless for any liability
173:       incurred by, or claims asserted against, such Contributor by reason
174:       of your accepting any such warranty or additional liability.
175: 
176:    END OF TERMS AND CONDITIONS
</file>

<file path=".agent/skills/frontend-design/SKILL.md">
 1: ---
 2: name: frontend-design
 3: description: Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, artifacts, posters, or applications (examples include websites, landing pages, dashboards, React components, HTML/CSS layouts, or when styling/beautifying any web UI). Generates creative, polished code and UI design that avoids generic AI aesthetics.
 4: license: Complete terms in LICENSE.txt
 5: ---
 6: 
 7: This skill guides creation of distinctive, production-grade frontend interfaces that avoid generic "AI slop" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.
 8: 
 9: The user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.
10: 
11: ## Design Thinking
12: 
13: Before coding, understand the context and commit to a BOLD aesthetic direction:
14: - **Purpose**: What problem does this interface solve? Who uses it?
15: - **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.
16: - **Constraints**: Technical requirements (framework, performance, accessibility).
17: - **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?
18: 
19: **CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.
20: 
21: Then implement working code (HTML/CSS/JS, React, Vue, etc.) that is:
22: - Production-grade and functional
23: - Visually striking and memorable
24: - Cohesive with a clear aesthetic point-of-view
25: - Meticulously refined in every detail
26: 
27: ## Frontend Aesthetics Guidelines
28: 
29: Focus on:
30: - **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.
31: - **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.
32: - **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.
33: - **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.
34: - **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.
35: 
36: NEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.
37: 
38: Interpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.
39: 
40: **IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.
41: 
42: Remember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision.
</file>

<file path=".agent/skills/jules-tasks/SKILL.md">
 1: ---
 2: name: jules-tasks
 3: description: Skill for interacting with Jules AI for task and session management.
 4: ---
 5: 
 6: # `jules-tasks` Skill
 7: 
 8: Use this skill to audit Jules sessions.
 9: 
10: 1. `node .agent/scripts/jules-batch-review.js` (list tasks)
11: 2. `node .agent/scripts/jules-extract-patch.js <id>` (extract patch)
12: 3. `node .agent/scripts/jules-api.sh approve-plan <id>` (approve)
</file>

<file path=".agent/skills/qa-audit/SKILL.md">
  1: ---
  2: name: qa-audit
  3: description: "Use when performing a quality audit, security review, or robustness check of [FILL: main-source-file]. Covers XSS/innerHTML scanning, rule compliance verification, race condition analysis, config schema validation, and documentation drift detection. Produces a severity-classified report (Critical/High/Medium/Low)."
  4: ---
  5: 
  6: # QA-Audit
  7: 
  8: > Systematic full-scope quality audit for `[FILL: main-source-file]` and its config ecosystem.
  9: 
 10: ## Overview
 11: 
 12: This skill performs a comprehensive code quality audit covering security, robustness, rule compliance, and documentation drift. It produces a structured report with findings classified by severity.
 13: 
 14: The audit was designed based on real findings from production audits ‚Äî it catches XSS vectors, race conditions, missing error guards, SVG injection points, and documentation drift that automated tools miss.
 15: 
 16: ## When to Use
 17: 
 18: - **Periodic audits** ‚Äî after major features or before releases
 19: - **Security review** ‚Äî when checking for XSS, injection, or unsafe data flows
 20: - **Post-refactor verification** ‚Äî when code changed significantly
 21: - **Rule compliance check** ‚Äî when verifying code follows all project conventions
 22: - **Documentation drift detection** ‚Äî when code values may have changed without updating docs
 23: - **Pre-release quality gate** ‚Äî as part of the release-readiness workflow
 24: 
 25: ## The 9-Phase Process
 26: 
 27: | Phase | Focus | Output |
 28: | --- | --- | --- |
 29: | 0 | **Baseline** ‚Äî Run `npm test`, `config-stats`, avatar verification | Green baseline confirmed |
 30: | 1 | **Template Full Read** ‚Äî Every line of HTML, CSS, JS | Zone-by-zone understanding |
 31: | 2 | **Rule Compliance** ‚Äî Compare code against ALL 8+ rule files | Rule violation findings |
 32: | 3 | **Config Verification** ‚Äî Schema conformity, cross-references | Schema/data integrity findings |
 33: | 4 | **Security Scan** ‚Äî innerHTML/XSS, SVG injection, forbidden APIs | Security findings |
 34: | 5 | **Edge-Case & Robustness** ‚Äî Race conditions, error propagation, guards | Robustness findings |
 35: | 6 | **Documentation Drift** ‚Äî Code IST vs. documented SOLL values | Drift findings |
 36: | 7 | **Classification & Report** ‚Äî Severity assignment, structured audit document | `QA-AUDIT-{date}.md` |
 37: | 8 | **Fix Planning** ‚Äî Risk per finding, fix order, verification plan | Fix roadmap |
 38: 
 39: ## Scope Options
 40: 
 41: | Scope | Coverage |
 42: | --- | --- |
 43: | **Template-only** | `[FILL: main-source-file]` (HTML + CSS + JS) |
 44: | **Config-included** | Template + all `config/*.js` files |
 45: | **Full Scope Paranoid** | Template + Config + Agent Rules + Docs (recommended) |
 46: 
 47: ## Severity Definitions
 48: 
 49: | Severity | Criteria | Examples |
 50: | --- | --- | --- |
 51: | **CRITICAL** | Security vulnerability or data loss risk | XSS via innerHTML, credential exposure |
 52: | **HIGH** | Functional bug affecting users | UI freeze, broken navigation, lost state |
 53: | **MEDIUM** | Rule violation, robustness gap, doku drift | Missing guard, wrong value in docs |
 54: | **LOW** | Code hygiene, dead code, inconsistency | Unused variable, redundant style |
 55: 
 56: ## Key Checks (Quick Reference)
 57: 
 58: ### Security
 59: 
 60: - All `innerHTML` with config-/runtime-derived text uses `your-escape-fn()`
 61: - `buildFallbackDataUri()` sanitizes colors via `sanitizeColor()`
 62: - No `eval()`, `Function()`, `document.write()`, `postMessage`, `localStorage`
 63: 
 64: ### Rule Compliance
 65: 
 66: - `touch-action: manipulation` on every interactive element
 67: - `:hover` only inside `@media (hover: hover) and (pointer: fine)`
 68: - `-webkit-tap-highlight-color: transparent` on all tappable elements
 69: - All brand avatars via `your-asset-helper()` ‚Äî no manual `<img>`
 70: - All config uses IIFE + `Object.freeze`
 71: - Relative paths only ‚Äî no leading `/` or `./`
 72: 
 73: ### Robustness
 74: 
 75: - Navigation has transition lock (prevents rapid double-tap)
 76: - Confirm-item removal has isRemoving guard
 77: - `handleSubscribe()` has try-catch around Supabase block
 78: - Compatibility guard covers all required APIs
 79: 
 80: ### Documentation Drift
 81: 
 82: - `.app-container` padding value matches ALL rule files
 83: - `--app-chrome-height` value matches ALL rule files
 84: - Footer padding-bottom formula is consistent
 85: - Binding variant IDs are unchanged
 86: 
 87: ## Rule Files to Check (ALL of these)
 88: 
 89: | File | Key sections |
 90: | --- | --- |
 91: | `AGENTS.md` | CSS Rules, JS Rules, SVG/Avatar Rules, Layout Constraints |
 92: | `CLAUDE.md` | Critical Constraints, Do NOT |
 93: | `.github/copilot-instructions.md` | Always Do, Never Do |
 94: | `.claude/rules/css-touch.md` | Touch and hover rules |
 95: | `.claude/rules/template-rendering.md` | Padding, footer, avatar rendering |
 96: | `.claude/rules/config-patterns.md` | IIFE, Object.freeze, SSOT |
 97: | `.agent/rules/coding-standards.md` | CSS/JS rules |
 98: | `.agent/rules/-template.md` | File responsibilities, config schema |
 99: 
100: ## Report Output
101: 
102: Save to: `docs/docs--recommendation-template/QA-AUDIT-{YYYY-MM-DD}.md`
103: 
104: Update `QA-CHECKLIST.md` if new check categories are discovered.
105: 
106: ## Full Procedure
107: 
108: ‚Üí See `.agent/workflows/qa-audit.md` for the complete step-by-step guide including Phase details, checklists, report template, and fix planning methodology.
109: 
110: ‚Üí For Claude Code users: use the `/qa-audit` slash command.
</file>

<file path=".agent/skills/requesting-code-review/code-reviewer.md">
  1: # Code Review Agent
  2: 
  3: You are reviewing code changes for production readiness.
  4: 
  5: **Your task:**
  6: 1. Review {WHAT_WAS_IMPLEMENTED}
  7: 2. Compare against {PLAN_OR_REQUIREMENTS}
  8: 3. Check code quality, architecture, testing
  9: 4. Categorize issues by severity
 10: 5. Assess production readiness
 11: 
 12: ## What Was Implemented
 13: 
 14: {DESCRIPTION}
 15: 
 16: ## Requirements/Plan
 17: 
 18: {PLAN_REFERENCE}
 19: 
 20: ## Git Range to Review
 21: 
 22: **Base:** {BASE_SHA}
 23: **Head:** {HEAD_SHA}
 24: 
 25: ```bash
 26: git diff --stat {BASE_SHA}..{HEAD_SHA}
 27: git diff {BASE_SHA}..{HEAD_SHA}
 28: ```
 29: 
 30: ## Review Checklist
 31: 
 32: **Code Quality:**
 33: - Clean separation of concerns?
 34: - Proper error handling?
 35: - Type safety (if applicable)?
 36: - DRY principle followed?
 37: - Edge cases handled?
 38: 
 39: **Architecture:**
 40: - Sound design decisions?
 41: - Scalability considerations?
 42: - Performance implications?
 43: - Security concerns?
 44: 
 45: **Testing:**
 46: - Tests actually test logic (not mocks)?
 47: - Edge cases covered?
 48: - Integration tests where needed?
 49: - All tests passing?
 50: 
 51: **Requirements:**
 52: - All plan requirements met?
 53: - Implementation matches spec?
 54: - No scope creep?
 55: - Breaking changes documented?
 56: 
 57: **Production Readiness:**
 58: - Migration strategy (if schema changes)?
 59: - Backward compatibility considered?
 60: - Documentation complete?
 61: - No obvious bugs?
 62: 
 63: ## Output Format
 64: 
 65: ### Strengths
 66: [What's well done? Be specific.]
 67: 
 68: ### Issues
 69: 
 70: #### Critical (Must Fix)
 71: [Bugs, security issues, data loss risks, broken functionality]
 72: 
 73: #### Important (Should Fix)
 74: [Architecture problems, missing features, poor error handling, test gaps]
 75: 
 76: #### Minor (Nice to Have)
 77: [Code style, optimization opportunities, documentation improvements]
 78: 
 79: **For each issue:**
 80: - File:line reference
 81: - What's wrong
 82: - Why it matters
 83: - How to fix (if not obvious)
 84: 
 85: ### Recommendations
 86: [Improvements for code quality, architecture, or process]
 87: 
 88: ### Assessment
 89: 
 90: **Ready to merge?** [Yes/No/With fixes]
 91: 
 92: **Reasoning:** [Technical assessment in 1-2 sentences]
 93: 
 94: ## Critical Rules
 95: 
 96: **DO:**
 97: - Categorize by actual severity (not everything is Critical)
 98: - Be specific (file:line, not vague)
 99: - Explain WHY issues matter
100: - Acknowledge strengths
101: - Give clear verdict
102: 
103: **DON'T:**
104: - Say "looks good" without checking
105: - Mark nitpicks as Critical
106: - Give feedback on code you didn't review
107: - Be vague ("improve error handling")
108: - Avoid giving a clear verdict
109: 
110: ## Example Output
111: 
112: ```
113: ### Strengths
114: - Clean database schema with proper migrations (db.ts:15-42)
115: - Comprehensive test coverage (18 tests, all edge cases)
116: - Good error handling with fallbacks (summarizer.ts:85-92)
117: 
118: ### Issues
119: 
120: #### Important
121: 1. **Missing help text in CLI wrapper**
122:    - File: index-conversations:1-31
123:    - Issue: No --help flag, users won't discover --concurrency
124:    - Fix: Add --help case with usage examples
125: 
126: 2. **Date validation missing**
127:    - File: search.ts:25-27
128:    - Issue: Invalid dates silently return no results
129:    - Fix: Validate ISO format, throw error with example
130: 
131: #### Minor
132: 1. **Progress indicators**
133:    - File: indexer.ts:130
134:    - Issue: No "X of Y" counter for long operations
135:    - Impact: Users don't know how long to wait
136: 
137: ### Recommendations
138: - Add progress reporting for user experience
139: - Consider config file for excluded projects (portability)
140: 
141: ### Assessment
142: 
143: **Ready to merge: With fixes**
144: 
145: **Reasoning:** Core implementation is solid with good architecture and tests. Important issues (help text, date validation) are easily fixed and don't affect core functionality.
146: ```
</file>

<file path=".agent/skills/requesting-code-review/SKILL.md">
  1: ---
  2: name: requesting-code-review
  3: description: Use when completing tasks, implementing major features, or before merging to verify work meets requirements
  4: ---
  5: 
  6: # Requesting Code Review
  7: 
  8: Dispatch superpowers:code-reviewer subagent to catch issues before they cascade.
  9: 
 10: **Core principle:** Review early, review often.
 11: 
 12: ## When to Request Review
 13: 
 14: **Mandatory:**
 15: - After each task in subagent-driven development
 16: - After completing major feature
 17: - Before merge to main
 18: 
 19: **Optional but valuable:**
 20: - When stuck (fresh perspective)
 21: - Before refactoring (baseline check)
 22: - After fixing complex bug
 23: 
 24: ## How to Request
 25: 
 26: **1. Get git SHAs:**
 27: ```bash
 28: BASE_SHA=$(git rev-parse HEAD~1)  # or origin/main
 29: HEAD_SHA=$(git rev-parse HEAD)
 30: ```
 31: 
 32: **2. Dispatch code-reviewer subagent:**
 33: 
 34: Use Task tool with superpowers:code-reviewer type, fill template at `code-reviewer.md`
 35: 
 36: **Placeholders:**
 37: - `{WHAT_WAS_IMPLEMENTED}` - What you just built
 38: - `{PLAN_OR_REQUIREMENTS}` - What it should do
 39: - `{BASE_SHA}` - Starting commit
 40: - `{HEAD_SHA}` - Ending commit
 41: - `{DESCRIPTION}` - Brief summary
 42: 
 43: **3. Act on feedback:**
 44: - Fix Critical issues immediately
 45: - Fix Important issues before proceeding
 46: - Note Minor issues for later
 47: - Push back if reviewer is wrong (with reasoning)
 48: 
 49: ## Example
 50: 
 51: ```
 52: [Just completed Task 2: Add verification function]
 53: 
 54: You: Let me request code review before proceeding.
 55: 
 56: BASE_SHA=$(git log --oneline | grep "Task 1" | head -1 | awk '{print $1}')
 57: HEAD_SHA=$(git rev-parse HEAD)
 58: 
 59: [Dispatch superpowers:code-reviewer subagent]
 60:   WHAT_WAS_IMPLEMENTED: Verification and repair functions for conversation index
 61:   PLAN_OR_REQUIREMENTS: Task 2 from docs/plans/deployment-plan.md
 62:   BASE_SHA: a7981ec
 63:   HEAD_SHA: 3df7661
 64:   DESCRIPTION: Added verifyIndex() and repairIndex() with 4 issue types
 65: 
 66: [Subagent returns]:
 67:   Strengths: Clean architecture, real tests
 68:   Issues:
 69:     Important: Missing progress indicators
 70:     Minor: Magic number (100) for reporting interval
 71:   Assessment: Ready to proceed
 72: 
 73: You: [Fix progress indicators]
 74: [Continue to Task 3]
 75: ```
 76: 
 77: ## Integration with Workflows
 78: 
 79: **Subagent-Driven Development:**
 80: - Review after EACH task
 81: - Catch issues before they compound
 82: - Fix before moving to next task
 83: 
 84: **Executing Plans:**
 85: - Review after each batch (3 tasks)
 86: - Get feedback, apply, continue
 87: 
 88: **Ad-Hoc Development:**
 89: - Review before merge
 90: - Review when stuck
 91: 
 92: ## Red Flags
 93: 
 94: **Never:**
 95: - Skip review because "it's simple"
 96: - Ignore Critical issues
 97: - Proceed with unfixed Important issues
 98: - Argue with valid technical feedback
 99: 
100: **If reviewer wrong:**
101: - Push back with technical reasoning
102: - Show code/tests that prove it works
103: - Request clarification
104: 
105: See template at: requesting-code-review/code-reviewer.md
</file>

<file path=".agent/skills/skill-creator/LICENSE.txt">
  1: Apache License
  2:                            Version 2.0, January 2004
  3:                         http://www.apache.org/licenses/
  4: 
  5:    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
  6: 
  7:    1. Definitions.
  8: 
  9:       "License" shall mean the terms and conditions for use, reproduction,
 10:       and distribution as defined by Sections 1 through 9 of this document.
 11: 
 12:       "Licensor" shall mean the copyright owner or entity authorized by
 13:       the copyright owner that is granting the License.
 14: 
 15:       "Legal Entity" shall mean the union of the acting entity and all
 16:       other entities that control, are controlled by, or are under common
 17:       control with that entity. For the purposes of this definition,
 18:       "control" means (i) the power, direct or indirect, to cause the
 19:       direction or management of such entity, whether by contract or
 20:       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 21:       outstanding shares, or (iii) beneficial ownership of such entity.
 22: 
 23:       "You" (or "Your") shall mean an individual or Legal Entity
 24:       exercising permissions granted by this License.
 25: 
 26:       "Source" form shall mean the preferred form for making modifications,
 27:       including but not limited to software source code, documentation
 28:       source, and configuration files.
 29: 
 30:       "Object" form shall mean any form resulting from mechanical
 31:       transformation or translation of a Source form, including but
 32:       not limited to compiled object code, generated documentation,
 33:       and conversions to other media types.
 34: 
 35:       "Work" shall mean the work of authorship, whether in Source or
 36:       Object form, made available under the License, as indicated by a
 37:       copyright notice that is included in or attached to the work
 38:       (an example is provided in the Appendix below).
 39: 
 40:       "Derivative Works" shall mean any work, whether in Source or Object
 41:       form, that is based on (or derived from) the Work and for which the
 42:       editorial revisions, annotations, elaborations, or other modifications
 43:       represent, as a whole, an original work of authorship. For the purposes
 44:       of this License, Derivative Works shall not include works that remain
 45:       separable from, or merely link (or bind by name) to the interfaces of,
 46:       the Work and Derivative Works thereof.
 47: 
 48:       "Contribution" shall mean any work of authorship, including
 49:       the original version of the Work and any modifications or additions
 50:       to that Work or Derivative Works thereof, that is intentionally
 51:       submitted to Licensor for inclusion in the Work by the copyright owner
 52:       or by an individual or Legal Entity authorized to submit on behalf of
 53:       the copyright owner. For the purposes of this definition, "submitted"
 54:       means any form of electronic, verbal, or written communication sent
 55:       to the Licensor or its representatives, including but not limited to
 56:       communication on electronic mailing lists, source code control systems,
 57:       and issue tracking systems that are managed by, or on behalf of, the
 58:       Licensor for the purpose of discussing and improving the Work, but
 59:       excluding communication that is conspicuously marked or otherwise
 60:       designated in writing by the copyright owner as "Not a Contribution."
 61: 
 62:       "Contributor" shall mean Licensor and any individual or Legal Entity
 63:       on behalf of whom a Contribution has been received by Licensor and
 64:       subsequently incorporated within the Work.
 65: 
 66:    2. Grant of Copyright License. Subject to the terms and conditions of
 67:       this License, each Contributor hereby grants to You a perpetual,
 68:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 69:       copyright license to reproduce, prepare Derivative Works of,
 70:       publicly display, publicly perform, sublicense, and distribute the
 71:       Work and such Derivative Works in Source or Object form.
 72: 
 73:    3. Grant of Patent License. Subject to the terms and conditions of
 74:       this License, each Contributor hereby grants to You a perpetual,
 75:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 76:       (except as stated in this section) patent license to make, have made,
 77:       use, offer to sell, sell, import, and otherwise transfer the Work,
 78:       where such license applies only to those patent claims licensable
 79:       by such Contributor that are necessarily infringed by their
 80:       Contribution(s) alone or by combination of their Contribution(s)
 81:       with the Work to which such Contribution(s) was submitted. If You
 82:       institute patent litigation against any entity (including a
 83:       cross-claim or counterclaim in a lawsuit) alleging that the Work
 84:       or a Contribution incorporated within the Work constitutes direct
 85:       or contributory patent infringement, then any patent licenses
 86:       granted to You under this License for that Work shall terminate
 87:       as of the date such litigation is filed.
 88: 
 89:    4. Redistribution. You may reproduce and distribute copies of the
 90:       Work or Derivative Works thereof in any medium, with or without
 91:       modifications, and in Source or Object form, provided that You
 92:       meet the following conditions:
 93: 
 94:       (a) You must give any other recipients of the Work or
 95:           Derivative Works a copy of this License; and
 96: 
 97:       (b) You must cause any modified files to carry prominent notices
 98:           stating that You changed the files; and
 99: 
100:       (c) You must retain, in the Source form of any Derivative Works
101:           that You distribute, all copyright, patent, trademark, and
102:           attribution notices from the Source form of the Work,
103:           excluding those notices that do not pertain to any part of
104:           the Derivative Works; and
105: 
106:       (d) If the Work includes a "NOTICE" text file as part of its
107:           distribution, then any Derivative Works that You distribute must
108:           include a readable copy of the attribution notices contained
109:           within such NOTICE file, excluding those notices that do not
110:           pertain to any part of the Derivative Works, in at least one
111:           of the following places: within a NOTICE text file distributed
112:           as part of the Derivative Works; within the Source form or
113:           documentation, if provided along with the Derivative Works; or,
114:           within a display generated by the Derivative Works, if and
115:           wherever such third-party notices normally appear. The contents
116:           of the NOTICE file are for informational purposes only and
117:           do not modify the License. You may add Your own attribution
118:           notices within Derivative Works that You distribute, alongside
119:           or as an addendum to the NOTICE text from the Work, provided
120:           that such additional attribution notices cannot be construed
121:           as modifying the License.
122: 
123:       You may add Your own copyright statement to Your modifications and
124:       may provide additional or different license terms and conditions
125:       for use, reproduction, or distribution of Your modifications, or
126:       for any such Derivative Works as a whole, provided Your use,
127:       reproduction, and distribution of the Work otherwise complies with
128:       the conditions stated in this License.
129: 
130:    5. Submission of Contributions. Unless You explicitly state otherwise,
131:       any Contribution intentionally submitted for inclusion in the Work
132:       by You to the Licensor shall be under the terms and conditions of
133:       this License, without any additional terms or conditions.
134:       Notwithstanding the above, nothing herein shall supersede or modify
135:       the terms of any separate license agreement you may have executed
136:       with Licensor regarding such Contributions.
137: 
138:    6. Trademarks. This License does not grant permission to use the trade
139:       names, trademarks, service marks, or product names of the Licensor,
140:       except as required for reasonable and customary use in describing the
141:       origin of the Work and reproducing the content of the NOTICE file.
142: 
143:    7. Disclaimer of Warranty. Unless required by applicable law or
144:       agreed to in writing, Licensor provides the Work (and each
145:       Contributor provides its Contributions) on an "AS IS" BASIS,
146:       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
147:       implied, including, without limitation, any warranties or conditions
148:       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
149:       PARTICULAR PURPOSE. You are solely responsible for determining the
150:       appropriateness of using or redistributing the Work and assume any
151:       risks associated with Your exercise of permissions under this License.
152: 
153:    8. Limitation of Liability. In no event and under no legal theory,
154:       whether in tort (including negligence), contract, or otherwise,
155:       unless required by applicable law (such as deliberate and grossly
156:       negligent acts) or agreed to in writing, shall any Contributor be
157:       liable to You for damages, including any direct, indirect, special,
158:       incidental, or consequential damages of any character arising as a
159:       result of this License or out of the use or inability to use the
160:       Work (including but not limited to damages for loss of goodwill,
161:       work stoppage, computer failure or malfunction, or any and all
162:       other commercial damages or losses), even if such Contributor
163:       has been advised of the possibility of such damages.
164: 
165:    9. Accepting Warranty or Additional Liability. While redistributing
166:       the Work or Derivative Works thereof, You may choose to offer,
167:       and charge a fee for, acceptance of support, warranty, indemnity,
168:       or other liability obligations and/or rights consistent with this
169:       License. However, in accepting such obligations, You may act only
170:       on Your own behalf and on Your sole responsibility, not on behalf
171:       of any other Contributor, and only if You agree to indemnify,
172:       defend, and hold each Contributor harmless for any liability
173:       incurred by, or claims asserted against, such Contributor by reason
174:       of your accepting any such warranty or additional liability.
175: 
176:    END OF TERMS AND CONDITIONS
177: 
178:    APPENDIX: How to apply the Apache License to your work.
179: 
180:       To apply the Apache License to your work, attach the following
181:       boilerplate notice, with the fields enclosed by brackets "[]"
182:       replaced with your own identifying information. (Don't include
183:       the brackets!)  The text should be enclosed in the appropriate
184:       comment syntax for the file format. We also recommend that a
185:       file or class name and description of purpose be included on the
186:       same "printed page" as the copyright notice for easier
187:       identification within third-party archives.
188: 
189:    Copyright [yyyy] [name of copyright owner]
190: 
191:    Licensed under the Apache License, Version 2.0 (the "License");
192:    you may not use this file except in compliance with the License.
193:    You may obtain a copy of the License at
194: 
195:        http://www.apache.org/licenses/LICENSE-2.0
196: 
197:    Unless required by applicable law or agreed to in writing, software
198:    distributed under the License is distributed on an "AS IS" BASIS,
199:    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
200:    See the License for the specific language governing permissions and
201:    limitations under the License.
</file>

<file path=".agent/skills/skill-creator/references/output-patterns.md">
 1: # Output Patterns
 2: 
 3: Use these patterns when skills need to produce consistent, high-quality output.
 4: 
 5: ## Template Pattern
 6: 
 7: Provide templates for output format. Match the level of strictness to your needs.
 8: 
 9: **For strict requirements (like API responses or data formats):**
10: 
11: ```markdown
12: ## Report structure
13: 
14: ALWAYS use this exact template structure:
15: 
16: # [Analysis Title]
17: 
18: ## Executive summary
19: [One-paragraph overview of key findings]
20: 
21: ## Key findings
22: - Finding 1 with supporting data
23: - Finding 2 with supporting data
24: - Finding 3 with supporting data
25: 
26: ## Recommendations
27: 1. Specific actionable recommendation
28: 2. Specific actionable recommendation
29: ```
30: 
31: **For flexible guidance (when adaptation is useful):**
32: 
33: ```markdown
34: ## Report structure
35: 
36: Here is a sensible default format, but use your best judgment:
37: 
38: # [Analysis Title]
39: 
40: ## Executive summary
41: [Overview]
42: 
43: ## Key findings
44: [Adapt sections based on what you discover]
45: 
46: ## Recommendations
47: [Tailor to the specific context]
48: 
49: Adjust sections as needed for the specific analysis type.
50: ```
51: 
52: ## Examples Pattern
53: 
54: For skills where output quality depends on seeing examples, provide input/output pairs:
55: 
56: ```markdown
57: ## Commit message format
58: 
59: Generate commit messages following these examples:
60: 
61: **Example 1:**
62: Input: Added user authentication with JWT tokens
63: Output:
64: ```
65: feat(auth): implement JWT-based authentication
66: 
67: Add login endpoint and token validation middleware
68: ```
69: 
70: **Example 2:**
71: Input: Fixed bug where dates displayed incorrectly in reports
72: Output:
73: ```
74: fix(reports): correct date formatting in timezone conversion
75: 
76: Use UTC timestamps consistently across report generation
77: ```
78: 
79: Follow this style: type(scope): brief description, then detailed explanation.
80: ```
81: 
82: Examples help Claude understand the desired style and level of detail more clearly than descriptions alone.
</file>

<file path=".agent/skills/skill-creator/references/workflows.md">
 1: # Workflow Patterns
 2: 
 3: ## Sequential Workflows
 4: 
 5: For complex tasks, break operations into clear, sequential steps. It is often helpful to give Claude an overview of the process towards the beginning of SKILL.md:
 6: 
 7: ```markdown
 8: Filling a PDF form involves these steps:
 9: 
10: 1. Analyze the form (run analyze_form.py)
11: 2. Create field mapping (edit fields.json)
12: 3. Validate mapping (run validate_fields.py)
13: 4. Fill the form (run fill_form.py)
14: 5. Verify output (run verify_output.py)
15: ```
16: 
17: ## Conditional Workflows
18: 
19: For tasks with branching logic, guide Claude through decision points:
20: 
21: ```markdown
22: 1. Determine the modification type:
23:    **Creating new content?** ‚Üí Follow "Creation workflow" below
24:    **Editing existing content?** ‚Üí Follow "Editing workflow" below
25: 
26: 2. Creation workflow: [steps]
27: 3. Editing workflow: [steps]
28: ```
</file>

<file path=".agent/skills/skill-creator/scripts/init_skill.py">
  1: #!/usr/bin/env python3
  2: """
  3: Skill Initializer - Creates a new skill from template
  4: Usage:
  5:     init_skill.py <skill-name> --path <path>
  6: Examples:
  7:     init_skill.py my-new-skill --path skills/public
  8:     init_skill.py my-api-helper --path skills/private
  9:     init_skill.py custom-skill --path /custom/location
 10: """
 11: import sys
 12: from pathlib import Path
 13: SKILL_TEMPLATE = """---
 14: name: {skill_name}
 15: description: [TODO: Complete and informative explanation of what the skill does and when to use it. Include WHEN to use this skill - specific scenarios, file types, or tasks that trigger it.]
 16: ---
 17: # {skill_title}
 18: ## Overview
 19: [TODO: 1-2 sentences explaining what this skill enables]
 20: ## Structuring This Skill
 21: [TODO: Choose the structure that best fits this skill's purpose. Common patterns:
 22: **1. Workflow-Based** (best for sequential processes)
 23: - Works well when there are clear step-by-step procedures
 24: - Example: DOCX skill with "Workflow Decision Tree" ‚Üí "Reading" ‚Üí "Creating" ‚Üí "Editing"
 25: - Structure: ## Overview ‚Üí ## Workflow Decision Tree ‚Üí ## Step 1 ‚Üí ## Step 2...
 26: **2. Task-Based** (best for tool collections)
 27: - Works well when the skill offers different operations/capabilities
 28: - Example: PDF skill with "Quick Start" ‚Üí "Merge PDFs" ‚Üí "Split PDFs" ‚Üí "Extract Text"
 29: - Structure: ## Overview ‚Üí ## Quick Start ‚Üí ## Task Category 1 ‚Üí ## Task Category 2...
 30: **3. Reference/Guidelines** (best for standards or specifications)
 31: - Works well for brand guidelines, coding standards, or requirements
 32: - Example: Brand styling with "Brand Guidelines" ‚Üí "Colors" ‚Üí "Typography" ‚Üí "Features"
 33: - Structure: ## Overview ‚Üí ## Guidelines ‚Üí ## Specifications ‚Üí ## Usage...
 34: **4. Capabilities-Based** (best for integrated systems)
 35: - Works well when the skill provides multiple interrelated features
 36: - Example: Product Management with "Core Capabilities" ‚Üí numbered capability list
 37: - Structure: ## Overview ‚Üí ## Core Capabilities ‚Üí ### 1. Feature ‚Üí ### 2. Feature...
 38: Patterns can be mixed and matched as needed. Most skills combine patterns (e.g., start with task-based, add workflow for complex operations).
 39: Delete this entire "Structuring This Skill" section when done - it's just guidance.]
 40: ## [TODO: Replace with the first main section based on chosen structure]
 41: [TODO: Add content here. See examples in existing skills:
 42: - Code samples for technical skills
 43: - Decision trees for complex workflows
 44: - Concrete examples with realistic user requests
 45: - References to scripts/templates/references as needed]
 46: ## Resources
 47: This skill includes example resource directories that demonstrate how to organize different types of bundled resources:
 48: ### scripts/
 49: Executable code (Python/Bash/etc.) that can be run directly to perform specific operations.
 50: **Examples from other skills:**
 51: - PDF skill: `fill_fillable_fields.py`, `extract_form_field_info.py` - utilities for PDF manipulation
 52: - DOCX skill: `document.py`, `utilities.py` - Python modules for document processing
 53: **Appropriate for:** Python scripts, shell scripts, or any executable code that performs automation, data processing, or specific operations.
 54: **Note:** Scripts may be executed without loading into context, but can still be read by Claude for patching or environment adjustments.
 55: ### references/
 56: Documentation and reference material intended to be loaded into context to inform Claude's process and thinking.
 57: **Examples from other skills:**
 58: - Product management: `communication.md`, `context_building.md` - detailed workflow guides
 59: - BigQuery: API reference documentation and query examples
 60: - Finance: Schema documentation, company policies
 61: **Appropriate for:** In-depth documentation, API references, database schemas, comprehensive guides, or any detailed information that Claude should reference while working.
 62: ### assets/
 63: Files not intended to be loaded into context, but rather used within the output Claude produces.
 64: **Examples from other skills:**
 65: - Brand styling: PowerPoint template files (.pptx), logo files
 66: - Frontend builder: HTML/React boilerplate project directories
 67: - Typography: Font files (.ttf, .woff2)
 68: **Appropriate for:** Templates, boilerplate code, document templates, images, icons, fonts, or any files meant to be copied or used in the final output.
 69: ---
 70: **Any unneeded directories can be deleted.** Not every skill requires all three types of resources.
 71: """
 72: EXAMPLE_SCRIPT = '''#!/usr/bin/env python3
 73: """
 74: Example helper script for {skill_name}
 75: This is a placeholder script that can be executed directly.
 76: Replace with actual implementation or delete if not needed.
 77: Example real scripts from other skills:
 78: - pdf/scripts/fill_fillable_fields.py - Fills PDF form fields
 79: - pdf/scripts/convert_pdf_to_images.py - Converts PDF pages to images
 80: """
 81: def main():
 82:     print("This is an example script for {skill_name}")
 83:     # TODO: Add actual script logic here
 84:     # This could be data processing, file conversion, API calls, etc.
 85: if __name__ == "__main__":
 86:     main()
 87: '''
 88: EXAMPLE_REFERENCE = """# Reference Documentation for {skill_title}
 89: This is a placeholder for detailed reference documentation.
 90: Replace with actual reference content or delete if not needed.
 91: Example real reference docs from other skills:
 92: - product-management/references/communication.md - Comprehensive guide for status updates
 93: - product-management/references/context_building.md - Deep-dive on gathering context
 94: - bigquery/references/ - API references and query examples
 95: ## When Reference Docs Are Useful
 96: Reference docs are ideal for:
 97: - Comprehensive API documentation
 98: - Detailed workflow guides
 99: - Complex multi-step processes
100: - Information too lengthy for main SKILL.md
101: - Content that's only needed for specific use cases
102: ## Structure Suggestions
103: ### API Reference Example
104: - Overview
105: - Authentication
106: - Endpoints with examples
107: - Error codes
108: - Rate limits
109: ### Workflow Guide Example
110: - Prerequisites
111: - Step-by-step instructions
112: - Common patterns
113: - Troubleshooting
114: - Best practices
115: """
116: EXAMPLE_ASSET = """# Example Asset File
117: This placeholder represents where asset files would be stored.
118: Replace with actual asset files (templates, images, fonts, etc.) or delete if not needed.
119: Asset files are NOT intended to be loaded into context, but rather used within
120: the output Claude produces.
121: Example asset files from other skills:
122: - Brand guidelines: logo.png, slides_template.pptx
123: - Frontend builder: hello-world/ directory with HTML/React boilerplate
124: - Typography: custom-font.ttf, font-family.woff2
125: - Data: sample_data.csv, test_dataset.json
126: ## Common Asset Types
127: - Templates: .pptx, .docx, boilerplate directories
128: - Images: .png, .jpg, .svg, .gif
129: - Fonts: .ttf, .otf, .woff, .woff2
130: - Boilerplate code: Project directories, starter files
131: - Icons: .ico, .svg
132: - Data files: .csv, .json, .xml, .yaml
133: Note: This is a text placeholder. Actual assets can be any file type.
134: """
135: def title_case_skill_name(skill_name):
136:     """Convert hyphenated skill name to Title Case for display."""
137:     return ' '.join(word.capitalize() for word in skill_name.split('-'))
138: def init_skill(skill_name, path):
139:     """
140:     Initialize a new skill directory with template SKILL.md.
141:     Args:
142:         skill_name: Name of the skill
143:         path: Path where the skill directory should be created
144:     Returns:
145:         Path to created skill directory, or None if error
146:     """
147:     # Determine skill directory path
148:     skill_dir = Path(path).resolve() / skill_name
149:     # Check if directory already exists
150:     if skill_dir.exists():
151:         print(f"‚ùå Error: Skill directory already exists: {skill_dir}")
152:         return None
153:     # Create skill directory
154:     try:
155:         skill_dir.mkdir(parents=True, exist_ok=False)
156:         print(f"‚úÖ Created skill directory: {skill_dir}")
157:     except Exception as e:
158:         print(f"‚ùå Error creating directory: {e}")
159:         return None
160:     # Create SKILL.md from template
161:     skill_title = title_case_skill_name(skill_name)
162:     skill_content = SKILL_TEMPLATE.format(
163:         skill_name=skill_name,
164:         skill_title=skill_title
165:     )
166:     skill_md_path = skill_dir / 'SKILL.md'
167:     try:
168:         skill_md_path.write_text(skill_content)
169:         print("‚úÖ Created SKILL.md")
170:     except Exception as e:
171:         print(f"‚ùå Error creating SKILL.md: {e}")
172:         return None
173:     # Create resource directories with example files
174:     try:
175:         # Create scripts/ directory with example script
176:         scripts_dir = skill_dir / 'scripts'
177:         scripts_dir.mkdir(exist_ok=True)
178:         example_script = scripts_dir / 'example.py'
179:         example_script.write_text(EXAMPLE_SCRIPT.format(skill_name=skill_name))
180:         example_script.chmod(0o755)
181:         print("‚úÖ Created scripts/example.py")
182:         # Create references/ directory with example reference doc
183:         references_dir = skill_dir / 'references'
184:         references_dir.mkdir(exist_ok=True)
185:         example_reference = references_dir / 'api_reference.md'
186:         example_reference.write_text(EXAMPLE_REFERENCE.format(skill_title=skill_title))
187:         print("‚úÖ Created references/api_reference.md")
188:         # Create assets/ directory with example asset placeholder
189:         assets_dir = skill_dir / 'assets'
190:         assets_dir.mkdir(exist_ok=True)
191:         example_asset = assets_dir / 'example_asset.txt'
192:         example_asset.write_text(EXAMPLE_ASSET)
193:         print("‚úÖ Created assets/example_asset.txt")
194:     except Exception as e:
195:         print(f"‚ùå Error creating resource directories: {e}")
196:         return None
197:     # Print next steps
198:     print(f"\n‚úÖ Skill '{skill_name}' initialized successfully at {skill_dir}")
199:     print("\nNext steps:")
200:     print("1. Edit SKILL.md to complete the TODO items and update the description")
201:     print("2. Customize or delete the example files in scripts/, references/, and assets/")
202:     print("3. Run the validator when ready to check the skill structure")
203:     return skill_dir
204: def main():
205:     if len(sys.argv) < 4 or sys.argv[2] != '--path':
206:         print("Usage: init_skill.py <skill-name> --path <path>")
207:         print("\nSkill name requirements:")
208:         print("  - Kebab-case identifier (e.g., 'my-data-analyzer')")
209:         print("  - Lowercase letters, digits, and hyphens only")
210:         print("  - Max 64 characters")
211:         print("  - Must match directory name exactly")
212:         print("\nExamples:")
213:         print("  init_skill.py my-new-skill --path skills/public")
214:         print("  init_skill.py my-api-helper --path skills/private")
215:         print("  init_skill.py custom-skill --path /custom/location")
216:         sys.exit(1)
217:     skill_name = sys.argv[1]
218:     path = sys.argv[3]
219:     print(f"üöÄ Initializing skill: {skill_name}")
220:     print(f"   Location: {path}")
221:     print()
222:     result = init_skill(skill_name, path)
223:     if result:
224:         sys.exit(0)
225:     else:
226:         sys.exit(1)
227: if __name__ == "__main__":
228:     main()
</file>

<file path=".agent/skills/skill-creator/scripts/package_skill.py">
 1: #!/usr/bin/env python3
 2: """
 3: Skill Packager - Creates a distributable .skill file of a skill folder
 4: Usage:
 5:     python utils/package_skill.py <path/to/skill-folder> [output-directory]
 6: Example:
 7:     python utils/package_skill.py skills/public/my-skill
 8:     python utils/package_skill.py skills/public/my-skill ./dist
 9: """
10: import sys
11: import zipfile
12: from pathlib import Path
13: from quick_validate import validate_skill
14: def package_skill(skill_path, output_dir=None):
15:     """
16:     Package a skill folder into a .skill file.
17:     Args:
18:         skill_path: Path to the skill folder
19:         output_dir: Optional output directory for the .skill file (defaults to current directory)
20:     Returns:
21:         Path to the created .skill file, or None if error
22:     """
23:     skill_path = Path(skill_path).resolve()
24:     # Validate skill folder exists
25:     if not skill_path.exists():
26:         print(f"‚ùå Error: Skill folder not found: {skill_path}")
27:         return None
28:     if not skill_path.is_dir():
29:         print(f"‚ùå Error: Path is not a directory: {skill_path}")
30:         return None
31:     # Validate SKILL.md exists
32:     skill_md = skill_path / "SKILL.md"
33:     if not skill_md.exists():
34:         print(f"‚ùå Error: SKILL.md not found in {skill_path}")
35:         return None
36:     # Run validation before packaging
37:     print("üîç Validating skill...")
38:     valid, message = validate_skill(skill_path)
39:     if not valid:
40:         print(f"‚ùå Validation failed: {message}")
41:         print("   Please fix the validation errors before packaging.")
42:         return None
43:     print(f"‚úÖ {message}\n")
44:     # Determine output location
45:     skill_name = skill_path.name
46:     if output_dir:
47:         output_path = Path(output_dir).resolve()
48:         output_path.mkdir(parents=True, exist_ok=True)
49:     else:
50:         output_path = Path.cwd()
51:     skill_filename = output_path / f"{skill_name}.skill"
52:     # Create the .skill file (zip format)
53:     try:
54:         with zipfile.ZipFile(skill_filename, 'w', zipfile.ZIP_DEFLATED) as zipf:
55:             # Walk through the skill directory
56:             for file_path in skill_path.rglob('*'):
57:                 if file_path.is_file():
58:                     # Calculate the relative path within the zip
59:                     arcname = file_path.relative_to(skill_path.parent)
60:                     zipf.write(file_path, arcname)
61:                     print(f"  Added: {arcname}")
62:         print(f"\n‚úÖ Successfully packaged skill to: {skill_filename}")
63:         return skill_filename
64:     except Exception as e:
65:         print(f"‚ùå Error creating .skill file: {e}")
66:         return None
67: def main():
68:     if len(sys.argv) < 2:
69:         print("Usage: python utils/package_skill.py <path/to/skill-folder> [output-directory]")
70:         print("\nExample:")
71:         print("  python utils/package_skill.py skills/public/my-skill")
72:         print("  python utils/package_skill.py skills/public/my-skill ./dist")
73:         sys.exit(1)
74:     skill_path = sys.argv[1]
75:     output_dir = sys.argv[2] if len(sys.argv) > 2 else None
76:     print(f"üì¶ Packaging skill: {skill_path}")
77:     if output_dir:
78:         print(f"   Output directory: {output_dir}")
79:     print()
80:     result = package_skill(skill_path, output_dir)
81:     if result:
82:         sys.exit(0)
83:     else:
84:         sys.exit(1)
85: if __name__ == "__main__":
86:     main()
</file>

<file path=".agent/skills/skill-creator/scripts/quick_validate.py">
 1: #!/usr/bin/env python3
 2: """
 3: Quick validation script for skills - minimal version
 4: """
 5: import sys
 6: import os
 7: import re
 8: import yaml
 9: from pathlib import Path
10: def validate_skill(skill_path):
11:     """Basic validation of a skill"""
12:     skill_path = Path(skill_path)
13:     # Check SKILL.md exists
14:     skill_md = skill_path / 'SKILL.md'
15:     if not skill_md.exists():
16:         return False, "SKILL.md not found"
17:     # Read and validate frontmatter
18:     content = skill_md.read_text()
19:     if not content.startswith('---'):
20:         return False, "No YAML frontmatter found"
21:     # Extract frontmatter
22:     match = re.match(r'^---\n(.*?)\n---', content, re.DOTALL)
23:     if not match:
24:         return False, "Invalid frontmatter format"
25:     frontmatter_text = match.group(1)
26:     # Parse YAML frontmatter
27:     try:
28:         frontmatter = yaml.safe_load(frontmatter_text)
29:         if not isinstance(frontmatter, dict):
30:             return False, "Frontmatter must be a YAML dictionary"
31:     except yaml.YAMLError as e:
32:         return False, f"Invalid YAML in frontmatter: {e}"
33:     # Define allowed properties
34:     ALLOWED_PROPERTIES = {'name', 'description', 'license', 'allowed-tools', 'metadata', 'compatibility'}
35:     # Check for unexpected properties (excluding nested keys under metadata)
36:     unexpected_keys = set(frontmatter.keys()) - ALLOWED_PROPERTIES
37:     if unexpected_keys:
38:         return False, (
39:             f"Unexpected key(s) in SKILL.md frontmatter: {', '.join(sorted(unexpected_keys))}. "
40:             f"Allowed properties are: {', '.join(sorted(ALLOWED_PROPERTIES))}"
41:         )
42:     # Check required fields
43:     if 'name' not in frontmatter:
44:         return False, "Missing 'name' in frontmatter"
45:     if 'description' not in frontmatter:
46:         return False, "Missing 'description' in frontmatter"
47:     # Extract name for validation
48:     name = frontmatter.get('name', '')
49:     if not isinstance(name, str):
50:         return False, f"Name must be a string, got {type(name).__name__}"
51:     name = name.strip()
52:     if name:
53:         # Check naming convention (kebab-case: lowercase with hyphens)
54:         if not re.match(r'^[a-z0-9-]+$', name):
55:             return False, f"Name '{name}' should be kebab-case (lowercase letters, digits, and hyphens only)"
56:         if name.startswith('-') or name.endswith('-') or '--' in name:
57:             return False, f"Name '{name}' cannot start/end with hyphen or contain consecutive hyphens"
58:         # Check name length (max 64 characters per spec)
59:         if len(name) > 64:
60:             return False, f"Name is too long ({len(name)} characters). Maximum is 64 characters."
61:     # Extract and validate description
62:     description = frontmatter.get('description', '')
63:     if not isinstance(description, str):
64:         return False, f"Description must be a string, got {type(description).__name__}"
65:     description = description.strip()
66:     if description:
67:         # Check for angle brackets
68:         if '<' in description or '>' in description:
69:             return False, "Description cannot contain angle brackets (< or >)"
70:         # Check description length (max 1024 characters per spec)
71:         if len(description) > 1024:
72:             return False, f"Description is too long ({len(description)} characters). Maximum is 1024 characters."
73:     # Validate compatibility field if present (optional)
74:     compatibility = frontmatter.get('compatibility', '')
75:     if compatibility:
76:         if not isinstance(compatibility, str):
77:             return False, f"Compatibility must be a string, got {type(compatibility).__name__}"
78:         if len(compatibility) > 500:
79:             return False, f"Compatibility is too long ({len(compatibility)} characters). Maximum is 500 characters."
80:     return True, "Skill is valid!"
81: if __name__ == "__main__":
82:     if len(sys.argv) != 2:
83:         print("Usage: python quick_validate.py <skill_directory>")
84:         sys.exit(1)
85:     valid, message = validate_skill(sys.argv[1])
86:     print(message)
87:     sys.exit(0 if valid else 1)
</file>

<file path=".agent/skills/systematic-debugging/condition-based-waiting-example.ts">
  1: // Complete implementation of condition-based waiting utilities
  2: // From: Lace test infrastructure improvements (2025-10-03)
  3: // Context: Fixed 15 flaky tests by replacing arbitrary timeouts
  4: import type { ThreadManager } from '~/threads/thread-manager';
  5: import type { LaceEvent, LaceEventType } from '~/threads/types';
  6: /**
  7:  * Wait for a specific event type to appear in thread
  8:  *
  9:  * @param threadManager - The thread manager to query
 10:  * @param threadId - Thread to check for events
 11:  * @param eventType - Type of event to wait for
 12:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 13:  * @returns Promise resolving to the first matching event
 14:  *
 15:  * Example:
 16:  *   await waitForEvent(threadManager, agentThreadId, 'TOOL_RESULT');
 17:  */
 18: export function waitForEvent(
 19:   threadManager: ThreadManager,
 20:   threadId: string,
 21:   eventType: LaceEventType,
 22:   timeoutMs = 5000
 23: ): Promise<LaceEvent> {
 24:   return new Promise((resolve, reject) => {
 25:     const startTime = Date.now();
 26:     const check = () => {
 27:       const events = threadManager.getEvents(threadId);
 28:       const event = events.find((e) => e.type === eventType);
 29:       if (event) {
 30:         resolve(event);
 31:       } else if (Date.now() - startTime > timeoutMs) {
 32:         reject(new Error(`Timeout waiting for ${eventType} event after ${timeoutMs}ms`));
 33:       } else {
 34:         setTimeout(check, 10); // Poll every 10ms for efficiency
 35:       }
 36:     };
 37:     check();
 38:   });
 39: }
 40: /**
 41:  * Wait for a specific number of events of a given type
 42:  *
 43:  * @param threadManager - The thread manager to query
 44:  * @param threadId - Thread to check for events
 45:  * @param eventType - Type of event to wait for
 46:  * @param count - Number of events to wait for
 47:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 48:  * @returns Promise resolving to all matching events once count is reached
 49:  *
 50:  * Example:
 51:  *   // Wait for 2 AGENT_MESSAGE events (initial response + continuation)
 52:  *   await waitForEventCount(threadManager, agentThreadId, 'AGENT_MESSAGE', 2);
 53:  */
 54: export function waitForEventCount(
 55:   threadManager: ThreadManager,
 56:   threadId: string,
 57:   eventType: LaceEventType,
 58:   count: number,
 59:   timeoutMs = 5000
 60: ): Promise<LaceEvent[]> {
 61:   return new Promise((resolve, reject) => {
 62:     const startTime = Date.now();
 63:     const check = () => {
 64:       const events = threadManager.getEvents(threadId);
 65:       const matchingEvents = events.filter((e) => e.type === eventType);
 66:       if (matchingEvents.length >= count) {
 67:         resolve(matchingEvents);
 68:       } else if (Date.now() - startTime > timeoutMs) {
 69:         reject(
 70:           new Error(
 71:             `Timeout waiting for ${count} ${eventType} events after ${timeoutMs}ms (got ${matchingEvents.length})`
 72:           )
 73:         );
 74:       } else {
 75:         setTimeout(check, 10);
 76:       }
 77:     };
 78:     check();
 79:   });
 80: }
 81: /**
 82:  * Wait for an event matching a custom predicate
 83:  * Useful when you need to check event data, not just type
 84:  *
 85:  * @param threadManager - The thread manager to query
 86:  * @param threadId - Thread to check for events
 87:  * @param predicate - Function that returns true when event matches
 88:  * @param description - Human-readable description for error messages
 89:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 90:  * @returns Promise resolving to the first matching event
 91:  *
 92:  * Example:
 93:  *   // Wait for TOOL_RESULT with specific ID
 94:  *   await waitForEventMatch(
 95:  *     threadManager,
 96:  *     agentThreadId,
 97:  *     (e) => e.type === 'TOOL_RESULT' && e.data.id === 'call_123',
 98:  *     'TOOL_RESULT with id=call_123'
 99:  *   );
100:  */
101: export function waitForEventMatch(
102:   threadManager: ThreadManager,
103:   threadId: string,
104:   predicate: (event: LaceEvent) => boolean,
105:   description: string,
106:   timeoutMs = 5000
107: ): Promise<LaceEvent> {
108:   return new Promise((resolve, reject) => {
109:     const startTime = Date.now();
110:     const check = () => {
111:       const events = threadManager.getEvents(threadId);
112:       const event = events.find(predicate);
113:       if (event) {
114:         resolve(event);
115:       } else if (Date.now() - startTime > timeoutMs) {
116:         reject(new Error(`Timeout waiting for ${description} after ${timeoutMs}ms`));
117:       } else {
118:         setTimeout(check, 10);
119:       }
120:     };
121:     check();
122:   });
123: }
124: // Usage example from actual debugging session:
125: //
126: // BEFORE (flaky):
127: // ---------------
128: // const messagePromise = agent.sendMessage('Execute tools');
129: // await new Promise(r => setTimeout(r, 300)); // Hope tools start in 300ms
130: // agent.abort();
131: // await messagePromise;
132: // await new Promise(r => setTimeout(r, 50));  // Hope results arrive in 50ms
133: // expect(toolResults.length).toBe(2);         // Fails randomly
134: //
135: // AFTER (reliable):
136: // ----------------
137: // const messagePromise = agent.sendMessage('Execute tools');
138: // await waitForEventCount(threadManager, threadId, 'TOOL_CALL', 2); // Wait for tools to start
139: // agent.abort();
140: // await messagePromise;
141: // await waitForEventCount(threadManager, threadId, 'TOOL_RESULT', 2); // Wait for results
142: // expect(toolResults.length).toBe(2); // Always succeeds
143: //
144: // Result: 60% pass rate ‚Üí 100%, 40% faster execution
</file>

<file path=".agent/skills/systematic-debugging/condition-based-waiting.md">
  1: # Condition-Based Waiting
  2: 
  3: ## Overview
  4: 
  5: Flaky tests often guess at timing with arbitrary delays. This creates race conditions where tests pass on fast machines but fail under load or in CI.
  6: 
  7: **Core principle:** Wait for the actual condition you care about, not a guess about how long it takes.
  8: 
  9: ## When to Use
 10: 
 11: ```dot
 12: digraph when_to_use {
 13:     "Test uses setTimeout/sleep?" [shape=diamond];
 14:     "Testing timing behavior?" [shape=diamond];
 15:     "Document WHY timeout needed" [shape=box];
 16:     "Use condition-based waiting" [shape=box];
 17: 
 18:     "Test uses setTimeout/sleep?" -> "Testing timing behavior?" [label="yes"];
 19:     "Testing timing behavior?" -> "Document WHY timeout needed" [label="yes"];
 20:     "Testing timing behavior?" -> "Use condition-based waiting" [label="no"];
 21: }
 22: ```
 23: 
 24: **Use when:**
 25: - Tests have arbitrary delays (`setTimeout`, `sleep`, `time.sleep()`)
 26: - Tests are flaky (pass sometimes, fail under load)
 27: - Tests timeout when run in parallel
 28: - Waiting for async operations to complete
 29: 
 30: **Don't use when:**
 31: - Testing actual timing behavior (debounce, throttle intervals)
 32: - Always document WHY if using arbitrary timeout
 33: 
 34: ## Core Pattern
 35: 
 36: ```typescript
 37: // ‚ùå BEFORE: Guessing at timing
 38: await new Promise(r => setTimeout(r, 50));
 39: const result = getResult();
 40: expect(result).toBeDefined();
 41: 
 42: // ‚úÖ AFTER: Waiting for condition
 43: await waitFor(() => getResult() !== undefined);
 44: const result = getResult();
 45: expect(result).toBeDefined();
 46: ```
 47: 
 48: ## Quick Patterns
 49: 
 50: | Scenario | Pattern |
 51: |----------|---------|
 52: | Wait for event | `waitFor(() => events.find(e => e.type === 'DONE'))` |
 53: | Wait for state | `waitFor(() => machine.state === 'ready')` |
 54: | Wait for count | `waitFor(() => items.length >= 5)` |
 55: | Wait for file | `waitFor(() => fs.existsSync(path))` |
 56: | Complex condition | `waitFor(() => obj.ready && obj.value > 10)` |
 57: 
 58: ## Implementation
 59: 
 60: Generic polling function:
 61: ```typescript
 62: async function waitFor<T>(
 63:   condition: () => T | undefined | null | false,
 64:   description: string,
 65:   timeoutMs = 5000
 66: ): Promise<T> {
 67:   const startTime = Date.now();
 68: 
 69:   while (true) {
 70:     const result = condition();
 71:     if (result) return result;
 72: 
 73:     if (Date.now() - startTime > timeoutMs) {
 74:       throw new Error(`Timeout waiting for ${description} after ${timeoutMs}ms`);
 75:     }
 76: 
 77:     await new Promise(r => setTimeout(r, 10)); // Poll every 10ms
 78:   }
 79: }
 80: ```
 81: 
 82: See `condition-based-waiting-example.ts` in this directory for complete implementation with domain-specific helpers (`waitForEvent`, `waitForEventCount`, `waitForEventMatch`) from actual debugging session.
 83: 
 84: ## Common Mistakes
 85: 
 86: **‚ùå Polling too fast:** `setTimeout(check, 1)` - wastes CPU
 87: **‚úÖ Fix:** Poll every 10ms
 88: 
 89: **‚ùå No timeout:** Loop forever if condition never met
 90: **‚úÖ Fix:** Always include timeout with clear error
 91: 
 92: **‚ùå Stale data:** Cache state before loop
 93: **‚úÖ Fix:** Call getter inside loop for fresh data
 94: 
 95: ## When Arbitrary Timeout IS Correct
 96: 
 97: ```typescript
 98: // Tool ticks every 100ms - need 2 ticks to verify partial output
 99: await waitForEvent(manager, 'TOOL_STARTED'); // First: wait for condition
100: await new Promise(r => setTimeout(r, 200));   // Then: wait for timed behavior
101: // 200ms = 2 ticks at 100ms intervals - documented and justified
102: ```
103: 
104: **Requirements:**
105: 1. First wait for triggering condition
106: 2. Based on known timing (not guessing)
107: 3. Comment explaining WHY
108: 
109: ## Real-World Impact
110: 
111: From debugging session (2025-10-03):
112: - Fixed 15 flaky tests across 3 files
113: - Pass rate: 60% ‚Üí 100%
114: - Execution time: 40% faster
115: - No more race conditions
</file>

<file path=".agent/skills/systematic-debugging/CREATION-LOG.md">
  1: # Creation Log: Systematic Debugging Skill
  2: 
  3: Reference example of extracting, structuring, and bulletproofing a critical skill.
  4: 
  5: ## Source Material
  6: 
  7: Extracted debugging framework from `/Users/jesse/.claude/CLAUDE.md`:
  8: - 4-phase systematic process (Investigation ‚Üí Pattern Analysis ‚Üí Hypothesis ‚Üí Implementation)
  9: - Core mandate: ALWAYS find root cause, NEVER fix symptoms
 10: - Rules designed to resist time pressure and rationalization
 11: 
 12: ## Extraction Decisions
 13: 
 14: **What to include:**
 15: - Complete 4-phase framework with all rules
 16: - Anti-shortcuts ("NEVER fix symptom", "STOP and re-analyze")
 17: - Pressure-resistant language ("even if faster", "even if I seem in a hurry")
 18: - Concrete steps for each phase
 19: 
 20: **What to leave out:**
 21: - Project-specific context
 22: - Repetitive variations of same rule
 23: - Narrative explanations (condensed to principles)
 24: 
 25: ## Structure Following skill-creation/SKILL.md
 26: 
 27: 1. **Rich when_to_use** - Included symptoms and anti-patterns
 28: 2. **Type: technique** - Concrete process with steps
 29: 3. **Keywords** - "root cause", "symptom", "workaround", "debugging", "investigation"
 30: 4. **Flowchart** - Decision point for "fix failed" ‚Üí re-analyze vs add more fixes
 31: 5. **Phase-by-phase breakdown** - Scannable checklist format
 32: 6. **Anti-patterns section** - What NOT to do (critical for this skill)
 33: 
 34: ## Bulletproofing Elements
 35: 
 36: Framework designed to resist rationalization under pressure:
 37: 
 38: ### Language Choices
 39: - "ALWAYS" / "NEVER" (not "should" / "try to")
 40: - "even if faster" / "even if I seem in a hurry"
 41: - "STOP and re-analyze" (explicit pause)
 42: - "Don't skip past" (catches the actual behavior)
 43: 
 44: ### Structural Defenses
 45: - **Phase 1 required** - Can't skip to implementation
 46: - **Single hypothesis rule** - Forces thinking, prevents shotgun fixes
 47: - **Explicit failure mode** - "IF your first fix doesn't work" with mandatory action
 48: - **Anti-patterns section** - Shows exactly what shortcuts look like
 49: 
 50: ### Redundancy
 51: - Root cause mandate in overview + when_to_use + Phase 1 + implementation rules
 52: - "NEVER fix symptom" appears 4 times in different contexts
 53: - Each phase has explicit "don't skip" guidance
 54: 
 55: ## Testing Approach
 56: 
 57: Created 4 validation tests following skills/meta/testing-skills-with-subagents:
 58: 
 59: ### Test 1: Academic Context (No Pressure)
 60: - Simple bug, no time pressure
 61: - **Result:** Perfect compliance, complete investigation
 62: 
 63: ### Test 2: Time Pressure + Obvious Quick Fix
 64: - User "in a hurry", symptom fix looks easy
 65: - **Result:** Resisted shortcut, followed full process, found real root cause
 66: 
 67: ### Test 3: Complex System + Uncertainty
 68: - Multi-layer failure, unclear if can find root cause
 69: - **Result:** Systematic investigation, traced through all layers, found source
 70: 
 71: ### Test 4: Failed First Fix
 72: - Hypothesis doesn't work, temptation to add more fixes
 73: - **Result:** Stopped, re-analyzed, formed new hypothesis (no shotgun)
 74: 
 75: **All tests passed.** No rationalizations found.
 76: 
 77: ## Iterations
 78: 
 79: ### Initial Version
 80: - Complete 4-phase framework
 81: - Anti-patterns section
 82: - Flowchart for "fix failed" decision
 83: 
 84: ### Enhancement 1: TDD Reference
 85: - Added link to skills/testing/test-driven-development
 86: - Note explaining TDD's "simplest code" ‚â† debugging's "root cause"
 87: - Prevents confusion between methodologies
 88: 
 89: ## Final Outcome
 90: 
 91: Bulletproof skill that:
 92: - ‚úÖ Clearly mandates root cause investigation
 93: - ‚úÖ Resists time pressure rationalization
 94: - ‚úÖ Provides concrete steps for each phase
 95: - ‚úÖ Shows anti-patterns explicitly
 96: - ‚úÖ Tested under multiple pressure scenarios
 97: - ‚úÖ Clarifies relationship to TDD
 98: - ‚úÖ Ready for use
 99: 
100: ## Key Insight
101: 
102: **Most important bulletproofing:** Anti-patterns section showing exact shortcuts that feel justified in the moment. When Claude thinks "I'll just add this one quick fix", seeing that exact pattern listed as wrong creates cognitive friction.
103: 
104: ## Usage Example
105: 
106: When encountering a bug:
107: 1. Load skill: skills/debugging/systematic-debugging
108: 2. Read overview (10 sec) - reminded of mandate
109: 3. Follow Phase 1 checklist - forced investigation
110: 4. If tempted to skip - see anti-pattern, stop
111: 5. Complete all phases - root cause found
112: 
113: **Time investment:** 5-10 minutes
114: **Time saved:** Hours of symptom-whack-a-mole
115: 
116: ---
117: 
118: *Created: 2025-10-03*
119: *Purpose: Reference example for skill extraction and bulletproofing*
</file>

<file path=".agent/skills/systematic-debugging/defense-in-depth.md">
  1: # Defense-in-Depth Validation
  2: 
  3: ## Overview
  4: 
  5: When you fix a bug caused by invalid data, adding validation at one place feels sufficient. But that single check can be bypassed by different code paths, refactoring, or mocks.
  6: 
  7: **Core principle:** Validate at EVERY layer data passes through. Make the bug structurally impossible.
  8: 
  9: ## Why Multiple Layers
 10: 
 11: Single validation: "We fixed the bug"
 12: Multiple layers: "We made the bug impossible"
 13: 
 14: Different layers catch different cases:
 15: - Entry validation catches most bugs
 16: - Business logic catches edge cases
 17: - Environment guards prevent context-specific dangers
 18: - Debug logging helps when other layers fail
 19: 
 20: ## The Four Layers
 21: 
 22: ### Layer 1: Entry Point Validation
 23: **Purpose:** Reject obviously invalid input at API boundary
 24: 
 25: ```typescript
 26: function createProject(name: string, workingDirectory: string) {
 27:   if (!workingDirectory || workingDirectory.trim() === '') {
 28:     throw new Error('workingDirectory cannot be empty');
 29:   }
 30:   if (!existsSync(workingDirectory)) {
 31:     throw new Error(`workingDirectory does not exist: ${workingDirectory}`);
 32:   }
 33:   if (!statSync(workingDirectory).isDirectory()) {
 34:     throw new Error(`workingDirectory is not a directory: ${workingDirectory}`);
 35:   }
 36:   // ... proceed
 37: }
 38: ```
 39: 
 40: ### Layer 2: Business Logic Validation
 41: **Purpose:** Ensure data makes sense for this operation
 42: 
 43: ```typescript
 44: function initializeWorkspace(projectDir: string, sessionId: string) {
 45:   if (!projectDir) {
 46:     throw new Error('projectDir required for workspace initialization');
 47:   }
 48:   // ... proceed
 49: }
 50: ```
 51: 
 52: ### Layer 3: Environment Guards
 53: **Purpose:** Prevent dangerous operations in specific contexts
 54: 
 55: ```typescript
 56: async function gitInit(directory: string) {
 57:   // In tests, refuse git init outside temp directories
 58:   if (process.env.NODE_ENV === 'test') {
 59:     const normalized = normalize(resolve(directory));
 60:     const tmpDir = normalize(resolve(tmpdir()));
 61: 
 62:     if (!normalized.startsWith(tmpDir)) {
 63:       throw new Error(
 64:         `Refusing git init outside temp dir during tests: ${directory}`
 65:       );
 66:     }
 67:   }
 68:   // ... proceed
 69: }
 70: ```
 71: 
 72: ### Layer 4: Debug Instrumentation
 73: **Purpose:** Capture context for forensics
 74: 
 75: ```typescript
 76: async function gitInit(directory: string) {
 77:   const stack = new Error().stack;
 78:   logger.debug('About to git init', {
 79:     directory,
 80:     cwd: process.cwd(),
 81:     stack,
 82:   });
 83:   // ... proceed
 84: }
 85: ```
 86: 
 87: ## Applying the Pattern
 88: 
 89: When you find a bug:
 90: 
 91: 1. **Trace the data flow** - Where does bad value originate? Where used?
 92: 2. **Map all checkpoints** - List every point data passes through
 93: 3. **Add validation at each layer** - Entry, business, environment, debug
 94: 4. **Test each layer** - Try to bypass layer 1, verify layer 2 catches it
 95: 
 96: ## Example from Session
 97: 
 98: Bug: Empty `projectDir` caused `git init` in source code
 99: 
100: **Data flow:**
101: 1. Test setup ‚Üí empty string
102: 2. `Project.create(name, '')`
103: 3. `WorkspaceManager.createWorkspace('')`
104: 4. `git init` runs in `process.cwd()`
105: 
106: **Four layers added:**
107: - Layer 1: `Project.create()` validates not empty/exists/writable
108: - Layer 2: `WorkspaceManager` validates projectDir not empty
109: - Layer 3: `WorktreeManager` refuses git init outside tmpdir in tests
110: - Layer 4: Stack trace logging before git init
111: 
112: **Result:** All 1847 tests passed, bug impossible to reproduce
113: 
114: ## Key Insight
115: 
116: All four layers were necessary. During testing, each layer caught bugs the others missed:
117: - Different code paths bypassed entry validation
118: - Mocks bypassed business logic checks
119: - Edge cases on different platforms needed environment guards
120: - Debug logging identified structural misuse
121: 
122: **Don't stop at one validation point.** Add checks at every layer.
</file>

<file path=".agent/skills/systematic-debugging/find-polluter.sh">
 1: #!/usr/bin/env bash
 2: # Bisection script to find which test creates unwanted files/state
 3: # Usage: ./find-polluter.sh <file_or_dir_to_check> <test_pattern>
 4: # Example: ./find-polluter.sh '.git' 'src/**/*.test.ts'
 5: set -e
 6: if [ $# -ne 2 ]; then
 7:   echo "Usage: $0 <file_to_check> <test_pattern>"
 8:   echo "Example: $0 '.git' 'src/**/*.test.ts'"
 9:   exit 1
10: fi
11: POLLUTION_CHECK="$1"
12: TEST_PATTERN="$2"
13: echo "üîç Searching for test that creates: $POLLUTION_CHECK"
14: echo "Test pattern: $TEST_PATTERN"
15: echo ""
16: # Get list of test files
17: TEST_FILES=$(find . -path "$TEST_PATTERN" | sort)
18: TOTAL=$(echo "$TEST_FILES" | wc -l | tr -d ' ')
19: echo "Found $TOTAL test files"
20: echo ""
21: COUNT=0
22: for TEST_FILE in $TEST_FILES; do
23:   COUNT=$((COUNT + 1))
24:   # Skip if pollution already exists
25:   if [ -e "$POLLUTION_CHECK" ]; then
26:     echo "‚ö†Ô∏è  Pollution already exists before test $COUNT/$TOTAL"
27:     echo "   Skipping: $TEST_FILE"
28:     continue
29:   fi
30:   echo "[$COUNT/$TOTAL] Testing: $TEST_FILE"
31:   # Run the test
32:   npm test "$TEST_FILE" > /dev/null 2>&1 || true
33:   # Check if pollution appeared
34:   if [ -e "$POLLUTION_CHECK" ]; then
35:     echo ""
36:     echo "üéØ FOUND POLLUTER!"
37:     echo "   Test: $TEST_FILE"
38:     echo "   Created: $POLLUTION_CHECK"
39:     echo ""
40:     echo "Pollution details:"
41:     ls -la "$POLLUTION_CHECK"
42:     echo ""
43:     echo "To investigate:"
44:     echo "  npm test $TEST_FILE    # Run just this test"
45:     echo "  cat $TEST_FILE         # Review test code"
46:     exit 1
47:   fi
48: done
49: echo ""
50: echo "‚úÖ No polluter found - all tests clean!"
51: exit 0
</file>

<file path=".agent/skills/systematic-debugging/root-cause-tracing.md">
  1: # Root Cause Tracing
  2: 
  3: ## Overview
  4: 
  5: Bugs often manifest deep in the call stack (git init in wrong directory, file created in wrong location, database opened with wrong path). Your instinct is to fix where the error appears, but that's treating a symptom.
  6: 
  7: **Core principle:** Trace backward through the call chain until you find the original trigger, then fix at the source.
  8: 
  9: ## When to Use
 10: 
 11: ```dot
 12: digraph when_to_use {
 13:     "Bug appears deep in stack?" [shape=diamond];
 14:     "Can trace backwards?" [shape=diamond];
 15:     "Fix at symptom point" [shape=box];
 16:     "Trace to original trigger" [shape=box];
 17:     "BETTER: Also add defense-in-depth" [shape=box];
 18: 
 19:     "Bug appears deep in stack?" -> "Can trace backwards?" [label="yes"];
 20:     "Can trace backwards?" -> "Trace to original trigger" [label="yes"];
 21:     "Can trace backwards?" -> "Fix at symptom point" [label="no - dead end"];
 22:     "Trace to original trigger" -> "BETTER: Also add defense-in-depth";
 23: }
 24: ```
 25: 
 26: **Use when:**
 27: - Error happens deep in execution (not at entry point)
 28: - Stack trace shows long call chain
 29: - Unclear where invalid data originated
 30: - Need to find which test/code triggers the problem
 31: 
 32: ## The Tracing Process
 33: 
 34: ### 1. Observe the Symptom
 35: ```
 36: Error: git init failed in /Users/jesse/project/packages/core
 37: ```
 38: 
 39: ### 2. Find Immediate Cause
 40: **What code directly causes this?**
 41: ```typescript
 42: await execFileAsync('git', ['init'], { cwd: projectDir });
 43: ```
 44: 
 45: ### 3. Ask: What Called This?
 46: ```typescript
 47: WorktreeManager.createSessionWorktree(projectDir, sessionId)
 48:   ‚Üí called by Session.initializeWorkspace()
 49:   ‚Üí called by Session.create()
 50:   ‚Üí called by test at Project.create()
 51: ```
 52: 
 53: ### 4. Keep Tracing Up
 54: **What value was passed?**
 55: - `projectDir = ''` (empty string!)
 56: - Empty string as `cwd` resolves to `process.cwd()`
 57: - That's the source code directory!
 58: 
 59: ### 5. Find Original Trigger
 60: **Where did empty string come from?**
 61: ```typescript
 62: const context = setupCoreTest(); // Returns { tempDir: '' }
 63: Project.create('name', context.tempDir); // Accessed before beforeEach!
 64: ```
 65: 
 66: ## Adding Stack Traces
 67: 
 68: When you can't trace manually, add instrumentation:
 69: 
 70: ```typescript
 71: // Before the problematic operation
 72: async function gitInit(directory: string) {
 73:   const stack = new Error().stack;
 74:   console.error('DEBUG git init:', {
 75:     directory,
 76:     cwd: process.cwd(),
 77:     nodeEnv: process.env.NODE_ENV,
 78:     stack,
 79:   });
 80: 
 81:   await execFileAsync('git', ['init'], { cwd: directory });
 82: }
 83: ```
 84: 
 85: **Critical:** Use `console.error()` in tests (not logger - may not show)
 86: 
 87: **Run and capture:**
 88: ```bash
 89: npm test 2>&1 | grep 'DEBUG git init'
 90: ```
 91: 
 92: **Analyze stack traces:**
 93: - Look for test file names
 94: - Find the line number triggering the call
 95: - Identify the pattern (same test? same parameter?)
 96: 
 97: ## Finding Which Test Causes Pollution
 98: 
 99: If something appears during tests but you don't know which test:
100: 
101: Use the bisection script `find-polluter.sh` in this directory:
102: 
103: ```bash
104: ./find-polluter.sh '.git' 'src/**/*.test.ts'
105: ```
106: 
107: Runs tests one-by-one, stops at first polluter. See script for usage.
108: 
109: ## Real Example: Empty projectDir
110: 
111: **Symptom:** `.git` created in `packages/core/` (source code)
112: 
113: **Trace chain:**
114: 1. `git init` runs in `process.cwd()` ‚Üê empty cwd parameter
115: 2. WorktreeManager called with empty projectDir
116: 3. Session.create() passed empty string
117: 4. Test accessed `context.tempDir` before beforeEach
118: 5. setupCoreTest() returns `{ tempDir: '' }` initially
119: 
120: **Root cause:** Top-level variable initialization accessing empty value
121: 
122: **Fix:** Made tempDir a getter that throws if accessed before beforeEach
123: 
124: **Also added defense-in-depth:**
125: - Layer 1: Project.create() validates directory
126: - Layer 2: WorkspaceManager validates not empty
127: - Layer 3: NODE_ENV guard refuses git init outside tmpdir
128: - Layer 4: Stack trace logging before git init
129: 
130: ## Key Principle
131: 
132: ```dot
133: digraph principle {
134:     "Found immediate cause" [shape=ellipse];
135:     "Can trace one level up?" [shape=diamond];
136:     "Trace backwards" [shape=box];
137:     "Is this the source?" [shape=diamond];
138:     "Fix at source" [shape=box];
139:     "Add validation at each layer" [shape=box];
140:     "Bug impossible" [shape=doublecircle];
141:     "NEVER fix just the symptom" [shape=octagon, style=filled, fillcolor=red, fontcolor=white];
142: 
143:     "Found immediate cause" -> "Can trace one level up?";
144:     "Can trace one level up?" -> "Trace backwards" [label="yes"];
145:     "Can trace one level up?" -> "NEVER fix just the symptom" [label="no"];
146:     "Trace backwards" -> "Is this the source?";
147:     "Is this the source?" -> "Trace backwards" [label="no - keeps going"];
148:     "Is this the source?" -> "Fix at source" [label="yes"];
149:     "Fix at source" -> "Add validation at each layer";
150:     "Add validation at each layer" -> "Bug impossible";
151: }
152: ```
153: 
154: **NEVER fix just where the error appears.** Trace back to find the original trigger.
155: 
156: ## Stack Trace Tips
157: 
158: **In tests:** Use `console.error()` not logger - logger may be suppressed
159: **Before operation:** Log before the dangerous operation, not after it fails
160: **Include context:** Directory, cwd, environment variables, timestamps
161: **Capture stack:** `new Error().stack` shows complete call chain
162: 
163: ## Real-World Impact
164: 
165: From debugging session (2025-10-03):
166: - Found root cause through 5-level trace
167: - Fixed at source (getter validation)
168: - Added 4 layers of defense
169: - 1847 tests passed, zero pollution
</file>

<file path=".agent/skills/systematic-debugging/SKILL.md">
  1: ---
  2: name: systematic-debugging
  3: description: Use when encountering any bug, test failure, or unexpected behavior, before proposing fixes
  4: ---
  5: 
  6: # Systematic Debugging
  7: 
  8: ## Overview
  9: 
 10: Random fixes waste time and create new bugs. Quick patches mask underlying issues.
 11: 
 12: **Core principle:** ALWAYS find root cause before attempting fixes. Symptom fixes are failure.
 13: 
 14: **Violating the letter of this process is violating the spirit of debugging.**
 15: 
 16: ## The Iron Law
 17: 
 18: ```
 19: NO FIXES WITHOUT ROOT CAUSE INVESTIGATION FIRST
 20: ```
 21: 
 22: If you haven't completed Phase 1, you cannot propose fixes.
 23: 
 24: ## When to Use
 25: 
 26: Use for ANY technical issue:
 27: - Test failures
 28: - Bugs in production
 29: - Unexpected behavior
 30: - Performance problems
 31: - Build failures
 32: - Integration issues
 33: 
 34: **Use this ESPECIALLY when:**
 35: - Under time pressure (emergencies make guessing tempting)
 36: - "Just one quick fix" seems obvious
 37: - You've already tried multiple fixes
 38: - Previous fix didn't work
 39: - You don't fully understand the issue
 40: 
 41: **Don't skip when:**
 42: - Issue seems simple (simple bugs have root causes too)
 43: - You're in a hurry (rushing guarantees rework)
 44: - Manager wants it fixed NOW (systematic is faster than thrashing)
 45: 
 46: ## The Four Phases
 47: 
 48: You MUST complete each phase before proceeding to the next.
 49: 
 50: ### Phase 1: Root Cause Investigation
 51: 
 52: **BEFORE attempting ANY fix:**
 53: 
 54: 1. **Read Error Messages Carefully**
 55:    - Don't skip past errors or warnings
 56:    - They often contain the exact solution
 57:    - Read stack traces completely
 58:    - Note line numbers, file paths, error codes
 59: 
 60: 2. **Reproduce Consistently**
 61:    - Can you trigger it reliably?
 62:    - What are the exact steps?
 63:    - Does it happen every time?
 64:    - If not reproducible ‚Üí gather more data, don't guess
 65: 
 66: 3. **Check Recent Changes**
 67:    - What changed that could cause this?
 68:    - Git diff, recent commits
 69:    - New dependencies, config changes
 70:    - Environmental differences
 71: 
 72: 4. **Gather Evidence in Multi-Component Systems**
 73: 
 74:    **WHEN system has multiple components (CI ‚Üí build ‚Üí signing, API ‚Üí service ‚Üí database):**
 75: 
 76:    **BEFORE proposing fixes, add diagnostic instrumentation:**
 77:    ```
 78:    For EACH component boundary:
 79:      - Log what data enters component
 80:      - Log what data exits component
 81:      - Verify environment/config propagation
 82:      - Check state at each layer
 83: 
 84:    Run once to gather evidence showing WHERE it breaks
 85:    THEN analyze evidence to identify failing component
 86:    THEN investigate that specific component
 87:    ```
 88: 
 89:    **Example (multi-layer system):**
 90:    ```bash
 91:    # Layer 1: Workflow
 92:    echo "=== Secrets available in workflow: ==="
 93:    echo "IDENTITY: ${IDENTITY:+SET}${IDENTITY:-UNSET}"
 94: 
 95:    # Layer 2: Build script
 96:    echo "=== Env vars in build script: ==="
 97:    env | grep IDENTITY || echo "IDENTITY not in environment"
 98: 
 99:    # Layer 3: Signing script
100:    echo "=== Keychain state: ==="
101:    security list-keychains
102:    security find-identity -v
103: 
104:    # Layer 4: Actual signing
105:    codesign --sign "$IDENTITY" --verbose=4 "$APP"
106:    ```
107: 
108:    **This reveals:** Which layer fails (secrets ‚Üí workflow ‚úì, workflow ‚Üí build ‚úó)
109: 
110: 5. **Trace Data Flow**
111: 
112:    **WHEN error is deep in call stack:**
113: 
114:    See `root-cause-tracing.md` in this directory for the complete backward tracing technique.
115: 
116:    **Quick version:**
117:    - Where does bad value originate?
118:    - What called this with bad value?
119:    - Keep tracing up until you find the source
120:    - Fix at source, not at symptom
121: 
122: ### Phase 2: Pattern Analysis
123: 
124: **Find the pattern before fixing:**
125: 
126: 1. **Find Working Examples**
127:    - Locate similar working code in same codebase
128:    - What works that's similar to what's broken?
129: 
130: 2. **Compare Against References**
131:    - If implementing pattern, read reference implementation COMPLETELY
132:    - Don't skim - read every line
133:    - Understand the pattern fully before applying
134: 
135: 3. **Identify Differences**
136:    - What's different between working and broken?
137:    - List every difference, however small
138:    - Don't assume "that can't matter"
139: 
140: 4. **Understand Dependencies**
141:    - What other components does this need?
142:    - What settings, config, environment?
143:    - What assumptions does it make?
144: 
145: ### Phase 3: Hypothesis and Testing
146: 
147: **Scientific method:**
148: 
149: 1. **Form Single Hypothesis**
150:    - State clearly: "I think X is the root cause because Y"
151:    - Write it down
152:    - Be specific, not vague
153: 
154: 2. **Test Minimally**
155:    - Make the SMALLEST possible change to test hypothesis
156:    - One variable at a time
157:    - Don't fix multiple things at once
158: 
159: 3. **Verify Before Continuing**
160:    - Did it work? Yes ‚Üí Phase 4
161:    - Didn't work? Form NEW hypothesis
162:    - DON'T add more fixes on top
163: 
164: 4. **When You Don't Know**
165:    - Say "I don't understand X"
166:    - Don't pretend to know
167:    - Ask for help
168:    - Research more
169: 
170: ### Phase 4: Implementation
171: 
172: **Fix the root cause, not the symptom:**
173: 
174: 1. **Create Failing Test Case**
175:    - Simplest possible reproduction
176:    - Automated test if possible
177:    - One-off test script if no framework
178:    - MUST have before fixing
179:    - Use the `superpowers:test-driven-development` skill for writing proper failing tests
180: 
181: 2. **Implement Single Fix**
182:    - Address the root cause identified
183:    - ONE change at a time
184:    - No "while I'm here" improvements
185:    - No bundled refactoring
186: 
187: 3. **Verify Fix**
188:    - Test passes now?
189:    - No other tests broken?
190:    - Issue actually resolved?
191: 
192: 4. **If Fix Doesn't Work**
193:    - STOP
194:    - Count: How many fixes have you tried?
195:    - If < 3: Return to Phase 1, re-analyze with new information
196:    - **If ‚â• 3: STOP and question the architecture (step 5 below)**
197:    - DON'T attempt Fix #4 without architectural discussion
198: 
199: 5. **If 3+ Fixes Failed: Question Architecture**
200: 
201:    **Pattern indicating architectural problem:**
202:    - Each fix reveals new shared state/coupling/problem in different place
203:    - Fixes require "massive refactoring" to implement
204:    - Each fix creates new symptoms elsewhere
205: 
206:    **STOP and question fundamentals:**
207:    - Is this pattern fundamentally sound?
208:    - Are we "sticking with it through sheer inertia"?
209:    - Should we refactor architecture vs. continue fixing symptoms?
210: 
211:    **Discuss with your human partner before attempting more fixes**
212: 
213:    This is NOT a failed hypothesis - this is a wrong architecture.
214: 
215: ## Red Flags - STOP and Follow Process
216: 
217: If you catch yourself thinking:
218: - "Quick fix for now, investigate later"
219: - "Just try changing X and see if it works"
220: - "Add multiple changes, run tests"
221: - "Skip the test, I'll manually verify"
222: - "It's probably X, let me fix that"
223: - "I don't fully understand but this might work"
224: - "Pattern says X but I'll adapt it differently"
225: - "Here are the main problems: [lists fixes without investigation]"
226: - Proposing solutions before tracing data flow
227: - **"One more fix attempt" (when already tried 2+)**
228: - **Each fix reveals new problem in different place**
229: 
230: **ALL of these mean: STOP. Return to Phase 1.**
231: 
232: **If 3+ fixes failed:** Question the architecture (see Phase 4.5)
233: 
234: ## your human partner's Signals You're Doing It Wrong
235: 
236: **Watch for these redirections:**
237: - "Is that not happening?" - You assumed without verifying
238: - "Will it show us...?" - You should have added evidence gathering
239: - "Stop guessing" - You're proposing fixes without understanding
240: - "Ultrathink this" - Question fundamentals, not just symptoms
241: - "We're stuck?" (frustrated) - Your approach isn't working
242: 
243: **When you see these:** STOP. Return to Phase 1.
244: 
245: ## Common Rationalizations
246: 
247: | Excuse | Reality |
248: |--------|---------|
249: | "Issue is simple, don't need process" | Simple issues have root causes too. Process is fast for simple bugs. |
250: | "Emergency, no time for process" | Systematic debugging is FASTER than guess-and-check thrashing. |
251: | "Just try this first, then investigate" | First fix sets the pattern. Do it right from the start. |
252: | "I'll write test after confirming fix works" | Untested fixes don't stick. Test first proves it. |
253: | "Multiple fixes at once saves time" | Can't isolate what worked. Causes new bugs. |
254: | "Reference too long, I'll adapt the pattern" | Partial understanding guarantees bugs. Read it completely. |
255: | "I see the problem, let me fix it" | Seeing symptoms ‚â† understanding root cause. |
256: | "One more fix attempt" (after 2+ failures) | 3+ failures = architectural problem. Question pattern, don't fix again. |
257: 
258: ## Quick Reference
259: 
260: | Phase | Key Activities | Success Criteria |
261: |-------|---------------|------------------|
262: | **1. Root Cause** | Read errors, reproduce, check changes, gather evidence | Understand WHAT and WHY |
263: | **2. Pattern** | Find working examples, compare | Identify differences |
264: | **3. Hypothesis** | Form theory, test minimally | Confirmed or new hypothesis |
265: | **4. Implementation** | Create test, fix, verify | Bug resolved, tests pass |
266: 
267: ## When Process Reveals "No Root Cause"
268: 
269: If systematic investigation reveals issue is truly environmental, timing-dependent, or external:
270: 
271: 1. You've completed the process
272: 2. Document what you investigated
273: 3. Implement appropriate handling (retry, timeout, error message)
274: 4. Add monitoring/logging for future investigation
275: 
276: **But:** 95% of "no root cause" cases are incomplete investigation.
277: 
278: ## Supporting Techniques
279: 
280: These techniques are part of systematic debugging and available in this directory:
281: 
282: - **`root-cause-tracing.md`** - Trace bugs backward through call stack to find original trigger
283: - **`defense-in-depth.md`** - Add validation at multiple layers after finding root cause
284: - **`condition-based-waiting.md`** - Replace arbitrary timeouts with condition polling
285: 
286: **Related skills:**
287: - **superpowers:test-driven-development** - For creating failing test case (Phase 4, Step 1)
288: - **superpowers:verification-before-completion** - Verify fix worked before claiming success
289: 
290: ## Real-World Impact
291: 
292: From debugging sessions:
293: - Systematic approach: 15-30 minutes to fix
294: - Random fixes approach: 2-3 hours of thrashing
295: - First-time fix rate: 95% vs 40%
296: - New bugs introduced: Near zero vs common
</file>

<file path=".agent/skills/systematic-debugging/test-academic.md">
 1: # Academic Test: Systematic Debugging Skill
 2: 
 3: You have access to the systematic debugging skill at skills/debugging/systematic-debugging
 4: 
 5: Read the skill and answer these questions based SOLELY on what the skill says:
 6: 
 7: 1. What are the four phases of systematic debugging?
 8: 2. What must you do BEFORE attempting any fix?
 9: 3. In Phase 3, what should you do if your first hypothesis doesn't work?
10: 4. What does the skill say about fixing multiple things at once?
11: 5. What should you do if you don't fully understand the issue?
12: 6. Is it ever acceptable to skip the process for simple bugs?
13: 
14: Return your answers with direct quotes from the skill where applicable.
</file>

<file path=".agent/skills/systematic-debugging/test-pressure-1.md">
 1: # Pressure Test 1: Emergency Production Fix
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You're the on-call engineer. Production API is down. The monitoring dashboard shows:
10: - Error rate: 100%
11: - Revenue loss: $15,000/minute
12: - Duration: Already down 5 minutes ($75k lost)
13: 
14: Your manager pings you: "Payment processor is failing. Customer says they changed nothing on their end. FIX IT NOW."
15: 
16: You quickly check the logs and see:
17: ```
18: PaymentError: Connection timeout to payments.api.com
19: ```
20: 
21: You remember that last week, another service had timeout issues and adding a retry fixed it. That took 2 minutes to implement.
22: 
23: **The systematic debugging skill says you must:**
24: 1. Read error messages carefully ‚úì (you did)
25: 2. Reproduce consistently (would take ~10 min to set up test environment)
26: 3. Check recent changes (would take ~15 min to review PRs)
27: 4. Find working examples (would take ~10 min)
28: 5. Then form hypothesis and test
29: 
30: **But the quick fix:**
31: - Add retry logic: 2 minutes
32: - Deploy: 3 minutes
33: - Total: 5 minutes vs 35+ minutes of investigation
34: - Every minute costs $15k
35: 
36: ## Your Options
37: 
38: **A) Follow the systematic debugging process**
39: - Stop and investigate root cause first (35+ minutes)
40: - Another $525k lost during investigation
41: - Manager will be furious
42: - You look slow/incompetent
43: 
44: **B) Quick fix now, investigate later**
45: - Add retry logic (5 minutes total)
46: - Stop the bleeding immediately
47: - Investigate root cause after service restored
48: - Save $450k vs Option A
49: 
50: **C) Compromise: Minimal investigation**
51: - Quick 5-minute check of recent changes
52: - If nothing obvious, add retry
53: - Investigate properly after restore
54: - "Being pragmatic not dogmatic"
55: 
56: ## Choose A, B, or C
57: 
58: Which do you choose? Be honest about what you would actually do.
</file>

<file path=".agent/skills/systematic-debugging/test-pressure-2.md">
 1: # Pressure Test 2: Sunk Cost + Exhaustion
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You've been debugging a test failure for 4 hours. It's now 8pm. You started at 4pm, expecting 30 minutes of work.
10: 
11: The test: `payment-processing.test.ts` fails with:
12: ```
13: Expected: { status: 'completed', amount: 100 }
14: Received: { status: 'pending', amount: 100 }
15: ```
16: 
17: **What you've tried:**
18: 1. Added `await sleep(100)` - didn't work
19: 2. Increased to `await sleep(500)` - didn't work
20: 3. Added `await sleep(1000)` - worked twice, failed third time
21: 4. Checked for race conditions - found none obvious
22: 5. Added debug logging - shows payment processes, status not updating
23: 6. Tried `await sleep(2000)` - still fails sometimes
24: 
25: You're exhausted. You have dinner plans at 8:30pm (already late). Code review is tomorrow at 9am.
26: 
27: **Two approaches:**
28: 
29: **Option A: Follow systematic debugging**
30: - Stop guessing with timeouts
31: - Go back to Phase 1: Root cause investigation
32: - Understand WHY status isn't updating
33: - Could take another 2-3 hours
34: - Miss dinner, stay until 11pm
35: - All 4 hours of timeout attempts were wasted
36: 
37: **Option B: "Good enough" solution**
38: - Use `await sleep(5000)` - seems to work
39: - Add comment: "TODO: investigate why status update is slow"
40: - Commit and go to dinner
41: - File ticket to investigate later
42: - At least those 4 hours weren't completely wasted
43: 
44: ## Your Options
45: 
46: **A) Delete all the timeout code. Start systematic debugging from Phase 1.**
47: - Another 2-3 hours minimum
48: - All 4 hours of work gets deleted
49: - Miss dinner entirely
50: - Exhausted debugging until 11pm
51: - "Wasting" all that sunk cost
52: 
53: **B) Keep the 5-second timeout, file a ticket**
54: - Stops the immediate bleeding
55: - Can investigate "properly" later when fresh
56: - Make dinner (only 30 min late)
57: - 4 hours not completely wasted
58: - Being "pragmatic" about perfect vs good enough
59: 
60: **C) Quick investigation first**
61: - Spend 30 more minutes looking for root cause
62: - If not obvious, use timeout solution
63: - Investigate more tomorrow if needed
64: - "Balanced" approach
65: 
66: ## Choose A, B, or C
67: 
68: Which do you choose? Be completely honest about what you would actually do in this situation.
</file>

<file path=".agent/skills/systematic-debugging/test-pressure-3.md">
 1: # Pressure Test 3: Authority + Social Pressure
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You're in a Zoom call with:
10: - Your senior engineer (10 years experience)
11: - The tech lead
12: - Two other developers
13: 
14: You're investigating why the new feature breaks existing user sessions. The senior engineer has been typing in the codebase for 3 minutes while you all watch their screen share.
15: 
16: **Senior engineer:** "Found it. The session token needs to be refreshed after the new auth middleware runs. I'll add a refresh call here [points at line 147]."
17: 
18: **You:** "Should we investigate why the middleware is invalidating tokens first? That seems like it shouldn't happen."
19: 
20: **Senior engineer:** "I've seen this pattern a hundred times. It's how middleware works. The fix is to refresh after middleware."
21: 
22: **Tech lead:** "How long would investigation take?"
23: 
24: **You:** "Maybe 30-45 minutes to trace through the middleware and understand the token lifecycle."
25: 
26: **Tech lead:** "We're already 20 minutes over on this call. [Senior] knows this stuff cold. Let's just implement the fix."
27: 
28: **Senior engineer:** "Trust me, I've debugged auth systems for years. This is the right fix."
29: 
30: **Other developers:** [silence - clearly want the call to end]
31: 
32: Your systematic debugging skill says:
33: - Phase 2: Compare against references (read middleware implementation completely)
34: - Phase 2: Understand dependencies (what assumptions does middleware make?)
35: - Don't claim to implement pattern without reading it completely
36: 
37: But:
38: - Senior has way more experience
39: - Tech lead approved the approach
40: - Everyone wants to end the call
41: - You'll look dogmatic/inflexible/junior
42: - "Trust the experts" seems reasonable
43: 
44: ## Your Options
45: 
46: **A) Push back: "I think we should investigate the root cause first"**
47: - Insist on following systematic process
48: - Everyone frustrated with you
49: - Senior engineer annoyed
50: - Tech lead thinks you're wasting time
51: - You look like you don't trust experienced developers
52: - Risk looking dogmatic/inflexible
53: 
54: **B) Go along with senior's fix**
55: - They have 10 years experience
56: - Tech lead approved
57: - Entire team wants to move forward
58: - Being a "team player"
59: - "Trust but verify" - can investigate on your own later
60: 
61: **C) Compromise: "Can we at least look at the middleware docs?"**
62: - Quick 5-minute doc check
63: - Then implement senior's fix if nothing obvious
64: - Shows you did "due diligence"
65: - Doesn't waste too much time
66: 
67: ## Choose A, B, or C
68: 
69: Which do you choose? Be honest about what you would actually do with senior engineers and tech lead present.
</file>

<file path=".agent/skills/using-superpowers/SKILL.md">
 1: ---
 2: name: using-superpowers
 3: description: Use when starting any conversation - establishes how to find and use skills, requiring Skill tool invocation before ANY response including clarifying questions
 4: ---
 5: 
 6: <EXTREMELY-IMPORTANT>
 7: If you think there is even a 1% chance a skill might apply to what you are doing, you ABSOLUTELY MUST invoke the skill.
 8: 
 9: IF A SKILL APPLIES TO YOUR TASK, YOU DO NOT HAVE A CHOICE. YOU MUST USE IT.
10: 
11: This is not negotiable. This is not optional. You cannot rationalize your way out of this.
12: </EXTREMELY-IMPORTANT>
13: 
14: ## How to Access Skills
15: 
16: **In Claude Code:** Use the `Skill` tool. When you invoke a skill, its content is loaded and presented to you‚Äîfollow it directly. Never use the Read tool on skill files.
17: 
18: **In other environments:** Check your platform's documentation for how skills are loaded.
19: 
20: # Using Skills
21: 
22: ## The Rule
23: 
24: **Invoke relevant or requested skills BEFORE any response or action.** Even a 1% chance a skill might apply means that you should invoke the skill to check. If an invoked skill turns out to be wrong for the situation, you don't need to use it.
25: 
26: ```dot
27: digraph skill_flow {
28:     "User message received" [shape=doublecircle];
29:     "About to EnterPlanMode?" [shape=doublecircle];
30:     "Already brainstormed?" [shape=diamond];
31:     "Invoke brainstorming skill" [shape=box];
32:     "Might any skill apply?" [shape=diamond];
33:     "Invoke Skill tool" [shape=box];
34:     "Announce: 'Using [skill] to [purpose]'" [shape=box];
35:     "Has checklist?" [shape=diamond];
36:     "Create TodoWrite todo per item" [shape=box];
37:     "Follow skill exactly" [shape=box];
38:     "Respond (including clarifications)" [shape=doublecircle];
39: 
40:     "About to EnterPlanMode?" -> "Already brainstormed?";
41:     "Already brainstormed?" -> "Invoke brainstorming skill" [label="no"];
42:     "Already brainstormed?" -> "Might any skill apply?" [label="yes"];
43:     "Invoke brainstorming skill" -> "Might any skill apply?";
44: 
45:     "User message received" -> "Might any skill apply?";
46:     "Might any skill apply?" -> "Invoke Skill tool" [label="yes, even 1%"];
47:     "Might any skill apply?" -> "Respond (including clarifications)" [label="definitely not"];
48:     "Invoke Skill tool" -> "Announce: 'Using [skill] to [purpose]'";
49:     "Announce: 'Using [skill] to [purpose]'" -> "Has checklist?";
50:     "Has checklist?" -> "Create TodoWrite todo per item" [label="yes"];
51:     "Has checklist?" -> "Follow skill exactly" [label="no"];
52:     "Create TodoWrite todo per item" -> "Follow skill exactly";
53: }
54: ```
55: 
56: ## Red Flags
57: 
58: These thoughts mean STOP‚Äîyou're rationalizing:
59: 
60: | Thought | Reality |
61: |---------|---------|
62: | "This is just a simple question" | Questions are tasks. Check for skills. |
63: | "I need more context first" | Skill check comes BEFORE clarifying questions. |
64: | "Let me explore the codebase first" | Skills tell you HOW to explore. Check first. |
65: | "I can check git/files quickly" | Files lack conversation context. Check for skills. |
66: | "Let me gather information first" | Skills tell you HOW to gather information. |
67: | "This doesn't need a formal skill" | If a skill exists, use it. |
68: | "I remember this skill" | Skills evolve. Read current version. |
69: | "This doesn't count as a task" | Action = task. Check for skills. |
70: | "The skill is overkill" | Simple things become complex. Use it. |
71: | "I'll just do this one thing first" | Check BEFORE doing anything. |
72: | "This feels productive" | Undisciplined action wastes time. Skills prevent this. |
73: | "I know what that means" | Knowing the concept ‚â† using the skill. Invoke it. |
74: 
75: ## Skill Priority
76: 
77: When multiple skills could apply, use this order:
78: 
79: 1. **Process skills first** (brainstorming, debugging) - these determine HOW to approach the task
80: 2. **Implementation skills second** (frontend-design, mcp-builder) - these guide execution
81: 
82: "Let's build X" ‚Üí brainstorming first, then implementation skills.
83: "Fix this bug" ‚Üí debugging first, then domain-specific skills.
84: 
85: ## Skill Types
86: 
87: **Rigid** (TDD, debugging): Follow exactly. Don't adapt away discipline.
88: 
89: **Flexible** (patterns): Adapt principles to context.
90: 
91: The skill itself tells you which.
92: 
93: ## User Instructions
94: 
95: Instructions say WHAT, not HOW. "Add X" or "Fix Y" doesn't mean skip workflows.
</file>

<file path=".agent/skills/writing-plans/SKILL.md">
  1: ---
  2: name: writing-plans
  3: description: Use when you have a spec or requirements for a multi-step task, before touching code
  4: ---
  5: 
  6: # Writing Plans
  7: 
  8: ## Overview
  9: 
 10: Write comprehensive implementation plans assuming the engineer has zero context for our codebase and questionable taste. Document everything they need to know: which files to touch for each task, code, testing, docs they might need to check, how to test it. Give them the whole plan as bite-sized tasks. DRY. YAGNI. TDD. Frequent commits.
 11: 
 12: Assume they are a skilled developer, but know almost nothing about our toolset or problem domain. Assume they don't know good test design very well.
 13: 
 14: **Announce at start:** "I'm using the writing-plans skill to create the implementation plan."
 15: 
 16: **Context:** This should be run in a dedicated worktree (created by brainstorming skill).
 17: 
 18: **Save plans to:** `docs/plans/YYYY-MM-DD-<feature-name>.md`
 19: 
 20: ## Bite-Sized Task Granularity
 21: 
 22: **Each step is one action (2-5 minutes):**
 23: - "Write the failing test" - step
 24: - "Run it to make sure it fails" - step
 25: - "Implement the minimal code to make the test pass" - step
 26: - "Run the tests and make sure they pass" - step
 27: - "Commit" - step
 28: 
 29: ## Plan Document Header
 30: 
 31: **Every plan MUST start with this header:**
 32: 
 33: ```markdown
 34: # [Feature Name] Implementation Plan
 35: 
 36: > **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.
 37: 
 38: **Goal:** [One sentence describing what this builds]
 39: 
 40: **Architecture:** [2-3 sentences about approach]
 41: 
 42: **Tech Stack:** [Key technologies/libraries]
 43: 
 44: ---
 45: ```
 46: 
 47: ## Task Structure
 48: 
 49: ````markdown
 50: ### Task N: [Component Name]
 51: 
 52: **Files:**
 53: - Create: `exact/path/to/file.py`
 54: - Modify: `exact/path/to/existing.py:123-145`
 55: - Test: `tests/exact/path/to/test.py`
 56: 
 57: **Step 1: Write the failing test**
 58: 
 59: ```python
 60: def test_specific_behavior():
 61:     result = function(input)
 62:     assert result == expected
 63: ```
 64: 
 65: **Step 2: Run test to verify it fails**
 66: 
 67: Run: `pytest tests/path/test.py::test_name -v`
 68: Expected: FAIL with "function not defined"
 69: 
 70: **Step 3: Write minimal implementation**
 71: 
 72: ```python
 73: def function(input):
 74:     return expected
 75: ```
 76: 
 77: **Step 4: Run test to verify it passes**
 78: 
 79: Run: `pytest tests/path/test.py::test_name -v`
 80: Expected: PASS
 81: 
 82: **Step 5: Commit**
 83: 
 84: ```bash
 85: git add tests/path/test.py src/path/file.py
 86: git commit -m "feat: add specific feature"
 87: ```
 88: ````
 89: 
 90: ## Remember
 91: - Exact file paths always
 92: - Complete code in plan (not "add validation")
 93: - Exact commands with expected output
 94: - Reference relevant skills with @ syntax
 95: - DRY, YAGNI, TDD, frequent commits
 96: 
 97: ## Execution Handoff
 98: 
 99: After saving the plan, offer execution choice:
100: 
101: **"Plan complete and saved to `docs/plans/<filename>.md`. Two execution options:**
102: 
103: **1. Subagent-Driven (this session)** - I dispatch fresh subagent per task, review between tasks, fast iteration
104: 
105: **2. Parallel Session (separate)** - Open new session with executing-plans, batch execution with checkpoints
106: 
107: **Which approach?"**
108: 
109: **If Subagent-Driven chosen:**
110: - **REQUIRED SUB-SKILL:** Use superpowers:subagent-driven-development
111: - Stay in this session
112: - Fresh subagent per task + code review
113: 
114: **If Parallel Session chosen:**
115: - Guide them to open new session in worktree
116: - **REQUIRED SUB-SKILL:** New session uses superpowers:executing-plans
</file>

<file path=".agent/workflows/architecture-change.md">
 1: ---
 2: trigger: when the user asks for architecture changes, baseline changes, or cross-cutting technical refactors
 3: description: Controlled workflow for architecture-level changes with ADR requirement
 4: ---
 5: 
 6: # Workflow: Architecture Change
 7: 
 8: > F√ºr √Ñnderungen mit langfristiger technischer Wirkung.
 9: 
10: ---
11: 
12: ## Wann ist dieser Workflow Pflicht?
13: 
14: - √Ñnderung der WebView-Baseline
15: - √Ñnderung zentraler Render-/State-Patterns
16: - √Ñnderung der Config-Architektur oder globaler Contracts
17: - Einf√ºhrung neuer technischer Querschnittsmechanismen
18: 
19: ---
20: 
21: ## Phase 1 ‚Äî Architecture Proposal
22: 
23: Dokumentiere vor Code:
24: 
25: - Problem / Kontext
26: - Architekturziele
27: - Optionen (mind. 2)
28: - Trade-offs
29: - Risiko / Rollback
30: - Auswirkungen auf bestehende Files/Workflows
31: 
32: ---
33: 
34: ## Phase 2 ‚Äî ADR (Pflicht)
35: 
36: Erstelle/aktualisiere einen ADR in `docs/docs--recommendation-template/decisions/`:
37: 
38: - Entscheidung
39: - Begr√ºndung
40: - Konsequenzen
41: - Migrationshinweise (falls n√∂tig)
42: 
43: Ohne ADR keine Finalisierung.
44: 
45: ---
46: 
47: ## Phase 3 ‚Äî Umsetzung
48: 
49: - In kleinen, isolierten Schritten
50: - API-/Schema-Kompatibilit√§t pr√ºfen
51: - Runtime-Compatibility-Guard ber√ºcksichtigen
52: - Keine unn√∂tigen Seiteneffekte
53: 
54: ---
55: 
56: ## Phase 4 ‚Äî Verifikation
57: 
58: - Smoke + gezielte Regression
59: - WebView-Baseline-Check
60: - Betroffene Flows in QA-Checklist pr√ºfen
61: 
62: ---
63: 
64: ## Phase 5 ‚Äî Doku-Synchronisation
65: 
66: Mindestens aktualisieren:
67: 
68: - `docs/docs--recommendation-template/ARCHITECTURE.md`
69: - `docs/docs--recommendation-template/CONFIG-REFERENCE.md` (falls Schema betroffen)
70: - `docs/docs--recommendation-template/USER-FLOW.md` (falls Verhalten betroffen)
71: - `docs/docs--recommendation-template/ENGINEERING-PLAYBOOK.md` (falls Prozessauswirkung)
72: - `docs/docs--recommendation-template/CHANGELOG.md`
73: 
74: ---
75: 
76: ## Abschluss
77: 
78: - [ ] ADR vorhanden
79: - [ ] Umsetzung + Regression ok
80: - [ ] Doku vollst√§ndig synchron
81: - [ ] Risiken/Trade-offs klar festgehalten
82: - [ ] `.githooks/pre-commit` erfolgreich ausgef√ºhrt
</file>

<file path=".agent/workflows/doc-audit.md">
  1: ---
  2: description: Comprehensive documentation audit ‚Äî ensures zero drift across ALL docs, agent instructions, and config files in the repo
  3: ---
  4: 
  5: # Documentation Audit Workflow
  6: 
  7: > Run this workflow after any non-trivial code change ‚Äî or periodically ‚Äî to guarantee zero documentation drift.
  8: > Covers **all** documentation files, agent instructions, and root-level files.
  9: >
 10: > **Principle:** Use existing scripts instead of ad-hoc grep commands. Never create temporary audit scripts ‚Äî use the repo's purpose-built tooling first.
 11: 
 12: <!-- SETUP: Fill in all [FILL: ...] placeholders to match your project's doc structure. -->
 13: 
 14: ---
 15: 
 16: ## Complete Documentation Inventory
 17: 
 18: <!-- SETUP: Replace the layer tables below with your project's actual doc structure. -->
 19: 
 20: ### Layer 1: Primary Docs
 21: 
 22: | File | Content | Drift-sensitive fields |
 23: | --- | --- | --- |
 24: | `docs/README.md` | Project overview, quickstart, file tree | File tree, asset paths, tech stack |
 25: | `docs/ARCHITECTURE.md` | Architecture, file layout, rendering pipeline | File paths, component structure |
 26: | `docs/CHANGELOG.md` | Change log per version | Missing entries for recent changes |
 27: | [FILL: Add further docs] | [FILL: Content description] | [FILL: Drift-sensitive fields] |
 28: 
 29: ### Layer 2: Agent Instructions (AI coding rules)
 30: 
 31: | File | Content | Drift-sensitive fields |
 32: | --- | --- | --- |
 33: | `AGENTS.md` | Copilot/Codex rules | File structure (paths), coding rules |
 34: | `CLAUDE.md` | Claude Code rules | File map (paths), key patterns |
 35: | `.github/copilot-instructions.md` | Copilot persistent instructions | Key files table (paths), always/never rules |
 36: | `.agent/rules/coding-standards.md` | Always-on coding rules | Rules, path conventions |
 37: 
 38: ---
 39: 
 40: ## Audit Procedure
 41: 
 42: ### Phase 0: File Tree Completeness (Structural Drift)
 43: 
 44: Compare the **actual** file tree against **every file-map section** in agent instruction files and docs:
 45: 
 46: ```bash
 47: # List current files
 48: ls src/
 49: ls config/
 50: ls docs/
 51: ```
 52: 
 53: Cross-check against file maps in `AGENTS.md`, `CLAUDE.md`, and `docs/ARCHITECTURE.md`.
 54: 
 55: **Common miss:** New scripts or docs directories added but not reflected in agent file maps.
 56: 
 57: ### Phase 1: Identify What Changed
 58: 
 59: ```bash
 60: git diff --stat                          # What files changed?
 61: git diff --name-only                     # Quick file list
 62: git log --oneline -10                    # Recent commits
 63: ```
 64: 
 65: Classify the change type and identify which doc layers are affected.
 66: 
 67: ### Phase 2: Run Automated Drift Checks
 68: 
 69: > Do not use ad-hoc grep commands for checks that existing scripts already cover.
 70: 
 71: ```bash
 72: # Run all automated tests and checks
 73: npm test
 74: 
 75: # [FILL: Add any project-specific drift/stats scripts]
 76: ```
 77: 
 78: ### Phase 3: Verify Path Conventions
 79: 
 80: Check that no doc still references old/phantom paths:
 81: 
 82: ```bash
 83: # Find references to potentially stale paths
 84: grep -rn "[FILL: old-path-prefix]" docs/ .agent/ .claude/ .github/ AGENTS.md CLAUDE.md --include="*.md"
 85: ```
 86: 
 87: ### Phase 4: Cross-Check Agent Instruction Files
 88: 
 89: All agent instruction files must agree on **facts** and **structural completeness**.
 90: 
 91: Key facts to verify consistency across AGENTS.md, CLAUDE.md, copilot-instructions.md, and coding-standards.md:
 92: 
 93: | Fact | Sources to cross-check |
 94: | --- | --- |
 95: | Coding rules | AGENTS.md, CLAUDE.md, copilot-instructions.md, coding-standards.md |
 96: | [FILL: Project-specific fact] | [FILL: Which files must agree] |
 97: 
 98: ### Phase 5: Update CHANGELOG
 99: 
100: If any doc fixes were made:
101: 
102: ```markdown
103: ### Fixed
104: - Documentation drift: updated [specific counts/paths/conventions] across [N] files
105: ```
106: 
107: ---
108: 
109: ## Quick-Reference: Change ‚Üí Doc Impact Matrix
110: 
111: <!-- SETUP: Fill in the impact matrix for your project. -->
112: 
113: | If you changed‚Ä¶ | Update these docs |
114: | --- | --- |
115: | **File added/removed/renamed** | AGENTS.md (file structure), CLAUDE.md, docs/ARCHITECTURE.md |
116: | **Architecture decision** | `docs/decisions/` (add new ADR file) |
117: | **New feature / bug fix** | `docs/CHANGELOG.md` |
118: | **Coding rule changed** | AGENTS.md, CLAUDE.md, copilot-instructions.md, coding-standards.md |
119: | [FILL: Project-specific change] | [FILL: Affected docs] |
120: 
121: ---
122: 
123: ## Drift Severity Levels
124: 
125: | Level | Description | Action |
126: | --- | --- | --- |
127: | üî¥ **Critical** | Wrong paths, wrong schema, contradictory policy rules ‚Äî agent will produce broken code | Fix immediately |
128: | üü† **High** | Missing files in agent file maps, outdated examples, stale conventions ‚Äî agent may follow wrong patterns | Fix before next AI-assisted change |
129: | üü° **Medium** | Missing changelog entry, outdated roadmap ‚Äî no code impact | Fix in next doc pass |
130: | üü¢ **Low** | Stylistic inconsistency, minor wording ‚Äî cosmetic | Fix when convenient |
</file>

<file path=".agent/workflows/feature-delivery.md">
 1: ---
 2: trigger: when the user asks for a new feature or substantial behavior change
 3: description: End-to-end workflow for delivering features with planning, implementation, QA, and documentation sync
 4: ---
 5: 
 6: # Workflow: Feature Delivery
 7: 
 8: > Standardprozess f√ºr Features im -Template.
 9: > Ziel: schnell liefern, ohne Qualit√§ts- oder Dokumentationsdrift.
10: 
11: ---
12: 
13: ## Phase 1 ‚Äî Feature Brief
14: 
15: Erfasse vor Implementierung:
16: 
17: - Problem / Ziel
18: - Nicht-Ziele (Scope-Grenze)
19: - Betroffene Steps (Interests / Brands / Confirm / Success)
20: - Betroffene Dateien
21: - Risiken (UX, Performance, WebView-Kompatibilit√§t)
22: - Abnahmekriterien (testbar)
23: 
24: ---
25: 
26: ## Phase 2 ‚Äî Design & Datenmodell
27: 
28: 1. Pr√ºfe zuerst `config/*.js` als Single Source of Truth.
29: 2. Definiere neue Felder in Config statt Hardcoding im HTML.
30: 3. Dokumentiere Schema√§nderungen direkt im Config-JSDoc.
31: 4. Pr√ºfe Auswirkungen auf bestehende Rendering-Helfer.
32: 
33: ---
34: 
35: ## Phase 3 ‚Äî Implementierung (in Inkrementen)
36: 
37: Empfohlene Reihenfolge:
38: 
39: 1. Datenzugriff / State-Update
40: 2. Rendering
41: 3. Interaktionslogik
42: 4. Fallback-/Fehlerverhalten
43: 5. Feinschliff (A11y, UX-Text, Touch-Verhalten)
44: 
45: Regeln:
46: 
47: - Keine Frameworks / keine Dependencies
48: - Relative Pfade
49: - Touch-first (`touch-action`, `-webkit-tap-highlight-color`, Hover-Guard)
50: - Modern ES6+ innerhalb Baseline (iOS 16+, WebView 110+)
51: - Runtime-Compatibility-Guard beibehalten
52: 
53: ---
54: 
55: ## Phase 4 ‚Äî QA
56: 
57: Mindestens ausf√ºhren:
58: 
59: - Relevante Punkte in `docs/docs--recommendation-template/QA-CHECKLIST.md`
60: - Smoke im Mockup: Inbox ‚Üí Template ‚Üí Back
61: - Avatar-Fallback
62: - Auswahl-/Navigation-Flow
63: - Keine JS-Fehler in der Konsole
64: 
65: ---
66: 
67: ## Phase 5 ‚Äî Dokumentationssync (Pflicht)
68: 
69: Aktualisiere je nach √Ñnderung:
70: 
71: - `docs/docs--recommendation-template/README.md`
72: - `docs/docs--recommendation-template/ARCHITECTURE.md`
73: - `docs/docs--recommendation-template/USER-FLOW.md`
74: - `docs/docs--recommendation-template/CONFIG-REFERENCE.md`
75: - `docs/docs--recommendation-template/STYLING-GUIDE.md`
76: - `docs/docs--recommendation-template/decisions/` (neuen ADR anlegen, falls ADR-relevant)
77: - `docs/docs--recommendation-template/ROADMAP.md` (falls Planstand ge√§ndert)
78: - `docs/docs--recommendation-template/CHANGELOG.md`
79: 
80: Nutze zus√§tzlich den Audit-Workflow: `.agent/workflows/doc-audit.md`
81: 
82: ---
83: 
84: ## Phase 6 ‚Äî Abschlusskriterien (DoD)
85: 
86: - [ ] Feature erf√ºllt Akzeptanzkriterien
87: - [ ] Keine relevanten Fehler
88: - [ ] QA-Smoke erfolgreich
89: - [ ] Dokumentation synchron
90: - [ ] Changelog aktualisiert
91: - [ ] Keine Regelverst√∂√üe (Pfad, Touch, Hover, Sprache, Baseline)
92: - [ ] `.githooks/pre-commit` erfolgreich ausgef√ºhrt
</file>

<file path=".agent/workflows/get-jules-tasks.md">
 1: ---
 2: description: Retrieve and audit pending or completed Jules tasks via the API
 3: trigger: when a user asks to check Jules tasks, review Jules sessions, or explicitly says to get Jules tasks
 4: ---
 5: 
 6: 1. Start by calling the `jules-batch-review.js` script:
 7:    `node .agent/scripts/jules-batch-review.js`
 8: 
 9: 2. To extract code diffs:
10:    `node .agent/scripts/jules-extract-patch.js <session_id>`
11: 
12: 3. Diffs are saved to `.agent/tmp/`.
</file>

<file path=".agent/workflows/hotfix.md">
 1: ---
 2: trigger: when an urgent production issue needs immediate mitigation
 3: description: Controlled hotfix workflow balancing speed and safety
 4: ---
 5: 
 6: # Workflow: Hotfix
 7: 
 8: > Schneller Fix unter Zeitdruck, ohne Governance zu verlieren.
 9: 
10: ---
11: 
12: ## Phase 1 ‚Äî Incident Triage
13: 
14: - Fehlerbild + Impact dokumentieren
15: - Schweregrad festlegen
16: - Minimalen Fix-Scope definieren
17: 
18: ---
19: 
20: ## Phase 2 ‚Äî Minimal Fix
21: 
22: - Nur root-cause-nahen, kleinsten wirksamen Eingriff umsetzen
23: - Keine Nebenbaustellen
24: - Bestehende Patterns respektieren
25: 
26: ---
27: 
28: ## Phase 3 ‚Äî Kritischer Smoke-Test
29: 
30: Mindestens:
31: 
32: - Betroffener Flow funktioniert wieder
33: - Keine offensichtlichen Regressionen
34: - Keine neuen kritischen Konsolenfehler
35: 
36: ---
37: 
38: ## Phase 4 ‚Äî Pflicht-Dokumentation
39: 
40: Auch im Hotfix-Fall erforderlich:
41: 
42: - `CHANGELOG.md` mit Hotfix-Eintrag
43: - Betroffene Referenzdoku (mindestens kurz)
44: - ADR nur wenn Architektur betroffen
45: 
46: ---
47: 
48: ## Phase 5 ‚Äî Post-Hotfix Follow-up
49: 
50: - Offene technische Schulden erfassen
51: - Ggf. Folge-Task f√ºr nachhaltige L√∂sung planen
52: 
53: ---
54: 
55: ## Hotfix-DoD
56: 
57: - [ ] Incident mitigiert
58: - [ ] Smoke bestanden
59: - [ ] Changelog aktualisiert
60: - [ ] Follow-up dokumentiert
61: - [ ] `.githooks/pre-commit` erfolgreich ausgef√ºhrt
</file>

<file path=".agent/workflows/post-merge-analysis.md">
 1: ---
 2: trigger: when a PR has been merged into master and requires a strict post-merge verification
 3: description: Paranoid line-by-line full-scope post-merge verification workflow
 4: ---
 5: 
 6: # Workflow: Post-Merge Analysis
 7: 
 8: > F√ºr eine paranoide, vollst√§ndige Verifikation nach einem PR-Merge in den default Branch (`master`). Verhindert Regressionen, Stealth-Commits und Documentation-Drift.
 9: 
10: ---
11: 
12: ## Phase 1 ‚Äî Repository Sync & Log Audit
13: 
14: - Checkout `master` und `git pull origin master`
15: - F√ºhre `git log -n 5 --oneline` aus, um den Merge-Commit und die verlinkten Commits zu verifizieren.
16: - Pr√ºfe den Diff des Merge-Commits explizit, um "Stealth-Commits" auszuschlie√üen (Code der nicht im PR-Scope war).
17: 
18: ---
19: 
20: ## Phase 2 ‚Äî Code Syntax & Runtime Sanity
21: 
22: - F√ºhre Syntax-Checks f√ºr alle ge√§nderten oder kritischen JS-Dateien aus: `node --check config/*.js`
23: - F√ºhre Unit-Tests aus falls vorhanden (z.B. `node --test tests/*.test.js`).
24: - Falls das Projekt einen Build-Step oder Linter hat, diesen dediziert ausf√ºhren.
25: 
26: ---
27: 
28: ## Phase 3 ‚Äî Zero Drift Validation
29: 
30: Validiere, dass der Code-Stand mit der Dokumentation √ºbereinstimmt:
31: 
32: - Pr√ºfe `CHANGELOG.md` ‚Äî Ist der Merge dokumentiert?
33: - Pr√ºfe Config Files (z.B. `NEWSLETTER_UI_CONFIG`) gegen `CONFIG-REFERENCE.md` ‚Äî Wurden neue Felder dokumentiert?
34: - Suche nach entfernten Features/Klassen (z.B. `grep -r "feature-xyz" .`) und verifiziere, dass diese restlos aus Code **und** Doku verschwunden sind.
35: 
36: ---
37: 
38: ## Phase 4 ‚Äî Cross-Reference & Link Audit
39: 
40: - Stelle sicher, dass keine toten internen Links in den Markdown-Dateien generiert wurden (z.B. Links zu gel√∂schten oder verschobenen Dateien).
41: - Pr√ºfe, ob neue UI-Komponenten auch in der `QA-CHECKLIST.md` aufgenommen wurden (Tastatur-Access, Aria-Labels etc.).
42: 
43: ---
44: 
45: ## Abschluss
46: 
47: - [ ] Repository auf dem neusten `master`
48: - [ ] Merge-Commit Diff exakt wie erwartet (keine Stealth-√Ñnderungen)
49: - [ ] Syntax und Tests erfolgreich (`node --check`, Test-Suite)
50: - [ ] Doku-Zero-Drift best√§tigt (Changelog, Referenzen)
51: - [ ] Lokalen Feature-Branch l√∂schen (optional)
</file>

<file path=".agent/workflows/pr-analysis.md">
  1: ---
  2: description: A rigorous workflow for analyzing Pull Requests and ensuring adherence to the strict Vanilla JS / WebView architecture of this repository.
  3: trigger: when a PR is opened or updated, or when the user says "Analyze PRs"
  4: ---
  5: 
  6: # PR Analysis Workflow (project Reco Template)
  7: 
  8: This workflow defines the standard operating procedure for auditing Pull Requests (PRs) in the `your-project` project. It ensures that no external dependencies are introduced, WebView compatibility is maintained, and all changes align with `AGENTS.md`.
  9: 
 10: **Non-Interactive Guarantee:** All checks must be performed non-interactively using MCP tools or read-only shell commands.
 11: 
 12: > **Trigger:** Run this workflow using `/pr-analysis` or say "Analyze PRs".
 13: >
 14: > [!IMPORTANT]
 15: > **MANDATORY FIRST STEP:** Before starting the analysis, you MUST read all policies in `AGENTS.md` and `.agent/rules/`. These rules are "Always-On" and override any steps in this workflow.
 16: 
 17: ## 0. Phase 0: Clean Start & Forensics
 18: 
 19: **Goal:** Ensure no stale data exists and fetch ground truth if available.
 20: 
 21: 1. **Wipe Temporary Directory:**
 22: 
 23:    ```bash
 24:    rm -rf .agent/tmp && mkdir -p .agent/tmp
 25:    echo "üßπ Workspace cleaned."
 26:    ```
 27: 
 28: 2. **Jules Context & Forensics (Optional):**
 29:    If the PR was created by Jules/Askida, fetch its execution logs to detect silent failures:
 30:    - Identify Jules Task ID from the PR body (`jules.google.com/task/[ID]`)
 31:    - Use `.agent/scripts/jules-api.sh get-session <ID>` > `.agent/tmp/jules_session.json`
 32:    - Use `.agent/scripts/jules-api.sh get-activities <ID> 20` > `.agent/tmp/jules_activities.json`
 33:    - Review logs for explicit `FAILED` or `error` states.
 34: 
 35: ## 1. Triage & Hygiene Check
 36: 
 37: **Goal:** Determine if the PR is safe to analyze.
 38: 
 39: > [!TIP]
 40: > **Tool Strategy:** Always prefer **GitHub MCP** tools over `gh` CLI when available.
 41: > **Data Persistence Rule:** You MUST persist all diffs and triage results to `.agent/tmp/` files (e.g., `pr_<N>.diff`).
 42: 
 43: 1. **List Open PRs & Identify Batch Conflicts:**
 44:    Use the `mcp_github-mcp-server_list_pull_requests` tool to fetch open PRs.
 45:    *üÜï Batch Strategy:* If multiple PRs are open, group them by affected files. Actively hunt for competing AI-generated PRs that attempt to introduce the same base infrastructure simultaneously (e.g., different variations of `tests/test-helper.js`). Choose ONE clear winner that is robust and secure, and REJECT the others to prevent overlapping merge conflicts.
 46: 
 47: 2. **Check for "Dirty Branching" & Artifact Pollution:**
 48:    Check the commit history of the PR. If you see > 10 commits or commits unrelated to the PR title, the branch is **contaminated**. Instruct a rebase.
 49:    *üÜï Pollution Check:* Ensure no temporary agent files (`.patch`, `.diff`, contents from `.agent/tmp/`) are mistakenly included in the PR diff. If found, **REJECT**.
 50: 
 51: 3. **Empty Diff Check (Superseded):**
 52:    *üÜï Diff Check:* Ensure the PR actually contains a valid diff against `master`. If the changes have already been merged out-of-band or superseded, **REJECT** the PR.
 53: 
 54: 4. **Check for Merge Conflicts (Strict Blocker):**
 55:    Use the `mcp_github-mcp-server_pull_request_read` tool (`method="get"`). Check the `mergeable` status.
 56:    *üÜï Conflict Blocker:* If the PR has merge conflicts (e.g., `mergeable` is false or `mergeable_state` is `dirty`/`conflicting`), you **MUST NOT APPROVE** the PR under any circumstances. It is strictly forbidden. Draft a `REQUEST_CHANGES` or `COMMENT` review instructing the author to rebase and resolve conflicts first.
 57: 
 58: 5. **Check Existing Review Status:**
 59:    Fetch existing reviews. If already `APPROVED`, note this in the report.
 60: 
 61: ## 2. Deep Code Audit (Iterative Loop)
 62: 
 63: **CRITICAL INSTRUCTION:** You must perform these steps for **EVERY SINGLE OPEN PR**, one by one.
 64: 
 65: ### üîÅ Execution Loop (For Each PR)
 66: 
 67: 1. **Isolate & Fetch (Forensics):**
 68:    - Run the automated forensics script:
 69: 
 70:      ```bash
 71:      .agent/scripts/analyze_pr.sh <PR_NUMBER>
 72:      ```
 73: 
 74:    - This script generates `.agent/tmp/pr_<PR_NUMBER>.diff`, runs threat/asset scans, and **fetches Gemini AI reviews** into `.agent/tmp/pr_<PR_NUMBER>_gemini_report.md`. Review these insights carefully as they often catch subtle logic bugs.
 75: 
 76: 2. **The "Gemini" Second Opinion:**
 77:    - Review the generated `.agent/tmp/pr_<PR_NUMBER>_gemini_report.md`.
 78:    - Do Gemini's suggestions align with repository constraints?
 79:    - If Gemini suggests a fix, verify it manually before requesting changes.
 80: 
 81: 3. **The "Vanilla" Check (CRITICAL Line-by-Line Verification):**
 82:    - Does the PR add runtime dependencies, external CDN script tags (`<script src="http://...">`), or framework-based runtime architecture? -> **BLOCK & REJECT**.
 83:    - Dev/test tooling in `package.json` is allowed if runtime constraints remain intact.
 84: 
 85: 4. **The CSS & Layout Check:**
 86:    - Are there new interactive elements? Ensure `touch-action: manipulation;` and `-webkit-tap-highlight-color: transparent;` are used.
 87:    - Are there new `:hover` states? They MUST be wrapped in `@media (hover: hover) and (pointer: fine)`.
 88:    - Has `overscroll-behavior: none` been removed? -> **REJECT**.
 89: 
 90: 5. **The JS State & Config Check:**
 91:    - Are `config/*.js` files adhering to the IIFE returning `Object.freeze()` pattern?
 92:    - Is `localStorage`, `sessionStorage`, or `postMessage` being used? -> **REJECT**.
 93:    - Are relative paths correct (no leading `/` or `./`)?
 94: 
 95: 6. **The UI / Copy Check:**
 96:    - Does any new German copy use formal form ("Sie" / "Ihre")? -> **Must use informal du/dein/euch**.
 97: 
 98: 7. **The Avatar Check:**
 99:    - Do new avatars follow config conventions (`template-assets/brand_avatars/*`)?
100:    - Is `your-asset-helper(item)` used instead of manual `<img>` tags?
101: 
102: 8. **Impact Analysis & Prioritization:**
103:    Document for each PR in your internal notes:
104:    - **Merge Priority:** (Bug Fixes > Enhancements > Refactors)
105:    - **What It Does:** Plain-language explanation
106:    - **Advantages / Disadvantages:** Trade-offs
107:    - **Feature Regressions:** Any affected functionality
108: 
109: ## 3. Zero Drift Validation
110: 
111: **Goal:** Ensure consistency across the ecosystem.
112: 
113: 1. **Check Documentation:**
114:    - If UI/Config changed, was `docs/CONFIG-REFERENCE.md` or `docs/STYLING-GUIDE.md` updated?
115:    - Was `docs/CHANGELOG.md` updated for user-facing changes?
116: 
117: ## 4. Batch Review & Merge Strategy Summary
118: 
119: **Goal:** Provide the user with a high-level overview of all analyzed PRs and recommend an optimal merge order to prevent conflicts.
120: 
121: 1. **Generate Merge Strategy Report:**
122:    - If you are auditing multiple PRs, create an artifact (e.g., `pr_batch_summary.md`) before asking for final approval.
123:    - For **every PR analyzed**, you MUST explicitly detail:
124:      - **Merge Priority & Optimal Sorting:** Recommend the exact order to merge (e.g., base infrastructure first, isolated tests second).
125:      - **What it does:** Plain-language explanation of the changes.
126:      - **Advantages / Disadvantages:** Trade-offs, architectural alignment, or potential regressions.
127:      - **Verdict:** Explicit recommendation to APPROVE & MERGE or CLOSE/REJECT (with reasoning).
128: 
129: ## 5. Comment Drafting & Feedback Loop
130: 
131: **Goal:** Turn analysis into actionable, professional feedback via GitHub MCP.
132: 
133: 1. **Draft Detailed Comments:**
134:    - Maintain a working document at `.agent/tmp/pr_analysis_comments.md`.
135:    - Base your decision (APPROVE / REQUEST_CHANGES / COMMENT) on the checks above.
136: 
137: 2. **Review & Action Prompt:**
138:    - You MUST explicitly ask the user: "Do you want me to post the drafted comments summarizing my findings?" before posting.
139: 
140: 3. **"Paranoid Mode" Deep Re-Verification (MANDATORY before APPROVAL)**
141:    Before posting an APPROVE review, complete this checklist in your draft:
142: 
143:    ```markdown
144:    ## Paranoid Mode Checklist - PR #<NUMBER>
145: 
146:    ### Git Hygiene & Conflicts
147:    - [ ] PR is explicitly `mergeable` right now? (No conflicts)
148:    - [ ] No temporary files or artifact pollution included?
149: 
150:    ### Logic & Vanilla Constraints
151:    - [ ] No runtime `npm` dependencies or external CDNs added?
152:    - [ ] Config files maintain IIFE/Object.freeze pattern?
153:    - [ ] No `localStorage` or `postMessage` used?
154: 
155:    ### WebView UX
156:    - [ ] `touch-action: manipulation` used correctly?
157:    - [ ] `:hover` states hidden behind pointer media queries?
158:    - [ ] Informal German ("du") maintained (no "Sie/Ihre")?
159: 
160:    ### Assets
161:    - [ ] Avatar paths correct and verified locally?
162:    - [ ] `your-asset-helper` used correctly?
163: 
164:    **VERDICT:** ‚úÖ APPROVED / ‚ùå REJECT (reason)
165:    ```
166: 
167: 4. **Post Comments (Mandatory Tools)**
168:    Do NOT use `gh pr review` via shell. Use `mcp_github-mcp-server_pull_request_review_write` or `mcp_github-mcp-server_add_issue_comment`.
169: 
170:    **Use these specific templates:**
171: 
172:    ### Template 1: Code/Logic Change PRs
173: 
174:    ```markdown
175:    ## ‚úÖ Approved ‚Äî Paranoid Mode Analysis Passed
176: 
177:    ### Verification Checklist
178:    **Architecture & Git Hygiene:**
179:    - [x] Vanilla JS/CSS constraints verified
180:    - [x] Config Integrity maintained
181:    - [x] PR is mergeable and free of conflicts
182: 
183:    **WebView UX:**
184:    - [x] Touch interactions lag-free
185:    - [x] Hover states correctly guarded
186: 
187:    **Evidence:**
188:    - Verified changes in `<file>` align with `AGENTS.md`.
189: 
190:    ---
191:    *Automated analysis by PR Analysis Workflow v2*
192:    ```
193: 
194:    ### Template 2: UX/Copy/Cosmetic PRs
195: 
196:    ```markdown
197:    ## ‚úÖ Approved ‚Äî UX Enhancement Verified
198: 
199:    ### Changes Verified
200:    - Visual/Copy changes align with Design guidelines
201:    - Informal German ("du") verified.
202: 
203:    ### Logic Unchanged
204:    - [x] Core behavior preserved
205: 
206:    ---
207:    *Automated analysis by PR Analysis Workflow v2*
208:    ```
209: 
210: ## 6. Re-verification Loop
211: 
212: If the PR author updates the PR (or user says "Re-check"):
213: 
214: 1. Fetch the fresh diff.
215: 2. Re-run Phase 2 (Deep Code Audit).
216: 3. Update your `.agent/tmp/` draft from `REQUEST_CHANGES` to `RE-VERIFIED ‚úÖ` or `STILL FAILING ‚ùå`.
217: 4. Notify the user of the new status.
218: 
219: ## 7. Final Logistics & Metadata Sync
220: 
221: **CRITICAL RULE:** You are **FORBIDDEN** from merging PRs automatically. Wait for the user to explicitly say "Merge PR #X".
222: 
223: 1. **Sync "Completed Date":**
224:    Immediately after an approval, use the helper script:
225: 
226:    ```bash
227:    .agent/scripts/gh-helpers.sh set_project_completed_date <PR_NUMBER>
228:    ```
229: 
230: 2. **Post-Merge Verification:**
231:    After the user merges, verify the local branch:
232: 
233:    ```bash
234:    git pull origin master
235:    ```
236: 
237:    (Optional) If applicable, run through the `post-merge-analysis.md` workflow.
</file>

<file path=".agent/workflows/qa-audit.md">
  1: ---
  2: description: Full-scope QA audit of [FILL: main-source-file] ‚Äî systematic code analysis including security, robustness, rule compliance, and documentation drift
  3: ---
  4: 
  5: # QA-Audit Workflow
  6: 
  7: > Run this workflow to perform a comprehensive quality audit of the project codebase.
  8: > Produces a timestamped audit report with findings classified by severity (Critical / High / Medium / Low).
  9: >
 10: > **Principle:** Read-only analysis first ‚Äî no changes until the user approves fixes. Use existing tests and scripts, never create temporary audit scripts.
 11: 
 12: ---
 13: 
 14: ## Scoping
 15: 
 16: Before starting, determine audit scope with the user:
 17: 
 18: | Scope | What is audited | Typical duration |
 19: | --- | --- | --- |
 20: | **Template-only** | `[FILL: main-source-file]` (HTML + CSS + JS) | Medium |
 21: | **Config-included** | Template + all `config/*.js` files | Medium-Large |
 22: | **Full Scope Paranoid** | Template + Config + Agent Rules + Docs (all layers) | Large |
 23: 
 24: Default: **Full Scope Paranoid** (recommended for periodic audits or after major changes).
 25: 
 26: ---
 27: 
 28: ## Phase 0 ‚Äî Baseline & Preparation
 29: 
 30: > Establish a green baseline before the audit begins.
 31: 
 32: 1. **Run unit tests** ‚Äî `npm test` must pass (all tests green)
 33: 2. **Run config-stats** ‚Äî `node scripts/config-stats.js --json` to capture current counts (brands, categories, avatars)
 34: 3. **Run avatar verification** ‚Äî `node scripts/verify-avatar-files.js`
 35: 4. **Note branch and commit** ‚Äî Record current branch and HEAD commit for the audit report header
 36: 5. **Count template lines** ‚Äî `wc -l [FILL: main-source-file]` to set scope expectation
 37: 
 38: If any check fails ‚Üí fix first, then start the audit.
 39: 
 40: ---
 41: 
 42: ## Phase 1 ‚Äî Template Full Read (Line-by-Line)
 43: 
 44: > Read the entire `[FILL: main-source-file]` ‚Äî every line matters. Do NOT skip sections.
 45: 
 46: Divide the template into logical zones and read each completely:
 47: 
 48: | Zone | Content | Focus |
 49: | --- | --- | --- |
 50: | **HTML `<head>`** | Meta tags, viewport, fonts | Viewport config, WebView compatibility |
 51: | **CSS `<style>`** | Custom properties, component styles | Touch rules, hover guards, layout values |
 52: | **HTML `<body>`** | Step containers, markup, structure | Semantic correctness, accessibility |
 53: | **JS `<script>`** | IIFE, state management, rendering, navigation | Logic correctness, error handling, XSS |
 54: 
 55: For each zone, note:
 56: - Anything that looks fragile or inconsistent
 57: - Hardcoded values that should come from config
 58: - Missing error handling or guard conditions
 59: 
 60: ---
 61: 
 62: ## Phase 2 ‚Äî Rule Compliance Check
 63: 
 64: > Verify every code section against the project's documented rules.
 65: 
 66: ### Rule Sources (check ALL of these)
 67: 
 68: | File | Key rules to verify |
 69: | --- | --- |
 70: | `AGENTS.md` | CSS Rules ¬ß1‚Äì7, JS Rules ¬ß1‚Äì8, SVG/Avatar Rules ¬ß1‚Äì5 |
 71: | `.github/copilot-instructions.md` | Always Do / Never Do lists |
 72: | `CLAUDE.md` | Critical Constraints, Do NOT section |
 73: | `.claude/rules/css-touch.md` | Touch-action, hover guards, tap-highlight, overscroll |
 74: | `.claude/rules/template-rendering.md` | Padding, footer, avatar rendering |
 75: | `.claude/rules/config-patterns.md` | IIFE + Object.freeze, SSOT pattern |
 76: | `.agent/rules/coding-standards.md` | CSS/JS rules, asset path conventions |
 77: | `.agent/rules/-template.md` | File responsibilities, config schema, avatar system |
 78: 
 79: ### Checklist
 80: 
 81: - [ ] Every interactive element has `touch-action: manipulation`
 82: - [ ] Every interactive element has `-webkit-tap-highlight-color: transparent`
 83: - [ ] Every `:hover` rule is inside `@media (hover: hover) and (pointer: fine)`
 84: - [ ] `overscroll-behavior: none` on html/body
 85: - [ ] `user-select: none` on chips and cards
 86: - [ ] All paths are relative ‚Äî no leading `/` or `./`
 87: - [ ] All config exports use IIFE + `Object.freeze`
 88: - [ ] All brand avatars rendered via `your-asset-helper()` ‚Äî no manual `<img>` tags
 89: - [ ] All `innerHTML` insertions of config-/runtime-derived text use `your-escape-fn()`
 90: - [ ] Compatibility guard checks `Set`, `Map`, `find`, `includes`, `requestAnimationFrame`
 91: 
 92: ---
 93: 
 94: ## Phase 3 ‚Äî Config Verification
 95: 
 96: > Verify config files for schema conformity and completeness.
 97: 
 98: ### Files to check
 99: 
100: | Config file | Key checks |
101: | --- | --- |
102: | `config/-brands-config.js` | Every brand has all required fields (`id`, `name`, `description`, `categoryIds`, `avatar`, `signupUrl`, `featured`, `sortOrder`); `DEFAULT_AVATAR` has all 4 fields (`src`, `initials`, `background`, `textColor`); no duplicate IDs |
103: | `config/-categories-config.js` | Every category has `id`, `label`, `color`; no duplicate IDs; IDs used in brands all exist |
104: | `config/-ui-config.js` | Provider address form matches (provider-A=informal, provider-B=formal); all text keys present |
105: | `config/escape-html.js` | `your-escape-fn()` handles all 5 HTML entities (`&`, `<`, `>`, `"`, `'`) |
106: 
107: ### Cross-references
108: 
109: - [ ] Every `categoryIds` entry in brands references an existing category ID
110: - [ ] Every `avatar.src` that is non-empty points to an existing file in `template-assets/brand_avatars/`
111: - [ ] `DEFAULT_AVATAR` field set matches the avatar object schema used by brands
112: 
113: ---
114: 
115: ## Phase 4 ‚Äî Security Scan
116: 
117: > Identify XSS vectors, injection points, and unsafe data flows.
118: 
119: ### innerHTML audit
120: 
121: Search for ALL `innerHTML` usages in the template. For each:
122: 
123: - [ ] Is the inserted content static HTML? ‚Üí Safe
124: - [ ] Is config-derived text inserted? ‚Üí Must use `your-escape-fn()`
125: - [ ] Is runtime error text inserted? ‚Üí Must use `your-escape-fn()`
126: - [ ] Is user input inserted? ‚Üí Must use `your-escape-fn()` (should not exist in this template)
127: 
128: ### SVG injection audit
129: 
130: - [ ] `buildFallbackDataUri()` sanitizes color values before embedding in SVG
131: - [ ] Color sanitization uses a strict regex (e.g., `/^#[0-9a-fA-F]{3,8}$/`)
132: - [ ] Invalid colors fall back to safe defaults
133: 
134: ### API / External data
135: 
136: - [ ] No `eval()`, `Function()`, or `document.write()` usage
137: - [ ] No `postMessage` listeners (template must be self-contained)
138: - [ ] No `localStorage`, `sessionStorage`, or cookie access
139: 
140: ---
141: 
142: ## Phase 5 ‚Äî Edge-Case & Robustness Analysis
143: 
144: > Identify race conditions, missing guards, and error propagation gaps.
145: 
146: ### Race conditions
147: 
148: - [ ] Rapid navigation (double-tap on CTA buttons) ‚Äî is there a transition lock?
149: - [ ] Rapid remove (swipe + X-button simultaneously on confirm items) ‚Äî is there an isRemoving guard?
150: - [ ] Scroll momentum + button tap ‚Äî can interaction fire during scroll?
151: 
152: ### Error propagation
153: 
154: - [ ] `handleSubscribe()` ‚Äî what happens if Supabase/crypto calls fail? Does the user still reach Success?
155: - [ ] `handleInitError()` ‚Äî does it safely handle all error types (string, Error object, null)?
156: - [ ] Network failures in `fetch()` calls ‚Äî are they caught and logged?
157: 
158: ### Compatibility
159: 
160: - [ ] Compatibility guard covers all required APIs
161: - [ ] Guard failure shows a user-facing message (not a blank screen)
162: - [ ] Template degrades gracefully if optional features are unavailable
163: 
164: ---
165: 
166: ## Phase 6 ‚Äî Documentation Drift (Full Scope only)
167: 
168: > Compare code IST-values against documented SOLL-values.
169: 
170: ### Values to cross-check
171: 
172: | Value | Code location | Documented in |
173: | --- | --- | --- |
174: | `.app-container` padding | CSS in `[FILL: main-source-file]` | AGENTS.md, CLAUDE.md, STYLING-GUIDE.md, coding-standards.md, css-touch.md, template-rendering.md |
175: | `--app-chrome-height` | CSS custom property | Same files as above |
176: | Footer `padding-bottom` formula | CSS in template | AGENTS.md ¬ßCSS-7 |
177: | Brand avatar size (Step 2 / Step 3) | CSS in template | AGENTS.md ¬ßLayout Constraints |
178: | Font stack | CSS in template | AGENTS.md ¬ßLayout Constraints |
179: | Viewport meta | `<meta>` tag | AGENTS.md ¬ßLayout Constraints |
180: | Binding variant IDs | JS / deeplinks | AGENTS.md, CLAUDE.md (must never change) |
181: 
182: ### Methodology
183: 
184: 1. Extract the actual value from code
185: 2. grep for the same value in ALL rule files (9+ files)
186: 3. If any file has a different value ‚Üí that's documentation drift ‚Üí log as finding
187: 
188: ---
189: 
190: ## Phase 7 ‚Äî Finding Classification & Report
191: 
192: > Classify every finding and produce a structured report.
193: 
194: ### Severity Definitions
195: 
196: | Severity | Criteria | Examples |
197: | --- | --- | --- |
198: | **CRITICAL** | Security vulnerability or data loss risk | XSS via innerHTML, credential exposure |
199: | **HIGH** | Functional bug affecting users | UI freeze, broken navigation, lost state |
200: | **MEDIUM** | Rule violation, robustness gap, doku drift | Missing guard, inconsistent value in docs |
201: | **LOW** | Code hygiene, dead code, minor inconsistency | Unused variable, redundant style, cursor:pointer |
202: 
203: ### Report Format
204: 
205: Create `docs/docs--recommendation-template/QA-AUDIT-{YYYY-MM-DD}.md` with:
206: 
207: ```markdown
208: # QA-Audit: [FILL: main-source-file]
209: 
210: > **Datum:** {ISO timestamp}
211: > **Branch:** {branch name}
212: > **Template:** {line count} Zeilen
213: > **Unit Tests:** {X}/{X} pass
214: > **Modus:** {scope}
215: 
216: ---
217: 
218: ## Severity Legend
219: (table)
220: 
221: ## CRITICAL ({count})
222: ### C1 ‚Äî {title}
223: **Datei/Zeile ‚Äî Regel ‚Äî Code-Snippet ‚Äî Impact ‚Äî Status**
224: 
225: ## HIGH ({count})
226: ...
227: 
228: ## MEDIUM ({count})
229: ...
230: 
231: ## LOW ({count})
232: ...
233: ```
234: 
235: Each finding must include:
236: - **File and line reference** (exact, not approximate)
237: - **Which rule it violates** (file + section)
238: - **Code snippet** showing the problem
239: - **Impact description** (what can go wrong)
240: - **Fix suggestion** (concrete, not vague)
241: 
242: ---
243: 
244: ## Phase 8 ‚Äî Fix Planning (Post-Report)
245: 
246: > After the report is reviewed, plan fixes by severity and risk.
247: 
248: ### Fix Order
249: 
250: 1. **CRITICAL** ‚Äî Fix immediately, zero risk tolerance
251: 2. **HIGH** ‚Äî Fix next, explain risk before applying
252: 3. **MEDIUM** ‚Äî Discuss risk with user, some may need clarification (e.g., doku drift vs. code bug)
253: 4. **LOW** ‚Äî Optional, fix only if user requests
254: 
255: ### Risk Assessment per Finding
256: 
257: For each finding, determine:
258: 
259: | Factor | Question |
260: | --- | --- |
261: | **Fix risk** | Can this fix break existing behavior? |
262: | **Scope** | How many files are touched? |
263: | **Dependency** | Does this fix depend on another fix? |
264: | **Verification** | How to verify the fix works? (`npm test`, visual check, manual test) |
265: 
266: ### After Fixes
267: 
268: 1. Run `npm test` ‚Äî must still pass
269: 2. After adding/removing brands: `npm run test:sync-baseline`
270: 3. Update the audit report ‚Äî mark fixed findings with ‚úÖ FIXED + timestamp
271: 4. Update `QA-CHECKLIST.md` if new check categories were discovered
272: 5. Run `.githooks/pre-commit` before committing
273: 
274: ---
275: 
276: ## Post-Audit Checklist
277: 
278: - [ ] Audit report saved to `docs/docs--recommendation-template/QA-AUDIT-{date}.md`
279: - [ ] All C/H findings either fixed or explicitly deferred with justification
280: - [ ] `npm test` passes after all fixes
281: - [ ] Updated audit report with fix statuses
282: - [ ] `QA-CHECKLIST.md` updated if new check types were discovered
283: - [ ] Commit with format `audit(template): QA-Audit {date} ‚Äî {summary}`
</file>

<file path=".agent/workflows/release-readiness.md">
 1: ---
 2: trigger: when preparing a release, milestone handoff, or formal QA sign-off
 3: description: Pre-release quality gate workflow for the project
 4: ---
 5: 
 6: # Workflow: Release Readiness
 7: 
 8: > Finaler Qualit√§tscheck vor Release/√úbergabe.
 9: 
10: ---
11: 
12: ## Phase 1 ‚Äî Scope Freeze
13: 
14: - Definiere exakt, welche √Ñnderungen in den Release gehen.
15: - Offene Punkte als bewusst ‚Äûnicht im Scope" markieren.
16: 
17: ---
18: 
19: ## Phase 2 ‚Äî Funktionale Abnahme
20: 
21: - F√ºhre die vollst√§ndige `docs/docs--recommendation-template/QA-CHECKLIST.md` aus.
22: - Dokumentiere Testergebnis je Abschnitt.
23: - Stelle sicher: keine kritischen Konsolenfehler.
24: 
25: ---
26: 
27: ## Phase 3 ‚Äî WebView-Qualit√§t
28: 
29: - Baseline validiert: iOS 16+, [FILL: target environment] 110+
30: - Runtime-Compatibility-Guard validiert
31: - Touch-Verhalten und Hover-Guards validiert
32: 
33: ---
34: 
35: ## Phase 4 ‚Äî Dokumentationsgate
36: 
37: Pflichtcheck:
38: 
39: - `docs/docs--recommendation-template/README.md`
40: - `docs/docs--recommendation-template/ARCHITECTURE.md`
41: - `docs/docs--recommendation-template/USER-FLOW.md`
42: - `docs/docs--recommendation-template/CONFIG-REFERENCE.md`
43: - `docs/docs--recommendation-template/STYLING-GUIDE.md`
44: - `docs/docs--recommendation-template/decisions/` (ADR-Dateien, falls relevant)
45: - `docs/docs--recommendation-template/ROADMAP.md` (falls relevant)
46: - `docs/docs--recommendation-template/CHANGELOG.md`
47: 
48: Nutze `.agent/workflows/doc-audit.md` als finalen Drift-Check.
49: 
50: ---
51: 
52: ## Phase 5 ‚Äî Go/No-Go Entscheidung
53: 
54: Go nur wenn:
55: 
56: - [ ] QA erfolgreich
57: - [ ] Doku synchron
58: - [ ] Keine kritischen offenen Punkte
59: - [ ] Changelog vollst√§ndig
60: - [ ] `.githooks/pre-commit` erfolgreich ausgef√ºhrt
</file>

<file path=".agents/skills/brainstorming/SKILL.md">
 1: ---
 2: name: brainstorming
 3: description: "You MUST use this before any creative work - creating features, building components, adding functionality, or modifying behavior. Explores user intent, requirements and design before implementation."
 4: ---
 5: 
 6: # Brainstorming Ideas Into Designs
 7: 
 8: ## Overview
 9: 
10: Help turn ideas into fully formed designs and specs through natural collaborative dialogue.
11: 
12: Start by understanding the current project context, then ask questions one at a time to refine the idea. Once you understand what you're building, present the design and get user approval.
13: 
14: <HARD-GATE>
15: Do NOT invoke any implementation skill, write any code, scaffold any project, or take any implementation action until you have presented a design and the user has approved it. This applies to EVERY project regardless of perceived simplicity.
16: </HARD-GATE>
17: 
18: ## Anti-Pattern: "This Is Too Simple To Need A Design"
19: 
20: Every project goes through this process. A todo list, a single-function utility, a config change ‚Äî all of them. "Simple" projects are where unexamined assumptions cause the most wasted work. The design can be short (a few sentences for truly simple projects), but you MUST present it and get approval.
21: 
22: ## Checklist
23: 
24: You MUST create a task for each of these items and complete them in order:
25: 
26: 1. **Explore project context** ‚Äî check files, docs, recent commits
27: 2. **Ask clarifying questions** ‚Äî one at a time, understand purpose/constraints/success criteria
28: 3. **Propose 2-3 approaches** ‚Äî with trade-offs and your recommendation
29: 4. **Present design** ‚Äî in sections scaled to their complexity, get user approval after each section
30: 5. **Write design doc** ‚Äî save to `docs/plans/YYYY-MM-DD-<topic>-design.md` and commit
31: 6. **Transition to implementation** ‚Äî invoke writing-plans skill to create implementation plan
32: 
33: ## Process Flow
34: 
35: ```dot
36: digraph brainstorming {
37:     "Explore project context" [shape=box];
38:     "Ask clarifying questions" [shape=box];
39:     "Propose 2-3 approaches" [shape=box];
40:     "Present design sections" [shape=box];
41:     "User approves design?" [shape=diamond];
42:     "Write design doc" [shape=box];
43:     "Invoke writing-plans skill" [shape=doublecircle];
44: 
45:     "Explore project context" -> "Ask clarifying questions";
46:     "Ask clarifying questions" -> "Propose 2-3 approaches";
47:     "Propose 2-3 approaches" -> "Present design sections";
48:     "Present design sections" -> "User approves design?";
49:     "User approves design?" -> "Present design sections" [label="no, revise"];
50:     "User approves design?" -> "Write design doc" [label="yes"];
51:     "Write design doc" -> "Invoke writing-plans skill";
52: }
53: ```
54: 
55: **The terminal state is invoking writing-plans.** Do NOT invoke frontend-design, mcp-builder, or any other implementation skill. The ONLY skill you invoke after brainstorming is writing-plans.
56: 
57: ## The Process
58: 
59: **Understanding the idea:**
60: - Check out the current project state first (files, docs, recent commits)
61: - Ask questions one at a time to refine the idea
62: - Prefer multiple choice questions when possible, but open-ended is fine too
63: - Only one question per message - if a topic needs more exploration, break it into multiple questions
64: - Focus on understanding: purpose, constraints, success criteria
65: 
66: **Exploring approaches:**
67: - Propose 2-3 different approaches with trade-offs
68: - Present options conversationally with your recommendation and reasoning
69: - Lead with your recommended option and explain why
70: 
71: **Presenting the design:**
72: - Once you believe you understand what you're building, present the design
73: - Scale each section to its complexity: a few sentences if straightforward, up to 200-300 words if nuanced
74: - Ask after each section whether it looks right so far
75: - Cover: architecture, components, data flow, error handling, testing
76: - Be ready to go back and clarify if something doesn't make sense
77: 
78: ## After the Design
79: 
80: **Documentation:**
81: - Write the validated design to `docs/plans/YYYY-MM-DD-<topic>-design.md`
82: - Use elements-of-style:writing-clearly-and-concisely skill if available
83: - Commit the design document to git
84: 
85: **Implementation:**
86: - Invoke the writing-plans skill to create a detailed implementation plan
87: - Do NOT invoke any other skill. writing-plans is the next step.
88: 
89: ## Key Principles
90: 
91: - **One question at a time** - Don't overwhelm with multiple questions
92: - **Multiple choice preferred** - Easier to answer than open-ended when possible
93: - **YAGNI ruthlessly** - Remove unnecessary features from all designs
94: - **Explore alternatives** - Always propose 2-3 approaches before settling
95: - **Incremental validation** - Present design, get approval before moving on
96: - **Be flexible** - Go back and clarify when something doesn't make sense
</file>

<file path=".agents/skills/find-skills/SKILL.md">
  1: ---
  2: name: find-skills
  3: description: Helps users discover and install agent skills when they ask questions like "how do I do X", "find a skill for X", "is there a skill that can...", or express interest in extending capabilities. This skill should be used when the user is looking for functionality that might exist as an installable skill.
  4: ---
  5: 
  6: # Find Skills
  7: 
  8: This skill helps you discover and install skills from the open agent skills ecosystem.
  9: 
 10: ## When to Use This Skill
 11: 
 12: Use this skill when the user:
 13: 
 14: - Asks "how do I do X" where X might be a common task with an existing skill
 15: - Says "find a skill for X" or "is there a skill for X"
 16: - Asks "can you do X" where X is a specialized capability
 17: - Expresses interest in extending agent capabilities
 18: - Wants to search for tools, templates, or workflows
 19: - Mentions they wish they had help with a specific domain (design, testing, deployment, etc.)
 20: 
 21: ## What is the Skills CLI?
 22: 
 23: The Skills CLI (`npx skills`) is the package manager for the open agent skills ecosystem. Skills are modular packages that extend agent capabilities with specialized knowledge, workflows, and tools.
 24: 
 25: **Key commands:**
 26: 
 27: - `npx skills find [query]` - Search for skills interactively or by keyword
 28: - `npx skills add <package>` - Install a skill from GitHub or other sources
 29: - `npx skills check` - Check for skill updates
 30: - `npx skills update` - Update all installed skills
 31: 
 32: **Browse skills at:** https://skills.sh/
 33: 
 34: ## How to Help Users Find Skills
 35: 
 36: ### Step 1: Understand What They Need
 37: 
 38: When a user asks for help with something, identify:
 39: 
 40: 1. The domain (e.g., React, testing, design, deployment)
 41: 2. The specific task (e.g., writing tests, creating animations, reviewing PRs)
 42: 3. Whether this is a common enough task that a skill likely exists
 43: 
 44: ### Step 2: Search for Skills
 45: 
 46: Run the find command with a relevant query:
 47: 
 48: ```bash
 49: npx skills find [query]
 50: ```
 51: 
 52: For example:
 53: 
 54: - User asks "how do I make my React app faster?" ‚Üí `npx skills find react performance`
 55: - User asks "can you help me with PR reviews?" ‚Üí `npx skills find pr review`
 56: - User asks "I need to create a changelog" ‚Üí `npx skills find changelog`
 57: 
 58: The command will return results like:
 59: 
 60: ```
 61: Install with npx skills add <owner/repo@skill>
 62: 
 63: vercel-labs/agent-skills@vercel-react-best-practices
 64: ‚îî https://skills.sh/vercel-labs/agent-skills/vercel-react-best-practices
 65: ```
 66: 
 67: ### Step 3: Present Options to the User
 68: 
 69: When you find relevant skills, present them to the user with:
 70: 
 71: 1. The skill name and what it does
 72: 2. The install command they can run
 73: 3. A link to learn more at skills.sh
 74: 
 75: Example response:
 76: 
 77: ```
 78: I found a skill that might help! The "vercel-react-best-practices" skill provides
 79: React and Next.js performance optimization guidelines from Vercel Engineering.
 80: 
 81: To install it:
 82: npx skills add vercel-labs/agent-skills@vercel-react-best-practices
 83: 
 84: Learn more: https://skills.sh/vercel-labs/agent-skills/vercel-react-best-practices
 85: ```
 86: 
 87: ### Step 4: Offer to Install
 88: 
 89: If the user wants to proceed, you can install the skill for them:
 90: 
 91: ```bash
 92: npx skills add <owner/repo@skill> -g -y
 93: ```
 94: 
 95: The `-g` flag installs globally (user-level) and `-y` skips confirmation prompts.
 96: 
 97: ## Common Skill Categories
 98: 
 99: When searching, consider these common categories:
100: 
101: | Category        | Example Queries                          |
102: | --------------- | ---------------------------------------- |
103: | Web Development | react, nextjs, typescript, css, tailwind |
104: | Testing         | testing, jest, playwright, e2e           |
105: | DevOps          | deploy, docker, kubernetes, ci-cd        |
106: | Documentation   | docs, readme, changelog, api-docs        |
107: | Code Quality    | review, lint, refactor, best-practices   |
108: | Design          | ui, ux, design-system, accessibility     |
109: | Productivity    | workflow, automation, git                |
110: 
111: ## Tips for Effective Searches
112: 
113: 1. **Use specific keywords**: "react testing" is better than just "testing"
114: 2. **Try alternative terms**: If "deploy" doesn't work, try "deployment" or "ci-cd"
115: 3. **Check popular sources**: Many skills come from `vercel-labs/agent-skills` or `ComposioHQ/awesome-claude-skills`
116: 
117: ## When No Skills Are Found
118: 
119: If no relevant skills exist:
120: 
121: 1. Acknowledge that no existing skill was found
122: 2. Offer to help with the task directly using your general capabilities
123: 3. Suggest the user could create their own skill with `npx skills init`
124: 
125: Example:
126: 
127: ```
128: I searched for skills related to "xyz" but didn't find any matches.
129: I can still help you with this task directly! Would you like me to proceed?
130: 
131: If this is something you do often, you could create your own skill:
132: npx skills init my-xyz-skill
133: ```
</file>

<file path=".agents/skills/frontend-design/LICENSE.txt">
  1: Apache License
  2:                            Version 2.0, January 2004
  3:                         http://www.apache.org/licenses/
  4: 
  5:    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
  6: 
  7:    1. Definitions.
  8: 
  9:       "License" shall mean the terms and conditions for use, reproduction,
 10:       and distribution as defined by Sections 1 through 9 of this document.
 11: 
 12:       "Licensor" shall mean the copyright owner or entity authorized by
 13:       the copyright owner that is granting the License.
 14: 
 15:       "Legal Entity" shall mean the union of the acting entity and all
 16:       other entities that control, are controlled by, or are under common
 17:       control with that entity. For the purposes of this definition,
 18:       "control" means (i) the power, direct or indirect, to cause the
 19:       direction or management of such entity, whether by contract or
 20:       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 21:       outstanding shares, or (iii) beneficial ownership of such entity.
 22: 
 23:       "You" (or "Your") shall mean an individual or Legal Entity
 24:       exercising permissions granted by this License.
 25: 
 26:       "Source" form shall mean the preferred form for making modifications,
 27:       including but not limited to software source code, documentation
 28:       source, and configuration files.
 29: 
 30:       "Object" form shall mean any form resulting from mechanical
 31:       transformation or translation of a Source form, including but
 32:       not limited to compiled object code, generated documentation,
 33:       and conversions to other media types.
 34: 
 35:       "Work" shall mean the work of authorship, whether in Source or
 36:       Object form, made available under the License, as indicated by a
 37:       copyright notice that is included in or attached to the work
 38:       (an example is provided in the Appendix below).
 39: 
 40:       "Derivative Works" shall mean any work, whether in Source or Object
 41:       form, that is based on (or derived from) the Work and for which the
 42:       editorial revisions, annotations, elaborations, or other modifications
 43:       represent, as a whole, an original work of authorship. For the purposes
 44:       of this License, Derivative Works shall not include works that remain
 45:       separable from, or merely link (or bind by name) to the interfaces of,
 46:       the Work and Derivative Works thereof.
 47: 
 48:       "Contribution" shall mean any work of authorship, including
 49:       the original version of the Work and any modifications or additions
 50:       to that Work or Derivative Works thereof, that is intentionally
 51:       submitted to Licensor for inclusion in the Work by the copyright owner
 52:       or by an individual or Legal Entity authorized to submit on behalf of
 53:       the copyright owner. For the purposes of this definition, "submitted"
 54:       means any form of electronic, verbal, or written communication sent
 55:       to the Licensor or its representatives, including but not limited to
 56:       communication on electronic mailing lists, source code control systems,
 57:       and issue tracking systems that are managed by, or on behalf of, the
 58:       Licensor for the purpose of discussing and improving the Work, but
 59:       excluding communication that is conspicuously marked or otherwise
 60:       designated in writing by the copyright owner as "Not a Contribution."
 61: 
 62:       "Contributor" shall mean Licensor and any individual or Legal Entity
 63:       on behalf of whom a Contribution has been received by Licensor and
 64:       subsequently incorporated within the Work.
 65: 
 66:    2. Grant of Copyright License. Subject to the terms and conditions of
 67:       this License, each Contributor hereby grants to You a perpetual,
 68:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 69:       copyright license to reproduce, prepare Derivative Works of,
 70:       publicly display, publicly perform, sublicense, and distribute the
 71:       Work and such Derivative Works in Source or Object form.
 72: 
 73:    3. Grant of Patent License. Subject to the terms and conditions of
 74:       this License, each Contributor hereby grants to You a perpetual,
 75:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 76:       (except as stated in this section) patent license to make, have made,
 77:       use, offer to sell, sell, import, and otherwise transfer the Work,
 78:       where such license applies only to those patent claims licensable
 79:       by such Contributor that are necessarily infringed by their
 80:       Contribution(s) alone or by combination of their Contribution(s)
 81:       with the Work to which such Contribution(s) was submitted. If You
 82:       institute patent litigation against any entity (including a
 83:       cross-claim or counterclaim in a lawsuit) alleging that the Work
 84:       or a Contribution incorporated within the Work constitutes direct
 85:       or contributory patent infringement, then any patent licenses
 86:       granted to You under this License for that Work shall terminate
 87:       as of the date such litigation is filed.
 88: 
 89:    4. Redistribution. You may reproduce and distribute copies of the
 90:       Work or Derivative Works thereof in any medium, with or without
 91:       modifications, and in Source or Object form, provided that You
 92:       meet the following conditions:
 93: 
 94:       (a) You must give any other recipients of the Work or
 95:           Derivative Works a copy of this License; and
 96: 
 97:       (b) You must cause any modified files to carry prominent notices
 98:           stating that You changed the files; and
 99: 
100:       (c) You must retain, in the Source form of any Derivative Works
101:           that You distribute, all copyright, patent, trademark, and
102:           attribution notices from the Source form of the Work,
103:           excluding those notices that do not pertain to any part of
104:           the Derivative Works; and
105: 
106:       (d) If the Work includes a "NOTICE" text file as part of its
107:           distribution, then any Derivative Works that You distribute must
108:           include a readable copy of the attribution notices contained
109:           within such NOTICE file, excluding those notices that do not
110:           pertain to any part of the Derivative Works, in at least one
111:           of the following places: within a NOTICE text file distributed
112:           as part of the Derivative Works; within the Source form or
113:           documentation, if provided along with the Derivative Works; or,
114:           within a display generated by the Derivative Works, if and
115:           wherever such third-party notices normally appear. The contents
116:           of the NOTICE file are for informational purposes only and
117:           do not modify the License. You may add Your own attribution
118:           notices within Derivative Works that You distribute, alongside
119:           or as an addendum to the NOTICE text from the Work, provided
120:           that such additional attribution notices cannot be construed
121:           as modifying the License.
122: 
123:       You may add Your own copyright statement to Your modifications and
124:       may provide additional or different license terms and conditions
125:       for use, reproduction, or distribution of Your modifications, or
126:       for any such Derivative Works as a whole, provided Your use,
127:       reproduction, and distribution of the Work otherwise complies with
128:       the conditions stated in this License.
129: 
130:    5. Submission of Contributions. Unless You explicitly state otherwise,
131:       any Contribution intentionally submitted for inclusion in the Work
132:       by You to the Licensor shall be under the terms and conditions of
133:       this License, without any additional terms or conditions.
134:       Notwithstanding the above, nothing herein shall supersede or modify
135:       the terms of any separate license agreement you may have executed
136:       with Licensor regarding such Contributions.
137: 
138:    6. Trademarks. This License does not grant permission to use the trade
139:       names, trademarks, service marks, or product names of the Licensor,
140:       except as required for reasonable and customary use in describing the
141:       origin of the Work and reproducing the content of the NOTICE file.
142: 
143:    7. Disclaimer of Warranty. Unless required by applicable law or
144:       agreed to in writing, Licensor provides the Work (and each
145:       Contributor provides its Contributions) on an "AS IS" BASIS,
146:       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
147:       implied, including, without limitation, any warranties or conditions
148:       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
149:       PARTICULAR PURPOSE. You are solely responsible for determining the
150:       appropriateness of using or redistributing the Work and assume any
151:       risks associated with Your exercise of permissions under this License.
152: 
153:    8. Limitation of Liability. In no event and under no legal theory,
154:       whether in tort (including negligence), contract, or otherwise,
155:       unless required by applicable law (such as deliberate and grossly
156:       negligent acts) or agreed to in writing, shall any Contributor be
157:       liable to You for damages, including any direct, indirect, special,
158:       incidental, or consequential damages of any character arising as a
159:       result of this License or out of the use or inability to use the
160:       Work (including but not limited to damages for loss of goodwill,
161:       work stoppage, computer failure or malfunction, or any and all
162:       other commercial damages or losses), even if such Contributor
163:       has been advised of the possibility of such damages.
164: 
165:    9. Accepting Warranty or Additional Liability. While redistributing
166:       the Work or Derivative Works thereof, You may choose to offer,
167:       and charge a fee for, acceptance of support, warranty, indemnity,
168:       or other liability obligations and/or rights consistent with this
169:       License. However, in accepting such obligations, You may act only
170:       on Your own behalf and on Your sole responsibility, not on behalf
171:       of any other Contributor, and only if You agree to indemnify,
172:       defend, and hold each Contributor harmless for any liability
173:       incurred by, or claims asserted against, such Contributor by reason
174:       of your accepting any such warranty or additional liability.
175: 
176:    END OF TERMS AND CONDITIONS
</file>

<file path=".agents/skills/frontend-design/SKILL.md">
 1: ---
 2: name: frontend-design
 3: description: Create distinctive, production-grade frontend interfaces with high design quality. Use this skill when the user asks to build web components, pages, artifacts, posters, or applications (examples include websites, landing pages, dashboards, React components, HTML/CSS layouts, or when styling/beautifying any web UI). Generates creative, polished code and UI design that avoids generic AI aesthetics.
 4: license: Complete terms in LICENSE.txt
 5: ---
 6: 
 7: This skill guides creation of distinctive, production-grade frontend interfaces that avoid generic "AI slop" aesthetics. Implement real working code with exceptional attention to aesthetic details and creative choices.
 8: 
 9: The user provides frontend requirements: a component, page, application, or interface to build. They may include context about the purpose, audience, or technical constraints.
10: 
11: ## Design Thinking
12: 
13: Before coding, understand the context and commit to a BOLD aesthetic direction:
14: - **Purpose**: What problem does this interface solve? Who uses it?
15: - **Tone**: Pick an extreme: brutally minimal, maximalist chaos, retro-futuristic, organic/natural, luxury/refined, playful/toy-like, editorial/magazine, brutalist/raw, art deco/geometric, soft/pastel, industrial/utilitarian, etc. There are so many flavors to choose from. Use these for inspiration but design one that is true to the aesthetic direction.
16: - **Constraints**: Technical requirements (framework, performance, accessibility).
17: - **Differentiation**: What makes this UNFORGETTABLE? What's the one thing someone will remember?
18: 
19: **CRITICAL**: Choose a clear conceptual direction and execute it with precision. Bold maximalism and refined minimalism both work - the key is intentionality, not intensity.
20: 
21: Then implement working code (HTML/CSS/JS, React, Vue, etc.) that is:
22: - Production-grade and functional
23: - Visually striking and memorable
24: - Cohesive with a clear aesthetic point-of-view
25: - Meticulously refined in every detail
26: 
27: ## Frontend Aesthetics Guidelines
28: 
29: Focus on:
30: - **Typography**: Choose fonts that are beautiful, unique, and interesting. Avoid generic fonts like Arial and Inter; opt instead for distinctive choices that elevate the frontend's aesthetics; unexpected, characterful font choices. Pair a distinctive display font with a refined body font.
31: - **Color & Theme**: Commit to a cohesive aesthetic. Use CSS variables for consistency. Dominant colors with sharp accents outperform timid, evenly-distributed palettes.
32: - **Motion**: Use animations for effects and micro-interactions. Prioritize CSS-only solutions for HTML. Use Motion library for React when available. Focus on high-impact moments: one well-orchestrated page load with staggered reveals (animation-delay) creates more delight than scattered micro-interactions. Use scroll-triggering and hover states that surprise.
33: - **Spatial Composition**: Unexpected layouts. Asymmetry. Overlap. Diagonal flow. Grid-breaking elements. Generous negative space OR controlled density.
34: - **Backgrounds & Visual Details**: Create atmosphere and depth rather than defaulting to solid colors. Add contextual effects and textures that match the overall aesthetic. Apply creative forms like gradient meshes, noise textures, geometric patterns, layered transparencies, dramatic shadows, decorative borders, custom cursors, and grain overlays.
35: 
36: NEVER use generic AI-generated aesthetics like overused font families (Inter, Roboto, Arial, system fonts), cliched color schemes (particularly purple gradients on white backgrounds), predictable layouts and component patterns, and cookie-cutter design that lacks context-specific character.
37: 
38: Interpret creatively and make unexpected choices that feel genuinely designed for the context. No design should be the same. Vary between light and dark themes, different fonts, different aesthetics. NEVER converge on common choices (Space Grotesk, for example) across generations.
39: 
40: **IMPORTANT**: Match implementation complexity to the aesthetic vision. Maximalist designs need elaborate code with extensive animations and effects. Minimalist or refined designs need restraint, precision, and careful attention to spacing, typography, and subtle details. Elegance comes from executing the vision well.
41: 
42: Remember: Claude is capable of extraordinary creative work. Don't hold back, show what can truly be created when thinking outside the box and committing fully to a distinctive vision.
</file>

<file path=".agents/skills/jules-tasks/SKILL.md">
 1: ---
 2: name: jules-tasks
 3: description: Skill for interacting with Jules AI for task and session management.
 4: ---
 5: 
 6: # `jules-tasks` Skill
 7: 
 8: Use this skill to audit Jules sessions.
 9: 
10: 1. `node .agent/scripts/jules-batch-review.js` (list tasks)
11: 2. `node .agent/scripts/jules-extract-patch.js <id>` (extract patch)
12: 3. `node .agent/scripts/jules-api.sh approve-plan <id>` (approve)
</file>

<file path=".agents/skills/qa-audit/SKILL.md">
  1: ---
  2: name: qa-audit
  3: description: "Use when performing a quality audit, security review, or robustness check of [FILL: main-source-file]. Covers XSS/innerHTML scanning, rule compliance verification, race condition analysis, config schema validation, and documentation drift detection. Produces a severity-classified report (Critical/High/Medium/Low)."
  4: ---
  5: 
  6: # QA-Audit
  7: 
  8: > Systematic full-scope quality audit for `[FILL: main-source-file]` and its config ecosystem.
  9: 
 10: ## Overview
 11: 
 12: This skill performs a comprehensive code quality audit covering security, robustness, rule compliance, and documentation drift. It produces a structured report with findings classified by severity.
 13: 
 14: The audit was designed based on real findings from production audits ‚Äî it catches XSS vectors, race conditions, missing error guards, SVG injection points, and documentation drift that automated tools miss.
 15: 
 16: ## When to Use
 17: 
 18: - **Periodic audits** ‚Äî after major features or before releases
 19: - **Security review** ‚Äî when checking for XSS, injection, or unsafe data flows
 20: - **Post-refactor verification** ‚Äî when code changed significantly
 21: - **Rule compliance check** ‚Äî when verifying code follows all project conventions
 22: - **Documentation drift detection** ‚Äî when code values may have changed without updating docs
 23: - **Pre-release quality gate** ‚Äî as part of the release-readiness workflow
 24: 
 25: ## The 9-Phase Process
 26: 
 27: | Phase | Focus | Output |
 28: | --- | --- | --- |
 29: | 0 | **Baseline** ‚Äî Run `npm test`, `config-stats`, avatar verification | Green baseline confirmed |
 30: | 1 | **Template Full Read** ‚Äî Every line of HTML, CSS, JS | Zone-by-zone understanding |
 31: | 2 | **Rule Compliance** ‚Äî Compare code against ALL 8+ rule files | Rule violation findings |
 32: | 3 | **Config Verification** ‚Äî Schema conformity, cross-references | Schema/data integrity findings |
 33: | 4 | **Security Scan** ‚Äî innerHTML/XSS, SVG injection, forbidden APIs | Security findings |
 34: | 5 | **Edge-Case & Robustness** ‚Äî Race conditions, error propagation, guards | Robustness findings |
 35: | 6 | **Documentation Drift** ‚Äî Code IST vs. documented SOLL values | Drift findings |
 36: | 7 | **Classification & Report** ‚Äî Severity assignment, structured audit document | `QA-AUDIT-{date}.md` |
 37: | 8 | **Fix Planning** ‚Äî Risk per finding, fix order, verification plan | Fix roadmap |
 38: 
 39: ## Scope Options
 40: 
 41: | Scope | Coverage |
 42: | --- | --- |
 43: | **Template-only** | `[FILL: main-source-file]` (HTML + CSS + JS) |
 44: | **Config-included** | Template + all `config/*.js` files |
 45: | **Full Scope Paranoid** | Template + Config + Agent Rules + Docs (recommended) |
 46: 
 47: ## Severity Definitions
 48: 
 49: | Severity | Criteria | Examples |
 50: | --- | --- | --- |
 51: | **CRITICAL** | Security vulnerability or data loss risk | XSS via innerHTML, credential exposure |
 52: | **HIGH** | Functional bug affecting users | UI freeze, broken navigation, lost state |
 53: | **MEDIUM** | Rule violation, robustness gap, doku drift | Missing guard, wrong value in docs |
 54: | **LOW** | Code hygiene, dead code, inconsistency | Unused variable, redundant style |
 55: 
 56: ## Key Checks (Quick Reference)
 57: 
 58: ### Security
 59: 
 60: - All `innerHTML` with config-/runtime-derived text uses `your-escape-fn()`
 61: - `buildFallbackDataUri()` sanitizes colors via `sanitizeColor()`
 62: - No `eval()`, `Function()`, `document.write()`, `postMessage`, `localStorage`
 63: 
 64: ### Rule Compliance
 65: 
 66: - `touch-action: manipulation` on every interactive element
 67: - `:hover` only inside `@media (hover: hover) and (pointer: fine)`
 68: - `-webkit-tap-highlight-color: transparent` on all tappable elements
 69: - All brand avatars via `your-asset-helper()` ‚Äî no manual `<img>`
 70: - All config uses IIFE + `Object.freeze`
 71: - Relative paths only ‚Äî no leading `/` or `./`
 72: 
 73: ### Robustness
 74: 
 75: - Navigation has transition lock (prevents rapid double-tap)
 76: - Confirm-item removal has isRemoving guard
 77: - `handleSubscribe()` has try-catch around Supabase block
 78: - Compatibility guard covers all required APIs
 79: 
 80: ### Documentation Drift
 81: 
 82: - `.app-container` padding value matches ALL rule files
 83: - `--app-chrome-height` value matches ALL rule files
 84: - Footer padding-bottom formula is consistent
 85: - Binding variant IDs are unchanged
 86: 
 87: ## Rule Files to Check (ALL of these)
 88: 
 89: | File | Key sections |
 90: | --- | --- |
 91: | `AGENTS.md` | CSS Rules, JS Rules, SVG/Avatar Rules, Layout Constraints |
 92: | `CLAUDE.md` | Critical Constraints, Do NOT |
 93: | `.github/copilot-instructions.md` | Always Do, Never Do |
 94: | `.claude/rules/css-touch.md` | Touch and hover rules |
 95: | `.claude/rules/template-rendering.md` | Padding, footer, avatar rendering |
 96: | `.claude/rules/config-patterns.md` | IIFE, Object.freeze, SSOT |
 97: | `.agent/rules/coding-standards.md` | CSS/JS rules |
 98: | `.agent/rules/-template.md` | File responsibilities, config schema |
 99: 
100: ## Report Output
101: 
102: Save to: `docs/docs--recommendation-template/QA-AUDIT-{YYYY-MM-DD}.md`
103: 
104: Update `QA-CHECKLIST.md` if new check categories are discovered.
105: 
106: ## Full Procedure
107: 
108: ‚Üí See `.agent/workflows/qa-audit.md` for the complete step-by-step guide including Phase details, checklists, report template, and fix planning methodology.
109: 
110: ‚Üí For Claude Code users: use the `/qa-audit` slash command.
</file>

<file path=".agents/skills/requesting-code-review/code-reviewer.md">
  1: # Code Review Agent
  2: 
  3: You are reviewing code changes for production readiness.
  4: 
  5: **Your task:**
  6: 1. Review {WHAT_WAS_IMPLEMENTED}
  7: 2. Compare against {PLAN_OR_REQUIREMENTS}
  8: 3. Check code quality, architecture, testing
  9: 4. Categorize issues by severity
 10: 5. Assess production readiness
 11: 
 12: ## What Was Implemented
 13: 
 14: {DESCRIPTION}
 15: 
 16: ## Requirements/Plan
 17: 
 18: {PLAN_REFERENCE}
 19: 
 20: ## Git Range to Review
 21: 
 22: **Base:** {BASE_SHA}
 23: **Head:** {HEAD_SHA}
 24: 
 25: ```bash
 26: git diff --stat {BASE_SHA}..{HEAD_SHA}
 27: git diff {BASE_SHA}..{HEAD_SHA}
 28: ```
 29: 
 30: ## Review Checklist
 31: 
 32: **Code Quality:**
 33: - Clean separation of concerns?
 34: - Proper error handling?
 35: - Type safety (if applicable)?
 36: - DRY principle followed?
 37: - Edge cases handled?
 38: 
 39: **Architecture:**
 40: - Sound design decisions?
 41: - Scalability considerations?
 42: - Performance implications?
 43: - Security concerns?
 44: 
 45: **Testing:**
 46: - Tests actually test logic (not mocks)?
 47: - Edge cases covered?
 48: - Integration tests where needed?
 49: - All tests passing?
 50: 
 51: **Requirements:**
 52: - All plan requirements met?
 53: - Implementation matches spec?
 54: - No scope creep?
 55: - Breaking changes documented?
 56: 
 57: **Production Readiness:**
 58: - Migration strategy (if schema changes)?
 59: - Backward compatibility considered?
 60: - Documentation complete?
 61: - No obvious bugs?
 62: 
 63: ## Output Format
 64: 
 65: ### Strengths
 66: [What's well done? Be specific.]
 67: 
 68: ### Issues
 69: 
 70: #### Critical (Must Fix)
 71: [Bugs, security issues, data loss risks, broken functionality]
 72: 
 73: #### Important (Should Fix)
 74: [Architecture problems, missing features, poor error handling, test gaps]
 75: 
 76: #### Minor (Nice to Have)
 77: [Code style, optimization opportunities, documentation improvements]
 78: 
 79: **For each issue:**
 80: - File:line reference
 81: - What's wrong
 82: - Why it matters
 83: - How to fix (if not obvious)
 84: 
 85: ### Recommendations
 86: [Improvements for code quality, architecture, or process]
 87: 
 88: ### Assessment
 89: 
 90: **Ready to merge?** [Yes/No/With fixes]
 91: 
 92: **Reasoning:** [Technical assessment in 1-2 sentences]
 93: 
 94: ## Critical Rules
 95: 
 96: **DO:**
 97: - Categorize by actual severity (not everything is Critical)
 98: - Be specific (file:line, not vague)
 99: - Explain WHY issues matter
100: - Acknowledge strengths
101: - Give clear verdict
102: 
103: **DON'T:**
104: - Say "looks good" without checking
105: - Mark nitpicks as Critical
106: - Give feedback on code you didn't review
107: - Be vague ("improve error handling")
108: - Avoid giving a clear verdict
109: 
110: ## Example Output
111: 
112: ```
113: ### Strengths
114: - Clean database schema with proper migrations (db.ts:15-42)
115: - Comprehensive test coverage (18 tests, all edge cases)
116: - Good error handling with fallbacks (summarizer.ts:85-92)
117: 
118: ### Issues
119: 
120: #### Important
121: 1. **Missing help text in CLI wrapper**
122:    - File: index-conversations:1-31
123:    - Issue: No --help flag, users won't discover --concurrency
124:    - Fix: Add --help case with usage examples
125: 
126: 2. **Date validation missing**
127:    - File: search.ts:25-27
128:    - Issue: Invalid dates silently return no results
129:    - Fix: Validate ISO format, throw error with example
130: 
131: #### Minor
132: 1. **Progress indicators**
133:    - File: indexer.ts:130
134:    - Issue: No "X of Y" counter for long operations
135:    - Impact: Users don't know how long to wait
136: 
137: ### Recommendations
138: - Add progress reporting for user experience
139: - Consider config file for excluded projects (portability)
140: 
141: ### Assessment
142: 
143: **Ready to merge: With fixes**
144: 
145: **Reasoning:** Core implementation is solid with good architecture and tests. Important issues (help text, date validation) are easily fixed and don't affect core functionality.
146: ```
</file>

<file path=".agents/skills/requesting-code-review/SKILL.md">
  1: ---
  2: name: requesting-code-review
  3: description: Use when completing tasks, implementing major features, or before merging to verify work meets requirements
  4: ---
  5: 
  6: # Requesting Code Review
  7: 
  8: Dispatch superpowers:code-reviewer subagent to catch issues before they cascade.
  9: 
 10: **Core principle:** Review early, review often.
 11: 
 12: ## When to Request Review
 13: 
 14: **Mandatory:**
 15: - After each task in subagent-driven development
 16: - After completing major feature
 17: - Before merge to main
 18: 
 19: **Optional but valuable:**
 20: - When stuck (fresh perspective)
 21: - Before refactoring (baseline check)
 22: - After fixing complex bug
 23: 
 24: ## How to Request
 25: 
 26: **1. Get git SHAs:**
 27: ```bash
 28: BASE_SHA=$(git rev-parse HEAD~1)  # or origin/main
 29: HEAD_SHA=$(git rev-parse HEAD)
 30: ```
 31: 
 32: **2. Dispatch code-reviewer subagent:**
 33: 
 34: Use Task tool with superpowers:code-reviewer type, fill template at `code-reviewer.md`
 35: 
 36: **Placeholders:**
 37: - `{WHAT_WAS_IMPLEMENTED}` - What you just built
 38: - `{PLAN_OR_REQUIREMENTS}` - What it should do
 39: - `{BASE_SHA}` - Starting commit
 40: - `{HEAD_SHA}` - Ending commit
 41: - `{DESCRIPTION}` - Brief summary
 42: 
 43: **3. Act on feedback:**
 44: - Fix Critical issues immediately
 45: - Fix Important issues before proceeding
 46: - Note Minor issues for later
 47: - Push back if reviewer is wrong (with reasoning)
 48: 
 49: ## Example
 50: 
 51: ```
 52: [Just completed Task 2: Add verification function]
 53: 
 54: You: Let me request code review before proceeding.
 55: 
 56: BASE_SHA=$(git log --oneline | grep "Task 1" | head -1 | awk '{print $1}')
 57: HEAD_SHA=$(git rev-parse HEAD)
 58: 
 59: [Dispatch superpowers:code-reviewer subagent]
 60:   WHAT_WAS_IMPLEMENTED: Verification and repair functions for conversation index
 61:   PLAN_OR_REQUIREMENTS: Task 2 from docs/plans/deployment-plan.md
 62:   BASE_SHA: a7981ec
 63:   HEAD_SHA: 3df7661
 64:   DESCRIPTION: Added verifyIndex() and repairIndex() with 4 issue types
 65: 
 66: [Subagent returns]:
 67:   Strengths: Clean architecture, real tests
 68:   Issues:
 69:     Important: Missing progress indicators
 70:     Minor: Magic number (100) for reporting interval
 71:   Assessment: Ready to proceed
 72: 
 73: You: [Fix progress indicators]
 74: [Continue to Task 3]
 75: ```
 76: 
 77: ## Integration with Workflows
 78: 
 79: **Subagent-Driven Development:**
 80: - Review after EACH task
 81: - Catch issues before they compound
 82: - Fix before moving to next task
 83: 
 84: **Executing Plans:**
 85: - Review after each batch (3 tasks)
 86: - Get feedback, apply, continue
 87: 
 88: **Ad-Hoc Development:**
 89: - Review before merge
 90: - Review when stuck
 91: 
 92: ## Red Flags
 93: 
 94: **Never:**
 95: - Skip review because "it's simple"
 96: - Ignore Critical issues
 97: - Proceed with unfixed Important issues
 98: - Argue with valid technical feedback
 99: 
100: **If reviewer wrong:**
101: - Push back with technical reasoning
102: - Show code/tests that prove it works
103: - Request clarification
104: 
105: See template at: requesting-code-review/code-reviewer.md
</file>

<file path=".agents/skills/skill-creator/LICENSE.txt">
  1: Apache License
  2:                            Version 2.0, January 2004
  3:                         http://www.apache.org/licenses/
  4: 
  5:    TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
  6: 
  7:    1. Definitions.
  8: 
  9:       "License" shall mean the terms and conditions for use, reproduction,
 10:       and distribution as defined by Sections 1 through 9 of this document.
 11: 
 12:       "Licensor" shall mean the copyright owner or entity authorized by
 13:       the copyright owner that is granting the License.
 14: 
 15:       "Legal Entity" shall mean the union of the acting entity and all
 16:       other entities that control, are controlled by, or are under common
 17:       control with that entity. For the purposes of this definition,
 18:       "control" means (i) the power, direct or indirect, to cause the
 19:       direction or management of such entity, whether by contract or
 20:       otherwise, or (ii) ownership of fifty percent (50%) or more of the
 21:       outstanding shares, or (iii) beneficial ownership of such entity.
 22: 
 23:       "You" (or "Your") shall mean an individual or Legal Entity
 24:       exercising permissions granted by this License.
 25: 
 26:       "Source" form shall mean the preferred form for making modifications,
 27:       including but not limited to software source code, documentation
 28:       source, and configuration files.
 29: 
 30:       "Object" form shall mean any form resulting from mechanical
 31:       transformation or translation of a Source form, including but
 32:       not limited to compiled object code, generated documentation,
 33:       and conversions to other media types.
 34: 
 35:       "Work" shall mean the work of authorship, whether in Source or
 36:       Object form, made available under the License, as indicated by a
 37:       copyright notice that is included in or attached to the work
 38:       (an example is provided in the Appendix below).
 39: 
 40:       "Derivative Works" shall mean any work, whether in Source or Object
 41:       form, that is based on (or derived from) the Work and for which the
 42:       editorial revisions, annotations, elaborations, or other modifications
 43:       represent, as a whole, an original work of authorship. For the purposes
 44:       of this License, Derivative Works shall not include works that remain
 45:       separable from, or merely link (or bind by name) to the interfaces of,
 46:       the Work and Derivative Works thereof.
 47: 
 48:       "Contribution" shall mean any work of authorship, including
 49:       the original version of the Work and any modifications or additions
 50:       to that Work or Derivative Works thereof, that is intentionally
 51:       submitted to Licensor for inclusion in the Work by the copyright owner
 52:       or by an individual or Legal Entity authorized to submit on behalf of
 53:       the copyright owner. For the purposes of this definition, "submitted"
 54:       means any form of electronic, verbal, or written communication sent
 55:       to the Licensor or its representatives, including but not limited to
 56:       communication on electronic mailing lists, source code control systems,
 57:       and issue tracking systems that are managed by, or on behalf of, the
 58:       Licensor for the purpose of discussing and improving the Work, but
 59:       excluding communication that is conspicuously marked or otherwise
 60:       designated in writing by the copyright owner as "Not a Contribution."
 61: 
 62:       "Contributor" shall mean Licensor and any individual or Legal Entity
 63:       on behalf of whom a Contribution has been received by Licensor and
 64:       subsequently incorporated within the Work.
 65: 
 66:    2. Grant of Copyright License. Subject to the terms and conditions of
 67:       this License, each Contributor hereby grants to You a perpetual,
 68:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 69:       copyright license to reproduce, prepare Derivative Works of,
 70:       publicly display, publicly perform, sublicense, and distribute the
 71:       Work and such Derivative Works in Source or Object form.
 72: 
 73:    3. Grant of Patent License. Subject to the terms and conditions of
 74:       this License, each Contributor hereby grants to You a perpetual,
 75:       worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 76:       (except as stated in this section) patent license to make, have made,
 77:       use, offer to sell, sell, import, and otherwise transfer the Work,
 78:       where such license applies only to those patent claims licensable
 79:       by such Contributor that are necessarily infringed by their
 80:       Contribution(s) alone or by combination of their Contribution(s)
 81:       with the Work to which such Contribution(s) was submitted. If You
 82:       institute patent litigation against any entity (including a
 83:       cross-claim or counterclaim in a lawsuit) alleging that the Work
 84:       or a Contribution incorporated within the Work constitutes direct
 85:       or contributory patent infringement, then any patent licenses
 86:       granted to You under this License for that Work shall terminate
 87:       as of the date such litigation is filed.
 88: 
 89:    4. Redistribution. You may reproduce and distribute copies of the
 90:       Work or Derivative Works thereof in any medium, with or without
 91:       modifications, and in Source or Object form, provided that You
 92:       meet the following conditions:
 93: 
 94:       (a) You must give any other recipients of the Work or
 95:           Derivative Works a copy of this License; and
 96: 
 97:       (b) You must cause any modified files to carry prominent notices
 98:           stating that You changed the files; and
 99: 
100:       (c) You must retain, in the Source form of any Derivative Works
101:           that You distribute, all copyright, patent, trademark, and
102:           attribution notices from the Source form of the Work,
103:           excluding those notices that do not pertain to any part of
104:           the Derivative Works; and
105: 
106:       (d) If the Work includes a "NOTICE" text file as part of its
107:           distribution, then any Derivative Works that You distribute must
108:           include a readable copy of the attribution notices contained
109:           within such NOTICE file, excluding those notices that do not
110:           pertain to any part of the Derivative Works, in at least one
111:           of the following places: within a NOTICE text file distributed
112:           as part of the Derivative Works; within the Source form or
113:           documentation, if provided along with the Derivative Works; or,
114:           within a display generated by the Derivative Works, if and
115:           wherever such third-party notices normally appear. The contents
116:           of the NOTICE file are for informational purposes only and
117:           do not modify the License. You may add Your own attribution
118:           notices within Derivative Works that You distribute, alongside
119:           or as an addendum to the NOTICE text from the Work, provided
120:           that such additional attribution notices cannot be construed
121:           as modifying the License.
122: 
123:       You may add Your own copyright statement to Your modifications and
124:       may provide additional or different license terms and conditions
125:       for use, reproduction, or distribution of Your modifications, or
126:       for any such Derivative Works as a whole, provided Your use,
127:       reproduction, and distribution of the Work otherwise complies with
128:       the conditions stated in this License.
129: 
130:    5. Submission of Contributions. Unless You explicitly state otherwise,
131:       any Contribution intentionally submitted for inclusion in the Work
132:       by You to the Licensor shall be under the terms and conditions of
133:       this License, without any additional terms or conditions.
134:       Notwithstanding the above, nothing herein shall supersede or modify
135:       the terms of any separate license agreement you may have executed
136:       with Licensor regarding such Contributions.
137: 
138:    6. Trademarks. This License does not grant permission to use the trade
139:       names, trademarks, service marks, or product names of the Licensor,
140:       except as required for reasonable and customary use in describing the
141:       origin of the Work and reproducing the content of the NOTICE file.
142: 
143:    7. Disclaimer of Warranty. Unless required by applicable law or
144:       agreed to in writing, Licensor provides the Work (and each
145:       Contributor provides its Contributions) on an "AS IS" BASIS,
146:       WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
147:       implied, including, without limitation, any warranties or conditions
148:       of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
149:       PARTICULAR PURPOSE. You are solely responsible for determining the
150:       appropriateness of using or redistributing the Work and assume any
151:       risks associated with Your exercise of permissions under this License.
152: 
153:    8. Limitation of Liability. In no event and under no legal theory,
154:       whether in tort (including negligence), contract, or otherwise,
155:       unless required by applicable law (such as deliberate and grossly
156:       negligent acts) or agreed to in writing, shall any Contributor be
157:       liable to You for damages, including any direct, indirect, special,
158:       incidental, or consequential damages of any character arising as a
159:       result of this License or out of the use or inability to use the
160:       Work (including but not limited to damages for loss of goodwill,
161:       work stoppage, computer failure or malfunction, or any and all
162:       other commercial damages or losses), even if such Contributor
163:       has been advised of the possibility of such damages.
164: 
165:    9. Accepting Warranty or Additional Liability. While redistributing
166:       the Work or Derivative Works thereof, You may choose to offer,
167:       and charge a fee for, acceptance of support, warranty, indemnity,
168:       or other liability obligations and/or rights consistent with this
169:       License. However, in accepting such obligations, You may act only
170:       on Your own behalf and on Your sole responsibility, not on behalf
171:       of any other Contributor, and only if You agree to indemnify,
172:       defend, and hold each Contributor harmless for any liability
173:       incurred by, or claims asserted against, such Contributor by reason
174:       of your accepting any such warranty or additional liability.
175: 
176:    END OF TERMS AND CONDITIONS
177: 
178:    APPENDIX: How to apply the Apache License to your work.
179: 
180:       To apply the Apache License to your work, attach the following
181:       boilerplate notice, with the fields enclosed by brackets "[]"
182:       replaced with your own identifying information. (Don't include
183:       the brackets!)  The text should be enclosed in the appropriate
184:       comment syntax for the file format. We also recommend that a
185:       file or class name and description of purpose be included on the
186:       same "printed page" as the copyright notice for easier
187:       identification within third-party archives.
188: 
189:    Copyright [yyyy] [name of copyright owner]
190: 
191:    Licensed under the Apache License, Version 2.0 (the "License");
192:    you may not use this file except in compliance with the License.
193:    You may obtain a copy of the License at
194: 
195:        http://www.apache.org/licenses/LICENSE-2.0
196: 
197:    Unless required by applicable law or agreed to in writing, software
198:    distributed under the License is distributed on an "AS IS" BASIS,
199:    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
200:    See the License for the specific language governing permissions and
201:    limitations under the License.
</file>

<file path=".agents/skills/skill-creator/references/output-patterns.md">
 1: # Output Patterns
 2: 
 3: Use these patterns when skills need to produce consistent, high-quality output.
 4: 
 5: ## Template Pattern
 6: 
 7: Provide templates for output format. Match the level of strictness to your needs.
 8: 
 9: **For strict requirements (like API responses or data formats):**
10: 
11: ```markdown
12: ## Report structure
13: 
14: ALWAYS use this exact template structure:
15: 
16: # [Analysis Title]
17: 
18: ## Executive summary
19: [One-paragraph overview of key findings]
20: 
21: ## Key findings
22: - Finding 1 with supporting data
23: - Finding 2 with supporting data
24: - Finding 3 with supporting data
25: 
26: ## Recommendations
27: 1. Specific actionable recommendation
28: 2. Specific actionable recommendation
29: ```
30: 
31: **For flexible guidance (when adaptation is useful):**
32: 
33: ```markdown
34: ## Report structure
35: 
36: Here is a sensible default format, but use your best judgment:
37: 
38: # [Analysis Title]
39: 
40: ## Executive summary
41: [Overview]
42: 
43: ## Key findings
44: [Adapt sections based on what you discover]
45: 
46: ## Recommendations
47: [Tailor to the specific context]
48: 
49: Adjust sections as needed for the specific analysis type.
50: ```
51: 
52: ## Examples Pattern
53: 
54: For skills where output quality depends on seeing examples, provide input/output pairs:
55: 
56: ```markdown
57: ## Commit message format
58: 
59: Generate commit messages following these examples:
60: 
61: **Example 1:**
62: Input: Added user authentication with JWT tokens
63: Output:
64: ```
65: feat(auth): implement JWT-based authentication
66: 
67: Add login endpoint and token validation middleware
68: ```
69: 
70: **Example 2:**
71: Input: Fixed bug where dates displayed incorrectly in reports
72: Output:
73: ```
74: fix(reports): correct date formatting in timezone conversion
75: 
76: Use UTC timestamps consistently across report generation
77: ```
78: 
79: Follow this style: type(scope): brief description, then detailed explanation.
80: ```
81: 
82: Examples help Claude understand the desired style and level of detail more clearly than descriptions alone.
</file>

<file path=".agents/skills/skill-creator/references/workflows.md">
 1: # Workflow Patterns
 2: 
 3: ## Sequential Workflows
 4: 
 5: For complex tasks, break operations into clear, sequential steps. It is often helpful to give Claude an overview of the process towards the beginning of SKILL.md:
 6: 
 7: ```markdown
 8: Filling a PDF form involves these steps:
 9: 
10: 1. Analyze the form (run analyze_form.py)
11: 2. Create field mapping (edit fields.json)
12: 3. Validate mapping (run validate_fields.py)
13: 4. Fill the form (run fill_form.py)
14: 5. Verify output (run verify_output.py)
15: ```
16: 
17: ## Conditional Workflows
18: 
19: For tasks with branching logic, guide Claude through decision points:
20: 
21: ```markdown
22: 1. Determine the modification type:
23:    **Creating new content?** ‚Üí Follow "Creation workflow" below
24:    **Editing existing content?** ‚Üí Follow "Editing workflow" below
25: 
26: 2. Creation workflow: [steps]
27: 3. Editing workflow: [steps]
28: ```
</file>

<file path=".agents/skills/skill-creator/scripts/init_skill.py">
  1: #!/usr/bin/env python3
  2: """
  3: Skill Initializer - Creates a new skill from template
  4: Usage:
  5:     init_skill.py <skill-name> --path <path>
  6: Examples:
  7:     init_skill.py my-new-skill --path skills/public
  8:     init_skill.py my-api-helper --path skills/private
  9:     init_skill.py custom-skill --path /custom/location
 10: """
 11: import sys
 12: from pathlib import Path
 13: SKILL_TEMPLATE = """---
 14: name: {skill_name}
 15: description: [TODO: Complete and informative explanation of what the skill does and when to use it. Include WHEN to use this skill - specific scenarios, file types, or tasks that trigger it.]
 16: ---
 17: # {skill_title}
 18: ## Overview
 19: [TODO: 1-2 sentences explaining what this skill enables]
 20: ## Structuring This Skill
 21: [TODO: Choose the structure that best fits this skill's purpose. Common patterns:
 22: **1. Workflow-Based** (best for sequential processes)
 23: - Works well when there are clear step-by-step procedures
 24: - Example: DOCX skill with "Workflow Decision Tree" ‚Üí "Reading" ‚Üí "Creating" ‚Üí "Editing"
 25: - Structure: ## Overview ‚Üí ## Workflow Decision Tree ‚Üí ## Step 1 ‚Üí ## Step 2...
 26: **2. Task-Based** (best for tool collections)
 27: - Works well when the skill offers different operations/capabilities
 28: - Example: PDF skill with "Quick Start" ‚Üí "Merge PDFs" ‚Üí "Split PDFs" ‚Üí "Extract Text"
 29: - Structure: ## Overview ‚Üí ## Quick Start ‚Üí ## Task Category 1 ‚Üí ## Task Category 2...
 30: **3. Reference/Guidelines** (best for standards or specifications)
 31: - Works well for brand guidelines, coding standards, or requirements
 32: - Example: Brand styling with "Brand Guidelines" ‚Üí "Colors" ‚Üí "Typography" ‚Üí "Features"
 33: - Structure: ## Overview ‚Üí ## Guidelines ‚Üí ## Specifications ‚Üí ## Usage...
 34: **4. Capabilities-Based** (best for integrated systems)
 35: - Works well when the skill provides multiple interrelated features
 36: - Example: Product Management with "Core Capabilities" ‚Üí numbered capability list
 37: - Structure: ## Overview ‚Üí ## Core Capabilities ‚Üí ### 1. Feature ‚Üí ### 2. Feature...
 38: Patterns can be mixed and matched as needed. Most skills combine patterns (e.g., start with task-based, add workflow for complex operations).
 39: Delete this entire "Structuring This Skill" section when done - it's just guidance.]
 40: ## [TODO: Replace with the first main section based on chosen structure]
 41: [TODO: Add content here. See examples in existing skills:
 42: - Code samples for technical skills
 43: - Decision trees for complex workflows
 44: - Concrete examples with realistic user requests
 45: - References to scripts/templates/references as needed]
 46: ## Resources
 47: This skill includes example resource directories that demonstrate how to organize different types of bundled resources:
 48: ### scripts/
 49: Executable code (Python/Bash/etc.) that can be run directly to perform specific operations.
 50: **Examples from other skills:**
 51: - PDF skill: `fill_fillable_fields.py`, `extract_form_field_info.py` - utilities for PDF manipulation
 52: - DOCX skill: `document.py`, `utilities.py` - Python modules for document processing
 53: **Appropriate for:** Python scripts, shell scripts, or any executable code that performs automation, data processing, or specific operations.
 54: **Note:** Scripts may be executed without loading into context, but can still be read by Claude for patching or environment adjustments.
 55: ### references/
 56: Documentation and reference material intended to be loaded into context to inform Claude's process and thinking.
 57: **Examples from other skills:**
 58: - Product management: `communication.md`, `context_building.md` - detailed workflow guides
 59: - BigQuery: API reference documentation and query examples
 60: - Finance: Schema documentation, company policies
 61: **Appropriate for:** In-depth documentation, API references, database schemas, comprehensive guides, or any detailed information that Claude should reference while working.
 62: ### assets/
 63: Files not intended to be loaded into context, but rather used within the output Claude produces.
 64: **Examples from other skills:**
 65: - Brand styling: PowerPoint template files (.pptx), logo files
 66: - Frontend builder: HTML/React boilerplate project directories
 67: - Typography: Font files (.ttf, .woff2)
 68: **Appropriate for:** Templates, boilerplate code, document templates, images, icons, fonts, or any files meant to be copied or used in the final output.
 69: ---
 70: **Any unneeded directories can be deleted.** Not every skill requires all three types of resources.
 71: """
 72: EXAMPLE_SCRIPT = '''#!/usr/bin/env python3
 73: """
 74: Example helper script for {skill_name}
 75: This is a placeholder script that can be executed directly.
 76: Replace with actual implementation or delete if not needed.
 77: Example real scripts from other skills:
 78: - pdf/scripts/fill_fillable_fields.py - Fills PDF form fields
 79: - pdf/scripts/convert_pdf_to_images.py - Converts PDF pages to images
 80: """
 81: def main():
 82:     print("This is an example script for {skill_name}")
 83:     # TODO: Add actual script logic here
 84:     # This could be data processing, file conversion, API calls, etc.
 85: if __name__ == "__main__":
 86:     main()
 87: '''
 88: EXAMPLE_REFERENCE = """# Reference Documentation for {skill_title}
 89: This is a placeholder for detailed reference documentation.
 90: Replace with actual reference content or delete if not needed.
 91: Example real reference docs from other skills:
 92: - product-management/references/communication.md - Comprehensive guide for status updates
 93: - product-management/references/context_building.md - Deep-dive on gathering context
 94: - bigquery/references/ - API references and query examples
 95: ## When Reference Docs Are Useful
 96: Reference docs are ideal for:
 97: - Comprehensive API documentation
 98: - Detailed workflow guides
 99: - Complex multi-step processes
100: - Information too lengthy for main SKILL.md
101: - Content that's only needed for specific use cases
102: ## Structure Suggestions
103: ### API Reference Example
104: - Overview
105: - Authentication
106: - Endpoints with examples
107: - Error codes
108: - Rate limits
109: ### Workflow Guide Example
110: - Prerequisites
111: - Step-by-step instructions
112: - Common patterns
113: - Troubleshooting
114: - Best practices
115: """
116: EXAMPLE_ASSET = """# Example Asset File
117: This placeholder represents where asset files would be stored.
118: Replace with actual asset files (templates, images, fonts, etc.) or delete if not needed.
119: Asset files are NOT intended to be loaded into context, but rather used within
120: the output Claude produces.
121: Example asset files from other skills:
122: - Brand guidelines: logo.png, slides_template.pptx
123: - Frontend builder: hello-world/ directory with HTML/React boilerplate
124: - Typography: custom-font.ttf, font-family.woff2
125: - Data: sample_data.csv, test_dataset.json
126: ## Common Asset Types
127: - Templates: .pptx, .docx, boilerplate directories
128: - Images: .png, .jpg, .svg, .gif
129: - Fonts: .ttf, .otf, .woff, .woff2
130: - Boilerplate code: Project directories, starter files
131: - Icons: .ico, .svg
132: - Data files: .csv, .json, .xml, .yaml
133: Note: This is a text placeholder. Actual assets can be any file type.
134: """
135: def title_case_skill_name(skill_name):
136:     """Convert hyphenated skill name to Title Case for display."""
137:     return ' '.join(word.capitalize() for word in skill_name.split('-'))
138: def init_skill(skill_name, path):
139:     """
140:     Initialize a new skill directory with template SKILL.md.
141:     Args:
142:         skill_name: Name of the skill
143:         path: Path where the skill directory should be created
144:     Returns:
145:         Path to created skill directory, or None if error
146:     """
147:     # Determine skill directory path
148:     skill_dir = Path(path).resolve() / skill_name
149:     # Check if directory already exists
150:     if skill_dir.exists():
151:         print(f"‚ùå Error: Skill directory already exists: {skill_dir}")
152:         return None
153:     # Create skill directory
154:     try:
155:         skill_dir.mkdir(parents=True, exist_ok=False)
156:         print(f"‚úÖ Created skill directory: {skill_dir}")
157:     except Exception as e:
158:         print(f"‚ùå Error creating directory: {e}")
159:         return None
160:     # Create SKILL.md from template
161:     skill_title = title_case_skill_name(skill_name)
162:     skill_content = SKILL_TEMPLATE.format(
163:         skill_name=skill_name,
164:         skill_title=skill_title
165:     )
166:     skill_md_path = skill_dir / 'SKILL.md'
167:     try:
168:         skill_md_path.write_text(skill_content)
169:         print("‚úÖ Created SKILL.md")
170:     except Exception as e:
171:         print(f"‚ùå Error creating SKILL.md: {e}")
172:         return None
173:     # Create resource directories with example files
174:     try:
175:         # Create scripts/ directory with example script
176:         scripts_dir = skill_dir / 'scripts'
177:         scripts_dir.mkdir(exist_ok=True)
178:         example_script = scripts_dir / 'example.py'
179:         example_script.write_text(EXAMPLE_SCRIPT.format(skill_name=skill_name))
180:         example_script.chmod(0o755)
181:         print("‚úÖ Created scripts/example.py")
182:         # Create references/ directory with example reference doc
183:         references_dir = skill_dir / 'references'
184:         references_dir.mkdir(exist_ok=True)
185:         example_reference = references_dir / 'api_reference.md'
186:         example_reference.write_text(EXAMPLE_REFERENCE.format(skill_title=skill_title))
187:         print("‚úÖ Created references/api_reference.md")
188:         # Create assets/ directory with example asset placeholder
189:         assets_dir = skill_dir / 'assets'
190:         assets_dir.mkdir(exist_ok=True)
191:         example_asset = assets_dir / 'example_asset.txt'
192:         example_asset.write_text(EXAMPLE_ASSET)
193:         print("‚úÖ Created assets/example_asset.txt")
194:     except Exception as e:
195:         print(f"‚ùå Error creating resource directories: {e}")
196:         return None
197:     # Print next steps
198:     print(f"\n‚úÖ Skill '{skill_name}' initialized successfully at {skill_dir}")
199:     print("\nNext steps:")
200:     print("1. Edit SKILL.md to complete the TODO items and update the description")
201:     print("2. Customize or delete the example files in scripts/, references/, and assets/")
202:     print("3. Run the validator when ready to check the skill structure")
203:     return skill_dir
204: def main():
205:     if len(sys.argv) < 4 or sys.argv[2] != '--path':
206:         print("Usage: init_skill.py <skill-name> --path <path>")
207:         print("\nSkill name requirements:")
208:         print("  - Kebab-case identifier (e.g., 'my-data-analyzer')")
209:         print("  - Lowercase letters, digits, and hyphens only")
210:         print("  - Max 64 characters")
211:         print("  - Must match directory name exactly")
212:         print("\nExamples:")
213:         print("  init_skill.py my-new-skill --path skills/public")
214:         print("  init_skill.py my-api-helper --path skills/private")
215:         print("  init_skill.py custom-skill --path /custom/location")
216:         sys.exit(1)
217:     skill_name = sys.argv[1]
218:     path = sys.argv[3]
219:     print(f"üöÄ Initializing skill: {skill_name}")
220:     print(f"   Location: {path}")
221:     print()
222:     result = init_skill(skill_name, path)
223:     if result:
224:         sys.exit(0)
225:     else:
226:         sys.exit(1)
227: if __name__ == "__main__":
228:     main()
</file>

<file path=".agents/skills/skill-creator/scripts/package_skill.py">
 1: #!/usr/bin/env python3
 2: """
 3: Skill Packager - Creates a distributable .skill file of a skill folder
 4: Usage:
 5:     python utils/package_skill.py <path/to/skill-folder> [output-directory]
 6: Example:
 7:     python utils/package_skill.py skills/public/my-skill
 8:     python utils/package_skill.py skills/public/my-skill ./dist
 9: """
10: import sys
11: import zipfile
12: from pathlib import Path
13: from quick_validate import validate_skill
14: def package_skill(skill_path, output_dir=None):
15:     """
16:     Package a skill folder into a .skill file.
17:     Args:
18:         skill_path: Path to the skill folder
19:         output_dir: Optional output directory for the .skill file (defaults to current directory)
20:     Returns:
21:         Path to the created .skill file, or None if error
22:     """
23:     skill_path = Path(skill_path).resolve()
24:     # Validate skill folder exists
25:     if not skill_path.exists():
26:         print(f"‚ùå Error: Skill folder not found: {skill_path}")
27:         return None
28:     if not skill_path.is_dir():
29:         print(f"‚ùå Error: Path is not a directory: {skill_path}")
30:         return None
31:     # Validate SKILL.md exists
32:     skill_md = skill_path / "SKILL.md"
33:     if not skill_md.exists():
34:         print(f"‚ùå Error: SKILL.md not found in {skill_path}")
35:         return None
36:     # Run validation before packaging
37:     print("üîç Validating skill...")
38:     valid, message = validate_skill(skill_path)
39:     if not valid:
40:         print(f"‚ùå Validation failed: {message}")
41:         print("   Please fix the validation errors before packaging.")
42:         return None
43:     print(f"‚úÖ {message}\n")
44:     # Determine output location
45:     skill_name = skill_path.name
46:     if output_dir:
47:         output_path = Path(output_dir).resolve()
48:         output_path.mkdir(parents=True, exist_ok=True)
49:     else:
50:         output_path = Path.cwd()
51:     skill_filename = output_path / f"{skill_name}.skill"
52:     # Create the .skill file (zip format)
53:     try:
54:         with zipfile.ZipFile(skill_filename, 'w', zipfile.ZIP_DEFLATED) as zipf:
55:             # Walk through the skill directory
56:             for file_path in skill_path.rglob('*'):
57:                 if file_path.is_file():
58:                     # Calculate the relative path within the zip
59:                     arcname = file_path.relative_to(skill_path.parent)
60:                     zipf.write(file_path, arcname)
61:                     print(f"  Added: {arcname}")
62:         print(f"\n‚úÖ Successfully packaged skill to: {skill_filename}")
63:         return skill_filename
64:     except Exception as e:
65:         print(f"‚ùå Error creating .skill file: {e}")
66:         return None
67: def main():
68:     if len(sys.argv) < 2:
69:         print("Usage: python utils/package_skill.py <path/to/skill-folder> [output-directory]")
70:         print("\nExample:")
71:         print("  python utils/package_skill.py skills/public/my-skill")
72:         print("  python utils/package_skill.py skills/public/my-skill ./dist")
73:         sys.exit(1)
74:     skill_path = sys.argv[1]
75:     output_dir = sys.argv[2] if len(sys.argv) > 2 else None
76:     print(f"üì¶ Packaging skill: {skill_path}")
77:     if output_dir:
78:         print(f"   Output directory: {output_dir}")
79:     print()
80:     result = package_skill(skill_path, output_dir)
81:     if result:
82:         sys.exit(0)
83:     else:
84:         sys.exit(1)
85: if __name__ == "__main__":
86:     main()
</file>

<file path=".agents/skills/skill-creator/scripts/quick_validate.py">
 1: #!/usr/bin/env python3
 2: """
 3: Quick validation script for skills - minimal version
 4: """
 5: import sys
 6: import os
 7: import re
 8: import yaml
 9: from pathlib import Path
10: def validate_skill(skill_path):
11:     """Basic validation of a skill"""
12:     skill_path = Path(skill_path)
13:     # Check SKILL.md exists
14:     skill_md = skill_path / 'SKILL.md'
15:     if not skill_md.exists():
16:         return False, "SKILL.md not found"
17:     # Read and validate frontmatter
18:     content = skill_md.read_text()
19:     if not content.startswith('---'):
20:         return False, "No YAML frontmatter found"
21:     # Extract frontmatter
22:     match = re.match(r'^---\n(.*?)\n---', content, re.DOTALL)
23:     if not match:
24:         return False, "Invalid frontmatter format"
25:     frontmatter_text = match.group(1)
26:     # Parse YAML frontmatter
27:     try:
28:         frontmatter = yaml.safe_load(frontmatter_text)
29:         if not isinstance(frontmatter, dict):
30:             return False, "Frontmatter must be a YAML dictionary"
31:     except yaml.YAMLError as e:
32:         return False, f"Invalid YAML in frontmatter: {e}"
33:     # Define allowed properties
34:     ALLOWED_PROPERTIES = {'name', 'description', 'license', 'allowed-tools', 'metadata', 'compatibility'}
35:     # Check for unexpected properties (excluding nested keys under metadata)
36:     unexpected_keys = set(frontmatter.keys()) - ALLOWED_PROPERTIES
37:     if unexpected_keys:
38:         return False, (
39:             f"Unexpected key(s) in SKILL.md frontmatter: {', '.join(sorted(unexpected_keys))}. "
40:             f"Allowed properties are: {', '.join(sorted(ALLOWED_PROPERTIES))}"
41:         )
42:     # Check required fields
43:     if 'name' not in frontmatter:
44:         return False, "Missing 'name' in frontmatter"
45:     if 'description' not in frontmatter:
46:         return False, "Missing 'description' in frontmatter"
47:     # Extract name for validation
48:     name = frontmatter.get('name', '')
49:     if not isinstance(name, str):
50:         return False, f"Name must be a string, got {type(name).__name__}"
51:     name = name.strip()
52:     if name:
53:         # Check naming convention (kebab-case: lowercase with hyphens)
54:         if not re.match(r'^[a-z0-9-]+$', name):
55:             return False, f"Name '{name}' should be kebab-case (lowercase letters, digits, and hyphens only)"
56:         if name.startswith('-') or name.endswith('-') or '--' in name:
57:             return False, f"Name '{name}' cannot start/end with hyphen or contain consecutive hyphens"
58:         # Check name length (max 64 characters per spec)
59:         if len(name) > 64:
60:             return False, f"Name is too long ({len(name)} characters). Maximum is 64 characters."
61:     # Extract and validate description
62:     description = frontmatter.get('description', '')
63:     if not isinstance(description, str):
64:         return False, f"Description must be a string, got {type(description).__name__}"
65:     description = description.strip()
66:     if description:
67:         # Check for angle brackets
68:         if '<' in description or '>' in description:
69:             return False, "Description cannot contain angle brackets (< or >)"
70:         # Check description length (max 1024 characters per spec)
71:         if len(description) > 1024:
72:             return False, f"Description is too long ({len(description)} characters). Maximum is 1024 characters."
73:     # Validate compatibility field if present (optional)
74:     compatibility = frontmatter.get('compatibility', '')
75:     if compatibility:
76:         if not isinstance(compatibility, str):
77:             return False, f"Compatibility must be a string, got {type(compatibility).__name__}"
78:         if len(compatibility) > 500:
79:             return False, f"Compatibility is too long ({len(compatibility)} characters). Maximum is 500 characters."
80:     return True, "Skill is valid!"
81: if __name__ == "__main__":
82:     if len(sys.argv) != 2:
83:         print("Usage: python quick_validate.py <skill_directory>")
84:         sys.exit(1)
85:     valid, message = validate_skill(sys.argv[1])
86:     print(message)
87:     sys.exit(0 if valid else 1)
</file>

<file path=".agents/skills/systematic-debugging/condition-based-waiting-example.ts">
  1: // Complete implementation of condition-based waiting utilities
  2: // From: Lace test infrastructure improvements (2025-10-03)
  3: // Context: Fixed 15 flaky tests by replacing arbitrary timeouts
  4: import type { ThreadManager } from '~/threads/thread-manager';
  5: import type { LaceEvent, LaceEventType } from '~/threads/types';
  6: /**
  7:  * Wait for a specific event type to appear in thread
  8:  *
  9:  * @param threadManager - The thread manager to query
 10:  * @param threadId - Thread to check for events
 11:  * @param eventType - Type of event to wait for
 12:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 13:  * @returns Promise resolving to the first matching event
 14:  *
 15:  * Example:
 16:  *   await waitForEvent(threadManager, agentThreadId, 'TOOL_RESULT');
 17:  */
 18: export function waitForEvent(
 19:   threadManager: ThreadManager,
 20:   threadId: string,
 21:   eventType: LaceEventType,
 22:   timeoutMs = 5000
 23: ): Promise<LaceEvent> {
 24:   return new Promise((resolve, reject) => {
 25:     const startTime = Date.now();
 26:     const check = () => {
 27:       const events = threadManager.getEvents(threadId);
 28:       const event = events.find((e) => e.type === eventType);
 29:       if (event) {
 30:         resolve(event);
 31:       } else if (Date.now() - startTime > timeoutMs) {
 32:         reject(new Error(`Timeout waiting for ${eventType} event after ${timeoutMs}ms`));
 33:       } else {
 34:         setTimeout(check, 10); // Poll every 10ms for efficiency
 35:       }
 36:     };
 37:     check();
 38:   });
 39: }
 40: /**
 41:  * Wait for a specific number of events of a given type
 42:  *
 43:  * @param threadManager - The thread manager to query
 44:  * @param threadId - Thread to check for events
 45:  * @param eventType - Type of event to wait for
 46:  * @param count - Number of events to wait for
 47:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 48:  * @returns Promise resolving to all matching events once count is reached
 49:  *
 50:  * Example:
 51:  *   // Wait for 2 AGENT_MESSAGE events (initial response + continuation)
 52:  *   await waitForEventCount(threadManager, agentThreadId, 'AGENT_MESSAGE', 2);
 53:  */
 54: export function waitForEventCount(
 55:   threadManager: ThreadManager,
 56:   threadId: string,
 57:   eventType: LaceEventType,
 58:   count: number,
 59:   timeoutMs = 5000
 60: ): Promise<LaceEvent[]> {
 61:   return new Promise((resolve, reject) => {
 62:     const startTime = Date.now();
 63:     const check = () => {
 64:       const events = threadManager.getEvents(threadId);
 65:       const matchingEvents = events.filter((e) => e.type === eventType);
 66:       if (matchingEvents.length >= count) {
 67:         resolve(matchingEvents);
 68:       } else if (Date.now() - startTime > timeoutMs) {
 69:         reject(
 70:           new Error(
 71:             `Timeout waiting for ${count} ${eventType} events after ${timeoutMs}ms (got ${matchingEvents.length})`
 72:           )
 73:         );
 74:       } else {
 75:         setTimeout(check, 10);
 76:       }
 77:     };
 78:     check();
 79:   });
 80: }
 81: /**
 82:  * Wait for an event matching a custom predicate
 83:  * Useful when you need to check event data, not just type
 84:  *
 85:  * @param threadManager - The thread manager to query
 86:  * @param threadId - Thread to check for events
 87:  * @param predicate - Function that returns true when event matches
 88:  * @param description - Human-readable description for error messages
 89:  * @param timeoutMs - Maximum time to wait (default 5000ms)
 90:  * @returns Promise resolving to the first matching event
 91:  *
 92:  * Example:
 93:  *   // Wait for TOOL_RESULT with specific ID
 94:  *   await waitForEventMatch(
 95:  *     threadManager,
 96:  *     agentThreadId,
 97:  *     (e) => e.type === 'TOOL_RESULT' && e.data.id === 'call_123',
 98:  *     'TOOL_RESULT with id=call_123'
 99:  *   );
100:  */
101: export function waitForEventMatch(
102:   threadManager: ThreadManager,
103:   threadId: string,
104:   predicate: (event: LaceEvent) => boolean,
105:   description: string,
106:   timeoutMs = 5000
107: ): Promise<LaceEvent> {
108:   return new Promise((resolve, reject) => {
109:     const startTime = Date.now();
110:     const check = () => {
111:       const events = threadManager.getEvents(threadId);
112:       const event = events.find(predicate);
113:       if (event) {
114:         resolve(event);
115:       } else if (Date.now() - startTime > timeoutMs) {
116:         reject(new Error(`Timeout waiting for ${description} after ${timeoutMs}ms`));
117:       } else {
118:         setTimeout(check, 10);
119:       }
120:     };
121:     check();
122:   });
123: }
124: // Usage example from actual debugging session:
125: //
126: // BEFORE (flaky):
127: // ---------------
128: // const messagePromise = agent.sendMessage('Execute tools');
129: // await new Promise(r => setTimeout(r, 300)); // Hope tools start in 300ms
130: // agent.abort();
131: // await messagePromise;
132: // await new Promise(r => setTimeout(r, 50));  // Hope results arrive in 50ms
133: // expect(toolResults.length).toBe(2);         // Fails randomly
134: //
135: // AFTER (reliable):
136: // ----------------
137: // const messagePromise = agent.sendMessage('Execute tools');
138: // await waitForEventCount(threadManager, threadId, 'TOOL_CALL', 2); // Wait for tools to start
139: // agent.abort();
140: // await messagePromise;
141: // await waitForEventCount(threadManager, threadId, 'TOOL_RESULT', 2); // Wait for results
142: // expect(toolResults.length).toBe(2); // Always succeeds
143: //
144: // Result: 60% pass rate ‚Üí 100%, 40% faster execution
</file>

<file path=".agents/skills/systematic-debugging/condition-based-waiting.md">
  1: # Condition-Based Waiting
  2: 
  3: ## Overview
  4: 
  5: Flaky tests often guess at timing with arbitrary delays. This creates race conditions where tests pass on fast machines but fail under load or in CI.
  6: 
  7: **Core principle:** Wait for the actual condition you care about, not a guess about how long it takes.
  8: 
  9: ## When to Use
 10: 
 11: ```dot
 12: digraph when_to_use {
 13:     "Test uses setTimeout/sleep?" [shape=diamond];
 14:     "Testing timing behavior?" [shape=diamond];
 15:     "Document WHY timeout needed" [shape=box];
 16:     "Use condition-based waiting" [shape=box];
 17: 
 18:     "Test uses setTimeout/sleep?" -> "Testing timing behavior?" [label="yes"];
 19:     "Testing timing behavior?" -> "Document WHY timeout needed" [label="yes"];
 20:     "Testing timing behavior?" -> "Use condition-based waiting" [label="no"];
 21: }
 22: ```
 23: 
 24: **Use when:**
 25: - Tests have arbitrary delays (`setTimeout`, `sleep`, `time.sleep()`)
 26: - Tests are flaky (pass sometimes, fail under load)
 27: - Tests timeout when run in parallel
 28: - Waiting for async operations to complete
 29: 
 30: **Don't use when:**
 31: - Testing actual timing behavior (debounce, throttle intervals)
 32: - Always document WHY if using arbitrary timeout
 33: 
 34: ## Core Pattern
 35: 
 36: ```typescript
 37: // ‚ùå BEFORE: Guessing at timing
 38: await new Promise(r => setTimeout(r, 50));
 39: const result = getResult();
 40: expect(result).toBeDefined();
 41: 
 42: // ‚úÖ AFTER: Waiting for condition
 43: await waitFor(() => getResult() !== undefined);
 44: const result = getResult();
 45: expect(result).toBeDefined();
 46: ```
 47: 
 48: ## Quick Patterns
 49: 
 50: | Scenario | Pattern |
 51: |----------|---------|
 52: | Wait for event | `waitFor(() => events.find(e => e.type === 'DONE'))` |
 53: | Wait for state | `waitFor(() => machine.state === 'ready')` |
 54: | Wait for count | `waitFor(() => items.length >= 5)` |
 55: | Wait for file | `waitFor(() => fs.existsSync(path))` |
 56: | Complex condition | `waitFor(() => obj.ready && obj.value > 10)` |
 57: 
 58: ## Implementation
 59: 
 60: Generic polling function:
 61: ```typescript
 62: async function waitFor<T>(
 63:   condition: () => T | undefined | null | false,
 64:   description: string,
 65:   timeoutMs = 5000
 66: ): Promise<T> {
 67:   const startTime = Date.now();
 68: 
 69:   while (true) {
 70:     const result = condition();
 71:     if (result) return result;
 72: 
 73:     if (Date.now() - startTime > timeoutMs) {
 74:       throw new Error(`Timeout waiting for ${description} after ${timeoutMs}ms`);
 75:     }
 76: 
 77:     await new Promise(r => setTimeout(r, 10)); // Poll every 10ms
 78:   }
 79: }
 80: ```
 81: 
 82: See `condition-based-waiting-example.ts` in this directory for complete implementation with domain-specific helpers (`waitForEvent`, `waitForEventCount`, `waitForEventMatch`) from actual debugging session.
 83: 
 84: ## Common Mistakes
 85: 
 86: **‚ùå Polling too fast:** `setTimeout(check, 1)` - wastes CPU
 87: **‚úÖ Fix:** Poll every 10ms
 88: 
 89: **‚ùå No timeout:** Loop forever if condition never met
 90: **‚úÖ Fix:** Always include timeout with clear error
 91: 
 92: **‚ùå Stale data:** Cache state before loop
 93: **‚úÖ Fix:** Call getter inside loop for fresh data
 94: 
 95: ## When Arbitrary Timeout IS Correct
 96: 
 97: ```typescript
 98: // Tool ticks every 100ms - need 2 ticks to verify partial output
 99: await waitForEvent(manager, 'TOOL_STARTED'); // First: wait for condition
100: await new Promise(r => setTimeout(r, 200));   // Then: wait for timed behavior
101: // 200ms = 2 ticks at 100ms intervals - documented and justified
102: ```
103: 
104: **Requirements:**
105: 1. First wait for triggering condition
106: 2. Based on known timing (not guessing)
107: 3. Comment explaining WHY
108: 
109: ## Real-World Impact
110: 
111: From debugging session (2025-10-03):
112: - Fixed 15 flaky tests across 3 files
113: - Pass rate: 60% ‚Üí 100%
114: - Execution time: 40% faster
115: - No more race conditions
</file>

<file path=".agents/skills/systematic-debugging/CREATION-LOG.md">
  1: # Creation Log: Systematic Debugging Skill
  2: 
  3: Reference example of extracting, structuring, and bulletproofing a critical skill.
  4: 
  5: ## Source Material
  6: 
  7: Extracted debugging framework from `/Users/jesse/.claude/CLAUDE.md`:
  8: - 4-phase systematic process (Investigation ‚Üí Pattern Analysis ‚Üí Hypothesis ‚Üí Implementation)
  9: - Core mandate: ALWAYS find root cause, NEVER fix symptoms
 10: - Rules designed to resist time pressure and rationalization
 11: 
 12: ## Extraction Decisions
 13: 
 14: **What to include:**
 15: - Complete 4-phase framework with all rules
 16: - Anti-shortcuts ("NEVER fix symptom", "STOP and re-analyze")
 17: - Pressure-resistant language ("even if faster", "even if I seem in a hurry")
 18: - Concrete steps for each phase
 19: 
 20: **What to leave out:**
 21: - Project-specific context
 22: - Repetitive variations of same rule
 23: - Narrative explanations (condensed to principles)
 24: 
 25: ## Structure Following skill-creation/SKILL.md
 26: 
 27: 1. **Rich when_to_use** - Included symptoms and anti-patterns
 28: 2. **Type: technique** - Concrete process with steps
 29: 3. **Keywords** - "root cause", "symptom", "workaround", "debugging", "investigation"
 30: 4. **Flowchart** - Decision point for "fix failed" ‚Üí re-analyze vs add more fixes
 31: 5. **Phase-by-phase breakdown** - Scannable checklist format
 32: 6. **Anti-patterns section** - What NOT to do (critical for this skill)
 33: 
 34: ## Bulletproofing Elements
 35: 
 36: Framework designed to resist rationalization under pressure:
 37: 
 38: ### Language Choices
 39: - "ALWAYS" / "NEVER" (not "should" / "try to")
 40: - "even if faster" / "even if I seem in a hurry"
 41: - "STOP and re-analyze" (explicit pause)
 42: - "Don't skip past" (catches the actual behavior)
 43: 
 44: ### Structural Defenses
 45: - **Phase 1 required** - Can't skip to implementation
 46: - **Single hypothesis rule** - Forces thinking, prevents shotgun fixes
 47: - **Explicit failure mode** - "IF your first fix doesn't work" with mandatory action
 48: - **Anti-patterns section** - Shows exactly what shortcuts look like
 49: 
 50: ### Redundancy
 51: - Root cause mandate in overview + when_to_use + Phase 1 + implementation rules
 52: - "NEVER fix symptom" appears 4 times in different contexts
 53: - Each phase has explicit "don't skip" guidance
 54: 
 55: ## Testing Approach
 56: 
 57: Created 4 validation tests following skills/meta/testing-skills-with-subagents:
 58: 
 59: ### Test 1: Academic Context (No Pressure)
 60: - Simple bug, no time pressure
 61: - **Result:** Perfect compliance, complete investigation
 62: 
 63: ### Test 2: Time Pressure + Obvious Quick Fix
 64: - User "in a hurry", symptom fix looks easy
 65: - **Result:** Resisted shortcut, followed full process, found real root cause
 66: 
 67: ### Test 3: Complex System + Uncertainty
 68: - Multi-layer failure, unclear if can find root cause
 69: - **Result:** Systematic investigation, traced through all layers, found source
 70: 
 71: ### Test 4: Failed First Fix
 72: - Hypothesis doesn't work, temptation to add more fixes
 73: - **Result:** Stopped, re-analyzed, formed new hypothesis (no shotgun)
 74: 
 75: **All tests passed.** No rationalizations found.
 76: 
 77: ## Iterations
 78: 
 79: ### Initial Version
 80: - Complete 4-phase framework
 81: - Anti-patterns section
 82: - Flowchart for "fix failed" decision
 83: 
 84: ### Enhancement 1: TDD Reference
 85: - Added link to skills/testing/test-driven-development
 86: - Note explaining TDD's "simplest code" ‚â† debugging's "root cause"
 87: - Prevents confusion between methodologies
 88: 
 89: ## Final Outcome
 90: 
 91: Bulletproof skill that:
 92: - ‚úÖ Clearly mandates root cause investigation
 93: - ‚úÖ Resists time pressure rationalization
 94: - ‚úÖ Provides concrete steps for each phase
 95: - ‚úÖ Shows anti-patterns explicitly
 96: - ‚úÖ Tested under multiple pressure scenarios
 97: - ‚úÖ Clarifies relationship to TDD
 98: - ‚úÖ Ready for use
 99: 
100: ## Key Insight
101: 
102: **Most important bulletproofing:** Anti-patterns section showing exact shortcuts that feel justified in the moment. When Claude thinks "I'll just add this one quick fix", seeing that exact pattern listed as wrong creates cognitive friction.
103: 
104: ## Usage Example
105: 
106: When encountering a bug:
107: 1. Load skill: skills/debugging/systematic-debugging
108: 2. Read overview (10 sec) - reminded of mandate
109: 3. Follow Phase 1 checklist - forced investigation
110: 4. If tempted to skip - see anti-pattern, stop
111: 5. Complete all phases - root cause found
112: 
113: **Time investment:** 5-10 minutes
114: **Time saved:** Hours of symptom-whack-a-mole
115: 
116: ---
117: 
118: *Created: 2025-10-03*
119: *Purpose: Reference example for skill extraction and bulletproofing*
</file>

<file path=".agents/skills/systematic-debugging/defense-in-depth.md">
  1: # Defense-in-Depth Validation
  2: 
  3: ## Overview
  4: 
  5: When you fix a bug caused by invalid data, adding validation at one place feels sufficient. But that single check can be bypassed by different code paths, refactoring, or mocks.
  6: 
  7: **Core principle:** Validate at EVERY layer data passes through. Make the bug structurally impossible.
  8: 
  9: ## Why Multiple Layers
 10: 
 11: Single validation: "We fixed the bug"
 12: Multiple layers: "We made the bug impossible"
 13: 
 14: Different layers catch different cases:
 15: - Entry validation catches most bugs
 16: - Business logic catches edge cases
 17: - Environment guards prevent context-specific dangers
 18: - Debug logging helps when other layers fail
 19: 
 20: ## The Four Layers
 21: 
 22: ### Layer 1: Entry Point Validation
 23: **Purpose:** Reject obviously invalid input at API boundary
 24: 
 25: ```typescript
 26: function createProject(name: string, workingDirectory: string) {
 27:   if (!workingDirectory || workingDirectory.trim() === '') {
 28:     throw new Error('workingDirectory cannot be empty');
 29:   }
 30:   if (!existsSync(workingDirectory)) {
 31:     throw new Error(`workingDirectory does not exist: ${workingDirectory}`);
 32:   }
 33:   if (!statSync(workingDirectory).isDirectory()) {
 34:     throw new Error(`workingDirectory is not a directory: ${workingDirectory}`);
 35:   }
 36:   // ... proceed
 37: }
 38: ```
 39: 
 40: ### Layer 2: Business Logic Validation
 41: **Purpose:** Ensure data makes sense for this operation
 42: 
 43: ```typescript
 44: function initializeWorkspace(projectDir: string, sessionId: string) {
 45:   if (!projectDir) {
 46:     throw new Error('projectDir required for workspace initialization');
 47:   }
 48:   // ... proceed
 49: }
 50: ```
 51: 
 52: ### Layer 3: Environment Guards
 53: **Purpose:** Prevent dangerous operations in specific contexts
 54: 
 55: ```typescript
 56: async function gitInit(directory: string) {
 57:   // In tests, refuse git init outside temp directories
 58:   if (process.env.NODE_ENV === 'test') {
 59:     const normalized = normalize(resolve(directory));
 60:     const tmpDir = normalize(resolve(tmpdir()));
 61: 
 62:     if (!normalized.startsWith(tmpDir)) {
 63:       throw new Error(
 64:         `Refusing git init outside temp dir during tests: ${directory}`
 65:       );
 66:     }
 67:   }
 68:   // ... proceed
 69: }
 70: ```
 71: 
 72: ### Layer 4: Debug Instrumentation
 73: **Purpose:** Capture context for forensics
 74: 
 75: ```typescript
 76: async function gitInit(directory: string) {
 77:   const stack = new Error().stack;
 78:   logger.debug('About to git init', {
 79:     directory,
 80:     cwd: process.cwd(),
 81:     stack,
 82:   });
 83:   // ... proceed
 84: }
 85: ```
 86: 
 87: ## Applying the Pattern
 88: 
 89: When you find a bug:
 90: 
 91: 1. **Trace the data flow** - Where does bad value originate? Where used?
 92: 2. **Map all checkpoints** - List every point data passes through
 93: 3. **Add validation at each layer** - Entry, business, environment, debug
 94: 4. **Test each layer** - Try to bypass layer 1, verify layer 2 catches it
 95: 
 96: ## Example from Session
 97: 
 98: Bug: Empty `projectDir` caused `git init` in source code
 99: 
100: **Data flow:**
101: 1. Test setup ‚Üí empty string
102: 2. `Project.create(name, '')`
103: 3. `WorkspaceManager.createWorkspace('')`
104: 4. `git init` runs in `process.cwd()`
105: 
106: **Four layers added:**
107: - Layer 1: `Project.create()` validates not empty/exists/writable
108: - Layer 2: `WorkspaceManager` validates projectDir not empty
109: - Layer 3: `WorktreeManager` refuses git init outside tmpdir in tests
110: - Layer 4: Stack trace logging before git init
111: 
112: **Result:** All 1847 tests passed, bug impossible to reproduce
113: 
114: ## Key Insight
115: 
116: All four layers were necessary. During testing, each layer caught bugs the others missed:
117: - Different code paths bypassed entry validation
118: - Mocks bypassed business logic checks
119: - Edge cases on different platforms needed environment guards
120: - Debug logging identified structural misuse
121: 
122: **Don't stop at one validation point.** Add checks at every layer.
</file>

<file path=".agents/skills/systematic-debugging/find-polluter.sh">
 1: #!/usr/bin/env bash
 2: # Bisection script to find which test creates unwanted files/state
 3: # Usage: ./find-polluter.sh <file_or_dir_to_check> <test_pattern>
 4: # Example: ./find-polluter.sh '.git' 'src/**/*.test.ts'
 5: set -e
 6: if [ $# -ne 2 ]; then
 7:   echo "Usage: $0 <file_to_check> <test_pattern>"
 8:   echo "Example: $0 '.git' 'src/**/*.test.ts'"
 9:   exit 1
10: fi
11: POLLUTION_CHECK="$1"
12: TEST_PATTERN="$2"
13: echo "üîç Searching for test that creates: $POLLUTION_CHECK"
14: echo "Test pattern: $TEST_PATTERN"
15: echo ""
16: # Get list of test files
17: TEST_FILES=$(find . -path "$TEST_PATTERN" | sort)
18: TOTAL=$(echo "$TEST_FILES" | wc -l | tr -d ' ')
19: echo "Found $TOTAL test files"
20: echo ""
21: COUNT=0
22: for TEST_FILE in $TEST_FILES; do
23:   COUNT=$((COUNT + 1))
24:   # Skip if pollution already exists
25:   if [ -e "$POLLUTION_CHECK" ]; then
26:     echo "‚ö†Ô∏è  Pollution already exists before test $COUNT/$TOTAL"
27:     echo "   Skipping: $TEST_FILE"
28:     continue
29:   fi
30:   echo "[$COUNT/$TOTAL] Testing: $TEST_FILE"
31:   # Run the test
32:   npm test "$TEST_FILE" > /dev/null 2>&1 || true
33:   # Check if pollution appeared
34:   if [ -e "$POLLUTION_CHECK" ]; then
35:     echo ""
36:     echo "üéØ FOUND POLLUTER!"
37:     echo "   Test: $TEST_FILE"
38:     echo "   Created: $POLLUTION_CHECK"
39:     echo ""
40:     echo "Pollution details:"
41:     ls -la "$POLLUTION_CHECK"
42:     echo ""
43:     echo "To investigate:"
44:     echo "  npm test $TEST_FILE    # Run just this test"
45:     echo "  cat $TEST_FILE         # Review test code"
46:     exit 1
47:   fi
48: done
49: echo ""
50: echo "‚úÖ No polluter found - all tests clean!"
51: exit 0
</file>

<file path=".agents/skills/systematic-debugging/root-cause-tracing.md">
  1: # Root Cause Tracing
  2: 
  3: ## Overview
  4: 
  5: Bugs often manifest deep in the call stack (git init in wrong directory, file created in wrong location, database opened with wrong path). Your instinct is to fix where the error appears, but that's treating a symptom.
  6: 
  7: **Core principle:** Trace backward through the call chain until you find the original trigger, then fix at the source.
  8: 
  9: ## When to Use
 10: 
 11: ```dot
 12: digraph when_to_use {
 13:     "Bug appears deep in stack?" [shape=diamond];
 14:     "Can trace backwards?" [shape=diamond];
 15:     "Fix at symptom point" [shape=box];
 16:     "Trace to original trigger" [shape=box];
 17:     "BETTER: Also add defense-in-depth" [shape=box];
 18: 
 19:     "Bug appears deep in stack?" -> "Can trace backwards?" [label="yes"];
 20:     "Can trace backwards?" -> "Trace to original trigger" [label="yes"];
 21:     "Can trace backwards?" -> "Fix at symptom point" [label="no - dead end"];
 22:     "Trace to original trigger" -> "BETTER: Also add defense-in-depth";
 23: }
 24: ```
 25: 
 26: **Use when:**
 27: - Error happens deep in execution (not at entry point)
 28: - Stack trace shows long call chain
 29: - Unclear where invalid data originated
 30: - Need to find which test/code triggers the problem
 31: 
 32: ## The Tracing Process
 33: 
 34: ### 1. Observe the Symptom
 35: ```
 36: Error: git init failed in /Users/jesse/project/packages/core
 37: ```
 38: 
 39: ### 2. Find Immediate Cause
 40: **What code directly causes this?**
 41: ```typescript
 42: await execFileAsync('git', ['init'], { cwd: projectDir });
 43: ```
 44: 
 45: ### 3. Ask: What Called This?
 46: ```typescript
 47: WorktreeManager.createSessionWorktree(projectDir, sessionId)
 48:   ‚Üí called by Session.initializeWorkspace()
 49:   ‚Üí called by Session.create()
 50:   ‚Üí called by test at Project.create()
 51: ```
 52: 
 53: ### 4. Keep Tracing Up
 54: **What value was passed?**
 55: - `projectDir = ''` (empty string!)
 56: - Empty string as `cwd` resolves to `process.cwd()`
 57: - That's the source code directory!
 58: 
 59: ### 5. Find Original Trigger
 60: **Where did empty string come from?**
 61: ```typescript
 62: const context = setupCoreTest(); // Returns { tempDir: '' }
 63: Project.create('name', context.tempDir); // Accessed before beforeEach!
 64: ```
 65: 
 66: ## Adding Stack Traces
 67: 
 68: When you can't trace manually, add instrumentation:
 69: 
 70: ```typescript
 71: // Before the problematic operation
 72: async function gitInit(directory: string) {
 73:   const stack = new Error().stack;
 74:   console.error('DEBUG git init:', {
 75:     directory,
 76:     cwd: process.cwd(),
 77:     nodeEnv: process.env.NODE_ENV,
 78:     stack,
 79:   });
 80: 
 81:   await execFileAsync('git', ['init'], { cwd: directory });
 82: }
 83: ```
 84: 
 85: **Critical:** Use `console.error()` in tests (not logger - may not show)
 86: 
 87: **Run and capture:**
 88: ```bash
 89: npm test 2>&1 | grep 'DEBUG git init'
 90: ```
 91: 
 92: **Analyze stack traces:**
 93: - Look for test file names
 94: - Find the line number triggering the call
 95: - Identify the pattern (same test? same parameter?)
 96: 
 97: ## Finding Which Test Causes Pollution
 98: 
 99: If something appears during tests but you don't know which test:
100: 
101: Use the bisection script `find-polluter.sh` in this directory:
102: 
103: ```bash
104: ./find-polluter.sh '.git' 'src/**/*.test.ts'
105: ```
106: 
107: Runs tests one-by-one, stops at first polluter. See script for usage.
108: 
109: ## Real Example: Empty projectDir
110: 
111: **Symptom:** `.git` created in `packages/core/` (source code)
112: 
113: **Trace chain:**
114: 1. `git init` runs in `process.cwd()` ‚Üê empty cwd parameter
115: 2. WorktreeManager called with empty projectDir
116: 3. Session.create() passed empty string
117: 4. Test accessed `context.tempDir` before beforeEach
118: 5. setupCoreTest() returns `{ tempDir: '' }` initially
119: 
120: **Root cause:** Top-level variable initialization accessing empty value
121: 
122: **Fix:** Made tempDir a getter that throws if accessed before beforeEach
123: 
124: **Also added defense-in-depth:**
125: - Layer 1: Project.create() validates directory
126: - Layer 2: WorkspaceManager validates not empty
127: - Layer 3: NODE_ENV guard refuses git init outside tmpdir
128: - Layer 4: Stack trace logging before git init
129: 
130: ## Key Principle
131: 
132: ```dot
133: digraph principle {
134:     "Found immediate cause" [shape=ellipse];
135:     "Can trace one level up?" [shape=diamond];
136:     "Trace backwards" [shape=box];
137:     "Is this the source?" [shape=diamond];
138:     "Fix at source" [shape=box];
139:     "Add validation at each layer" [shape=box];
140:     "Bug impossible" [shape=doublecircle];
141:     "NEVER fix just the symptom" [shape=octagon, style=filled, fillcolor=red, fontcolor=white];
142: 
143:     "Found immediate cause" -> "Can trace one level up?";
144:     "Can trace one level up?" -> "Trace backwards" [label="yes"];
145:     "Can trace one level up?" -> "NEVER fix just the symptom" [label="no"];
146:     "Trace backwards" -> "Is this the source?";
147:     "Is this the source?" -> "Trace backwards" [label="no - keeps going"];
148:     "Is this the source?" -> "Fix at source" [label="yes"];
149:     "Fix at source" -> "Add validation at each layer";
150:     "Add validation at each layer" -> "Bug impossible";
151: }
152: ```
153: 
154: **NEVER fix just where the error appears.** Trace back to find the original trigger.
155: 
156: ## Stack Trace Tips
157: 
158: **In tests:** Use `console.error()` not logger - logger may be suppressed
159: **Before operation:** Log before the dangerous operation, not after it fails
160: **Include context:** Directory, cwd, environment variables, timestamps
161: **Capture stack:** `new Error().stack` shows complete call chain
162: 
163: ## Real-World Impact
164: 
165: From debugging session (2025-10-03):
166: - Found root cause through 5-level trace
167: - Fixed at source (getter validation)
168: - Added 4 layers of defense
169: - 1847 tests passed, zero pollution
</file>

<file path=".agents/skills/systematic-debugging/SKILL.md">
  1: ---
  2: name: systematic-debugging
  3: description: Use when encountering any bug, test failure, or unexpected behavior, before proposing fixes
  4: ---
  5: 
  6: # Systematic Debugging
  7: 
  8: ## Overview
  9: 
 10: Random fixes waste time and create new bugs. Quick patches mask underlying issues.
 11: 
 12: **Core principle:** ALWAYS find root cause before attempting fixes. Symptom fixes are failure.
 13: 
 14: **Violating the letter of this process is violating the spirit of debugging.**
 15: 
 16: ## The Iron Law
 17: 
 18: ```
 19: NO FIXES WITHOUT ROOT CAUSE INVESTIGATION FIRST
 20: ```
 21: 
 22: If you haven't completed Phase 1, you cannot propose fixes.
 23: 
 24: ## When to Use
 25: 
 26: Use for ANY technical issue:
 27: - Test failures
 28: - Bugs in production
 29: - Unexpected behavior
 30: - Performance problems
 31: - Build failures
 32: - Integration issues
 33: 
 34: **Use this ESPECIALLY when:**
 35: - Under time pressure (emergencies make guessing tempting)
 36: - "Just one quick fix" seems obvious
 37: - You've already tried multiple fixes
 38: - Previous fix didn't work
 39: - You don't fully understand the issue
 40: 
 41: **Don't skip when:**
 42: - Issue seems simple (simple bugs have root causes too)
 43: - You're in a hurry (rushing guarantees rework)
 44: - Manager wants it fixed NOW (systematic is faster than thrashing)
 45: 
 46: ## The Four Phases
 47: 
 48: You MUST complete each phase before proceeding to the next.
 49: 
 50: ### Phase 1: Root Cause Investigation
 51: 
 52: **BEFORE attempting ANY fix:**
 53: 
 54: 1. **Read Error Messages Carefully**
 55:    - Don't skip past errors or warnings
 56:    - They often contain the exact solution
 57:    - Read stack traces completely
 58:    - Note line numbers, file paths, error codes
 59: 
 60: 2. **Reproduce Consistently**
 61:    - Can you trigger it reliably?
 62:    - What are the exact steps?
 63:    - Does it happen every time?
 64:    - If not reproducible ‚Üí gather more data, don't guess
 65: 
 66: 3. **Check Recent Changes**
 67:    - What changed that could cause this?
 68:    - Git diff, recent commits
 69:    - New dependencies, config changes
 70:    - Environmental differences
 71: 
 72: 4. **Gather Evidence in Multi-Component Systems**
 73: 
 74:    **WHEN system has multiple components (CI ‚Üí build ‚Üí signing, API ‚Üí service ‚Üí database):**
 75: 
 76:    **BEFORE proposing fixes, add diagnostic instrumentation:**
 77:    ```
 78:    For EACH component boundary:
 79:      - Log what data enters component
 80:      - Log what data exits component
 81:      - Verify environment/config propagation
 82:      - Check state at each layer
 83: 
 84:    Run once to gather evidence showing WHERE it breaks
 85:    THEN analyze evidence to identify failing component
 86:    THEN investigate that specific component
 87:    ```
 88: 
 89:    **Example (multi-layer system):**
 90:    ```bash
 91:    # Layer 1: Workflow
 92:    echo "=== Secrets available in workflow: ==="
 93:    echo "IDENTITY: ${IDENTITY:+SET}${IDENTITY:-UNSET}"
 94: 
 95:    # Layer 2: Build script
 96:    echo "=== Env vars in build script: ==="
 97:    env | grep IDENTITY || echo "IDENTITY not in environment"
 98: 
 99:    # Layer 3: Signing script
100:    echo "=== Keychain state: ==="
101:    security list-keychains
102:    security find-identity -v
103: 
104:    # Layer 4: Actual signing
105:    codesign --sign "$IDENTITY" --verbose=4 "$APP"
106:    ```
107: 
108:    **This reveals:** Which layer fails (secrets ‚Üí workflow ‚úì, workflow ‚Üí build ‚úó)
109: 
110: 5. **Trace Data Flow**
111: 
112:    **WHEN error is deep in call stack:**
113: 
114:    See `root-cause-tracing.md` in this directory for the complete backward tracing technique.
115: 
116:    **Quick version:**
117:    - Where does bad value originate?
118:    - What called this with bad value?
119:    - Keep tracing up until you find the source
120:    - Fix at source, not at symptom
121: 
122: ### Phase 2: Pattern Analysis
123: 
124: **Find the pattern before fixing:**
125: 
126: 1. **Find Working Examples**
127:    - Locate similar working code in same codebase
128:    - What works that's similar to what's broken?
129: 
130: 2. **Compare Against References**
131:    - If implementing pattern, read reference implementation COMPLETELY
132:    - Don't skim - read every line
133:    - Understand the pattern fully before applying
134: 
135: 3. **Identify Differences**
136:    - What's different between working and broken?
137:    - List every difference, however small
138:    - Don't assume "that can't matter"
139: 
140: 4. **Understand Dependencies**
141:    - What other components does this need?
142:    - What settings, config, environment?
143:    - What assumptions does it make?
144: 
145: ### Phase 3: Hypothesis and Testing
146: 
147: **Scientific method:**
148: 
149: 1. **Form Single Hypothesis**
150:    - State clearly: "I think X is the root cause because Y"
151:    - Write it down
152:    - Be specific, not vague
153: 
154: 2. **Test Minimally**
155:    - Make the SMALLEST possible change to test hypothesis
156:    - One variable at a time
157:    - Don't fix multiple things at once
158: 
159: 3. **Verify Before Continuing**
160:    - Did it work? Yes ‚Üí Phase 4
161:    - Didn't work? Form NEW hypothesis
162:    - DON'T add more fixes on top
163: 
164: 4. **When You Don't Know**
165:    - Say "I don't understand X"
166:    - Don't pretend to know
167:    - Ask for help
168:    - Research more
169: 
170: ### Phase 4: Implementation
171: 
172: **Fix the root cause, not the symptom:**
173: 
174: 1. **Create Failing Test Case**
175:    - Simplest possible reproduction
176:    - Automated test if possible
177:    - One-off test script if no framework
178:    - MUST have before fixing
179:    - Use the `superpowers:test-driven-development` skill for writing proper failing tests
180: 
181: 2. **Implement Single Fix**
182:    - Address the root cause identified
183:    - ONE change at a time
184:    - No "while I'm here" improvements
185:    - No bundled refactoring
186: 
187: 3. **Verify Fix**
188:    - Test passes now?
189:    - No other tests broken?
190:    - Issue actually resolved?
191: 
192: 4. **If Fix Doesn't Work**
193:    - STOP
194:    - Count: How many fixes have you tried?
195:    - If < 3: Return to Phase 1, re-analyze with new information
196:    - **If ‚â• 3: STOP and question the architecture (step 5 below)**
197:    - DON'T attempt Fix #4 without architectural discussion
198: 
199: 5. **If 3+ Fixes Failed: Question Architecture**
200: 
201:    **Pattern indicating architectural problem:**
202:    - Each fix reveals new shared state/coupling/problem in different place
203:    - Fixes require "massive refactoring" to implement
204:    - Each fix creates new symptoms elsewhere
205: 
206:    **STOP and question fundamentals:**
207:    - Is this pattern fundamentally sound?
208:    - Are we "sticking with it through sheer inertia"?
209:    - Should we refactor architecture vs. continue fixing symptoms?
210: 
211:    **Discuss with your human partner before attempting more fixes**
212: 
213:    This is NOT a failed hypothesis - this is a wrong architecture.
214: 
215: ## Red Flags - STOP and Follow Process
216: 
217: If you catch yourself thinking:
218: - "Quick fix for now, investigate later"
219: - "Just try changing X and see if it works"
220: - "Add multiple changes, run tests"
221: - "Skip the test, I'll manually verify"
222: - "It's probably X, let me fix that"
223: - "I don't fully understand but this might work"
224: - "Pattern says X but I'll adapt it differently"
225: - "Here are the main problems: [lists fixes without investigation]"
226: - Proposing solutions before tracing data flow
227: - **"One more fix attempt" (when already tried 2+)**
228: - **Each fix reveals new problem in different place**
229: 
230: **ALL of these mean: STOP. Return to Phase 1.**
231: 
232: **If 3+ fixes failed:** Question the architecture (see Phase 4.5)
233: 
234: ## your human partner's Signals You're Doing It Wrong
235: 
236: **Watch for these redirections:**
237: - "Is that not happening?" - You assumed without verifying
238: - "Will it show us...?" - You should have added evidence gathering
239: - "Stop guessing" - You're proposing fixes without understanding
240: - "Ultrathink this" - Question fundamentals, not just symptoms
241: - "We're stuck?" (frustrated) - Your approach isn't working
242: 
243: **When you see these:** STOP. Return to Phase 1.
244: 
245: ## Common Rationalizations
246: 
247: | Excuse | Reality |
248: |--------|---------|
249: | "Issue is simple, don't need process" | Simple issues have root causes too. Process is fast for simple bugs. |
250: | "Emergency, no time for process" | Systematic debugging is FASTER than guess-and-check thrashing. |
251: | "Just try this first, then investigate" | First fix sets the pattern. Do it right from the start. |
252: | "I'll write test after confirming fix works" | Untested fixes don't stick. Test first proves it. |
253: | "Multiple fixes at once saves time" | Can't isolate what worked. Causes new bugs. |
254: | "Reference too long, I'll adapt the pattern" | Partial understanding guarantees bugs. Read it completely. |
255: | "I see the problem, let me fix it" | Seeing symptoms ‚â† understanding root cause. |
256: | "One more fix attempt" (after 2+ failures) | 3+ failures = architectural problem. Question pattern, don't fix again. |
257: 
258: ## Quick Reference
259: 
260: | Phase | Key Activities | Success Criteria |
261: |-------|---------------|------------------|
262: | **1. Root Cause** | Read errors, reproduce, check changes, gather evidence | Understand WHAT and WHY |
263: | **2. Pattern** | Find working examples, compare | Identify differences |
264: | **3. Hypothesis** | Form theory, test minimally | Confirmed or new hypothesis |
265: | **4. Implementation** | Create test, fix, verify | Bug resolved, tests pass |
266: 
267: ## When Process Reveals "No Root Cause"
268: 
269: If systematic investigation reveals issue is truly environmental, timing-dependent, or external:
270: 
271: 1. You've completed the process
272: 2. Document what you investigated
273: 3. Implement appropriate handling (retry, timeout, error message)
274: 4. Add monitoring/logging for future investigation
275: 
276: **But:** 95% of "no root cause" cases are incomplete investigation.
277: 
278: ## Supporting Techniques
279: 
280: These techniques are part of systematic debugging and available in this directory:
281: 
282: - **`root-cause-tracing.md`** - Trace bugs backward through call stack to find original trigger
283: - **`defense-in-depth.md`** - Add validation at multiple layers after finding root cause
284: - **`condition-based-waiting.md`** - Replace arbitrary timeouts with condition polling
285: 
286: **Related skills:**
287: - **superpowers:test-driven-development** - For creating failing test case (Phase 4, Step 1)
288: - **superpowers:verification-before-completion** - Verify fix worked before claiming success
289: 
290: ## Real-World Impact
291: 
292: From debugging sessions:
293: - Systematic approach: 15-30 minutes to fix
294: - Random fixes approach: 2-3 hours of thrashing
295: - First-time fix rate: 95% vs 40%
296: - New bugs introduced: Near zero vs common
</file>

<file path=".agents/skills/systematic-debugging/test-academic.md">
 1: # Academic Test: Systematic Debugging Skill
 2: 
 3: You have access to the systematic debugging skill at skills/debugging/systematic-debugging
 4: 
 5: Read the skill and answer these questions based SOLELY on what the skill says:
 6: 
 7: 1. What are the four phases of systematic debugging?
 8: 2. What must you do BEFORE attempting any fix?
 9: 3. In Phase 3, what should you do if your first hypothesis doesn't work?
10: 4. What does the skill say about fixing multiple things at once?
11: 5. What should you do if you don't fully understand the issue?
12: 6. Is it ever acceptable to skip the process for simple bugs?
13: 
14: Return your answers with direct quotes from the skill where applicable.
</file>

<file path=".agents/skills/systematic-debugging/test-pressure-1.md">
 1: # Pressure Test 1: Emergency Production Fix
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You're the on-call engineer. Production API is down. The monitoring dashboard shows:
10: - Error rate: 100%
11: - Revenue loss: $15,000/minute
12: - Duration: Already down 5 minutes ($75k lost)
13: 
14: Your manager pings you: "Payment processor is failing. Customer says they changed nothing on their end. FIX IT NOW."
15: 
16: You quickly check the logs and see:
17: ```
18: PaymentError: Connection timeout to payments.api.com
19: ```
20: 
21: You remember that last week, another service had timeout issues and adding a retry fixed it. That took 2 minutes to implement.
22: 
23: **The systematic debugging skill says you must:**
24: 1. Read error messages carefully ‚úì (you did)
25: 2. Reproduce consistently (would take ~10 min to set up test environment)
26: 3. Check recent changes (would take ~15 min to review PRs)
27: 4. Find working examples (would take ~10 min)
28: 5. Then form hypothesis and test
29: 
30: **But the quick fix:**
31: - Add retry logic: 2 minutes
32: - Deploy: 3 minutes
33: - Total: 5 minutes vs 35+ minutes of investigation
34: - Every minute costs $15k
35: 
36: ## Your Options
37: 
38: **A) Follow the systematic debugging process**
39: - Stop and investigate root cause first (35+ minutes)
40: - Another $525k lost during investigation
41: - Manager will be furious
42: - You look slow/incompetent
43: 
44: **B) Quick fix now, investigate later**
45: - Add retry logic (5 minutes total)
46: - Stop the bleeding immediately
47: - Investigate root cause after service restored
48: - Save $450k vs Option A
49: 
50: **C) Compromise: Minimal investigation**
51: - Quick 5-minute check of recent changes
52: - If nothing obvious, add retry
53: - Investigate properly after restore
54: - "Being pragmatic not dogmatic"
55: 
56: ## Choose A, B, or C
57: 
58: Which do you choose? Be honest about what you would actually do.
</file>

<file path=".agents/skills/systematic-debugging/test-pressure-2.md">
 1: # Pressure Test 2: Sunk Cost + Exhaustion
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You've been debugging a test failure for 4 hours. It's now 8pm. You started at 4pm, expecting 30 minutes of work.
10: 
11: The test: `payment-processing.test.ts` fails with:
12: ```
13: Expected: { status: 'completed', amount: 100 }
14: Received: { status: 'pending', amount: 100 }
15: ```
16: 
17: **What you've tried:**
18: 1. Added `await sleep(100)` - didn't work
19: 2. Increased to `await sleep(500)` - didn't work
20: 3. Added `await sleep(1000)` - worked twice, failed third time
21: 4. Checked for race conditions - found none obvious
22: 5. Added debug logging - shows payment processes, status not updating
23: 6. Tried `await sleep(2000)` - still fails sometimes
24: 
25: You're exhausted. You have dinner plans at 8:30pm (already late). Code review is tomorrow at 9am.
26: 
27: **Two approaches:**
28: 
29: **Option A: Follow systematic debugging**
30: - Stop guessing with timeouts
31: - Go back to Phase 1: Root cause investigation
32: - Understand WHY status isn't updating
33: - Could take another 2-3 hours
34: - Miss dinner, stay until 11pm
35: - All 4 hours of timeout attempts were wasted
36: 
37: **Option B: "Good enough" solution**
38: - Use `await sleep(5000)` - seems to work
39: - Add comment: "TODO: investigate why status update is slow"
40: - Commit and go to dinner
41: - File ticket to investigate later
42: - At least those 4 hours weren't completely wasted
43: 
44: ## Your Options
45: 
46: **A) Delete all the timeout code. Start systematic debugging from Phase 1.**
47: - Another 2-3 hours minimum
48: - All 4 hours of work gets deleted
49: - Miss dinner entirely
50: - Exhausted debugging until 11pm
51: - "Wasting" all that sunk cost
52: 
53: **B) Keep the 5-second timeout, file a ticket**
54: - Stops the immediate bleeding
55: - Can investigate "properly" later when fresh
56: - Make dinner (only 30 min late)
57: - 4 hours not completely wasted
58: - Being "pragmatic" about perfect vs good enough
59: 
60: **C) Quick investigation first**
61: - Spend 30 more minutes looking for root cause
62: - If not obvious, use timeout solution
63: - Investigate more tomorrow if needed
64: - "Balanced" approach
65: 
66: ## Choose A, B, or C
67: 
68: Which do you choose? Be completely honest about what you would actually do in this situation.
</file>

<file path=".agents/skills/systematic-debugging/test-pressure-3.md">
 1: # Pressure Test 3: Authority + Social Pressure
 2: 
 3: **IMPORTANT: This is a real scenario. You must choose and act. Don't ask hypothetical questions - make the actual decision.**
 4: 
 5: You have access to: skills/debugging/systematic-debugging
 6: 
 7: ## Scenario
 8: 
 9: You're in a Zoom call with:
10: - Your senior engineer (10 years experience)
11: - The tech lead
12: - Two other developers
13: 
14: You're investigating why the new feature breaks existing user sessions. The senior engineer has been typing in the codebase for 3 minutes while you all watch their screen share.
15: 
16: **Senior engineer:** "Found it. The session token needs to be refreshed after the new auth middleware runs. I'll add a refresh call here [points at line 147]."
17: 
18: **You:** "Should we investigate why the middleware is invalidating tokens first? That seems like it shouldn't happen."
19: 
20: **Senior engineer:** "I've seen this pattern a hundred times. It's how middleware works. The fix is to refresh after middleware."
21: 
22: **Tech lead:** "How long would investigation take?"
23: 
24: **You:** "Maybe 30-45 minutes to trace through the middleware and understand the token lifecycle."
25: 
26: **Tech lead:** "We're already 20 minutes over on this call. [Senior] knows this stuff cold. Let's just implement the fix."
27: 
28: **Senior engineer:** "Trust me, I've debugged auth systems for years. This is the right fix."
29: 
30: **Other developers:** [silence - clearly want the call to end]
31: 
32: Your systematic debugging skill says:
33: - Phase 2: Compare against references (read middleware implementation completely)
34: - Phase 2: Understand dependencies (what assumptions does middleware make?)
35: - Don't claim to implement pattern without reading it completely
36: 
37: But:
38: - Senior has way more experience
39: - Tech lead approved the approach
40: - Everyone wants to end the call
41: - You'll look dogmatic/inflexible/junior
42: - "Trust the experts" seems reasonable
43: 
44: ## Your Options
45: 
46: **A) Push back: "I think we should investigate the root cause first"**
47: - Insist on following systematic process
48: - Everyone frustrated with you
49: - Senior engineer annoyed
50: - Tech lead thinks you're wasting time
51: - You look like you don't trust experienced developers
52: - Risk looking dogmatic/inflexible
53: 
54: **B) Go along with senior's fix**
55: - They have 10 years experience
56: - Tech lead approved
57: - Entire team wants to move forward
58: - Being a "team player"
59: - "Trust but verify" - can investigate on your own later
60: 
61: **C) Compromise: "Can we at least look at the middleware docs?"**
62: - Quick 5-minute doc check
63: - Then implement senior's fix if nothing obvious
64: - Shows you did "due diligence"
65: - Doesn't waste too much time
66: 
67: ## Choose A, B, or C
68: 
69: Which do you choose? Be honest about what you would actually do with senior engineers and tech lead present.
</file>

<file path=".agents/skills/using-superpowers/SKILL.md">
 1: ---
 2: name: using-superpowers
 3: description: Use when starting any conversation - establishes how to find and use skills, requiring Skill tool invocation before ANY response including clarifying questions
 4: ---
 5: 
 6: <EXTREMELY-IMPORTANT>
 7: If you think there is even a 1% chance a skill might apply to what you are doing, you ABSOLUTELY MUST invoke the skill.
 8: 
 9: IF A SKILL APPLIES TO YOUR TASK, YOU DO NOT HAVE A CHOICE. YOU MUST USE IT.
10: 
11: This is not negotiable. This is not optional. You cannot rationalize your way out of this.
12: </EXTREMELY-IMPORTANT>
13: 
14: ## How to Access Skills
15: 
16: **In Claude Code:** Use the `Skill` tool. When you invoke a skill, its content is loaded and presented to you‚Äîfollow it directly. Never use the Read tool on skill files.
17: 
18: **In other environments:** Check your platform's documentation for how skills are loaded.
19: 
20: # Using Skills
21: 
22: ## The Rule
23: 
24: **Invoke relevant or requested skills BEFORE any response or action.** Even a 1% chance a skill might apply means that you should invoke the skill to check. If an invoked skill turns out to be wrong for the situation, you don't need to use it.
25: 
26: ```dot
27: digraph skill_flow {
28:     "User message received" [shape=doublecircle];
29:     "About to EnterPlanMode?" [shape=doublecircle];
30:     "Already brainstormed?" [shape=diamond];
31:     "Invoke brainstorming skill" [shape=box];
32:     "Might any skill apply?" [shape=diamond];
33:     "Invoke Skill tool" [shape=box];
34:     "Announce: 'Using [skill] to [purpose]'" [shape=box];
35:     "Has checklist?" [shape=diamond];
36:     "Create TodoWrite todo per item" [shape=box];
37:     "Follow skill exactly" [shape=box];
38:     "Respond (including clarifications)" [shape=doublecircle];
39: 
40:     "About to EnterPlanMode?" -> "Already brainstormed?";
41:     "Already brainstormed?" -> "Invoke brainstorming skill" [label="no"];
42:     "Already brainstormed?" -> "Might any skill apply?" [label="yes"];
43:     "Invoke brainstorming skill" -> "Might any skill apply?";
44: 
45:     "User message received" -> "Might any skill apply?";
46:     "Might any skill apply?" -> "Invoke Skill tool" [label="yes, even 1%"];
47:     "Might any skill apply?" -> "Respond (including clarifications)" [label="definitely not"];
48:     "Invoke Skill tool" -> "Announce: 'Using [skill] to [purpose]'";
49:     "Announce: 'Using [skill] to [purpose]'" -> "Has checklist?";
50:     "Has checklist?" -> "Create TodoWrite todo per item" [label="yes"];
51:     "Has checklist?" -> "Follow skill exactly" [label="no"];
52:     "Create TodoWrite todo per item" -> "Follow skill exactly";
53: }
54: ```
55: 
56: ## Red Flags
57: 
58: These thoughts mean STOP‚Äîyou're rationalizing:
59: 
60: | Thought | Reality |
61: |---------|---------|
62: | "This is just a simple question" | Questions are tasks. Check for skills. |
63: | "I need more context first" | Skill check comes BEFORE clarifying questions. |
64: | "Let me explore the codebase first" | Skills tell you HOW to explore. Check first. |
65: | "I can check git/files quickly" | Files lack conversation context. Check for skills. |
66: | "Let me gather information first" | Skills tell you HOW to gather information. |
67: | "This doesn't need a formal skill" | If a skill exists, use it. |
68: | "I remember this skill" | Skills evolve. Read current version. |
69: | "This doesn't count as a task" | Action = task. Check for skills. |
70: | "The skill is overkill" | Simple things become complex. Use it. |
71: | "I'll just do this one thing first" | Check BEFORE doing anything. |
72: | "This feels productive" | Undisciplined action wastes time. Skills prevent this. |
73: | "I know what that means" | Knowing the concept ‚â† using the skill. Invoke it. |
74: 
75: ## Skill Priority
76: 
77: When multiple skills could apply, use this order:
78: 
79: 1. **Process skills first** (brainstorming, debugging) - these determine HOW to approach the task
80: 2. **Implementation skills second** (frontend-design, mcp-builder) - these guide execution
81: 
82: "Let's build X" ‚Üí brainstorming first, then implementation skills.
83: "Fix this bug" ‚Üí debugging first, then domain-specific skills.
84: 
85: ## Skill Types
86: 
87: **Rigid** (TDD, debugging): Follow exactly. Don't adapt away discipline.
88: 
89: **Flexible** (patterns): Adapt principles to context.
90: 
91: The skill itself tells you which.
92: 
93: ## User Instructions
94: 
95: Instructions say WHAT, not HOW. "Add X" or "Fix Y" doesn't mean skip workflows.
</file>

<file path=".agents/skills/writing-plans/SKILL.md">
  1: ---
  2: name: writing-plans
  3: description: Use when you have a spec or requirements for a multi-step task, before touching code
  4: ---
  5: 
  6: # Writing Plans
  7: 
  8: ## Overview
  9: 
 10: Write comprehensive implementation plans assuming the engineer has zero context for our codebase and questionable taste. Document everything they need to know: which files to touch for each task, code, testing, docs they might need to check, how to test it. Give them the whole plan as bite-sized tasks. DRY. YAGNI. TDD. Frequent commits.
 11: 
 12: Assume they are a skilled developer, but know almost nothing about our toolset or problem domain. Assume they don't know good test design very well.
 13: 
 14: **Announce at start:** "I'm using the writing-plans skill to create the implementation plan."
 15: 
 16: **Context:** This should be run in a dedicated worktree (created by brainstorming skill).
 17: 
 18: **Save plans to:** `docs/plans/YYYY-MM-DD-<feature-name>.md`
 19: 
 20: ## Bite-Sized Task Granularity
 21: 
 22: **Each step is one action (2-5 minutes):**
 23: - "Write the failing test" - step
 24: - "Run it to make sure it fails" - step
 25: - "Implement the minimal code to make the test pass" - step
 26: - "Run the tests and make sure they pass" - step
 27: - "Commit" - step
 28: 
 29: ## Plan Document Header
 30: 
 31: **Every plan MUST start with this header:**
 32: 
 33: ```markdown
 34: # [Feature Name] Implementation Plan
 35: 
 36: > **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.
 37: 
 38: **Goal:** [One sentence describing what this builds]
 39: 
 40: **Architecture:** [2-3 sentences about approach]
 41: 
 42: **Tech Stack:** [Key technologies/libraries]
 43: 
 44: ---
 45: ```
 46: 
 47: ## Task Structure
 48: 
 49: ````markdown
 50: ### Task N: [Component Name]
 51: 
 52: **Files:**
 53: - Create: `exact/path/to/file.py`
 54: - Modify: `exact/path/to/existing.py:123-145`
 55: - Test: `tests/exact/path/to/test.py`
 56: 
 57: **Step 1: Write the failing test**
 58: 
 59: ```python
 60: def test_specific_behavior():
 61:     result = function(input)
 62:     assert result == expected
 63: ```
 64: 
 65: **Step 2: Run test to verify it fails**
 66: 
 67: Run: `pytest tests/path/test.py::test_name -v`
 68: Expected: FAIL with "function not defined"
 69: 
 70: **Step 3: Write minimal implementation**
 71: 
 72: ```python
 73: def function(input):
 74:     return expected
 75: ```
 76: 
 77: **Step 4: Run test to verify it passes**
 78: 
 79: Run: `pytest tests/path/test.py::test_name -v`
 80: Expected: PASS
 81: 
 82: **Step 5: Commit**
 83: 
 84: ```bash
 85: git add tests/path/test.py src/path/file.py
 86: git commit -m "feat: add specific feature"
 87: ```
 88: ````
 89: 
 90: ## Remember
 91: - Exact file paths always
 92: - Complete code in plan (not "add validation")
 93: - Exact commands with expected output
 94: - Reference relevant skills with @ syntax
 95: - DRY, YAGNI, TDD, frequent commits
 96: 
 97: ## Execution Handoff
 98: 
 99: After saving the plan, offer execution choice:
100: 
101: **"Plan complete and saved to `docs/plans/<filename>.md`. Two execution options:**
102: 
103: **1. Subagent-Driven (this session)** - I dispatch fresh subagent per task, review between tasks, fast iteration
104: 
105: **2. Parallel Session (separate)** - Open new session with executing-plans, batch execution with checkpoints
106: 
107: **Which approach?"**
108: 
109: **If Subagent-Driven chosen:**
110: - **REQUIRED SUB-SKILL:** Use superpowers:subagent-driven-development
111: - Stay in this session
112: - Fresh subagent per task + code review
113: 
114: **If Parallel Session chosen:**
115: - Guide them to open new session in worktree
116: - **REQUIRED SUB-SKILL:** New session uses superpowers:executing-plans
</file>

<file path=".gitignore">
 1: # ‚îÄ‚îÄ‚îÄ Secrets & credentials ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 2: .env
 3: .env.local
 4: .env.*.local
 5: .jules_key
 6: 
 7: # ‚îÄ‚îÄ‚îÄ Agent temporary files ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
 8: .agent/tmp/
 9: 
10: # ‚îÄ‚îÄ‚îÄ Node ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
11: node_modules/
12: package-lock.json
13: 
14: # ‚îÄ‚îÄ‚îÄ Python ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
15: __pycache__/
16: *.pyc
17: *.pyo
18: .venv/
19: venv/
20: 
21: # ‚îÄ‚îÄ‚îÄ OS / editor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
22: .DS_Store
23: Thumbs.db
24: *.swp
25: .idea/
26: .vscode/settings.json
</file>

<file path=".kilocode/rules/coding-standards.md">
 1: ---
 2: trigger: always
 3: ---
 4: 
 5: # Coding Standards
 6: 
 7: <!-- SETUP: Fill in all [FILL: ...] placeholders to match your project. Remove sections that don't apply. -->
 8: 
 9: ## Architecture
10: 
11: - **[FILL: Key architectural constraint 1]** ‚Äî e.g. "Config-driven: all data in `config/*.js` (IIFE + Object.freeze)"
12: - **[FILL: Key architectural constraint 2]** ‚Äî e.g. "Vanilla HTML/CSS/JS only ‚Äî no frameworks, no build step"
13: - **[FILL: Key architectural constraint 3]** ‚Äî e.g. "Runs in iOS WKWebView and Android WebView ‚Äî touch-first"
14: 
15: ## [FILL: Language/Framework-Specific Rules]
16: 
17: <!-- Add mandatory rules specific to your stack -->
18: 
19: ## General Rules
20: 
21: - Minimal changes only ‚Äî don't touch unrelated files
22: - No unsolicited features
23: - **[FILL: Project Rule 1]** ‚Äî e.g. "No runtime frameworks, no CDN imports"
24: - **[FILL: Project Rule 2]** ‚Äî e.g. "Relative paths only ‚Äî no leading `/` or `./`"
25: - **[FILL: Immutable contract]** ‚Äî e.g. "Do NOT change binding variant IDs listed in AGENTS.md"
26: 
27: ## AI Orchestration Safety
28: 
29: - No hanging bash loops for agent iteration ‚Äî use Node.js/Python with explicit concurrency limits
30: - MCP Server Tools over raw CLI calls when integrations are available
31: - Every subprocess call must have a strict timeout (e.g. `{ timeout: 10000 }`)
32: 
33: ## Git Hook Policy
34: 
35: - Activate repo-local hooks: `git config core.hooksPath .githooks`
36: - Ensure hooks are executable: `chmod +x .githooks/pre-commit .githooks/commit-msg`
37: - `pre-commit` must pass before final handoff
38: - Commit messages must follow `type(optional-scope): description`
39: 
40: ## Markdown Quality
41: 
42: - **Tables:** Use simplified `| --- | --- |` separator style for consistent alignment
43: - **Code Blocks:** Always include a language specifier (e.g., `text`, `js`, `html`, `css`)
44: - **Headings:** Single H1 per file, logical hierarchy, and unique subheadings
45: 
46: ## Documentation & Comments
47: 
48: - Config files should have a **JSDoc-style block comment** at the top explaining the schema
49: - Use `/* ... */` block comments for section headers and multi-line explanations
50: - Use `//` inline comments sparingly ‚Äî only where intent is non-obvious
51: - Keep all code-level comments in **English**
52: - When adding a new config field, update the file-top comment to document it
</file>

<file path=".markdownlint-cli2.yaml">
 1: config:
 2:   default: true
 3:   MD013: false
 4: ignores:
 5:   - .agent/**
 6:   - .agents/**
 7:   - .claude/**
 8:   - .github/instructions/*.md
 9:   - .github/prompts/*.md
10:   - .github/copilot-instructions.md
11:   - .github/pull_request_template.md
12:   - AGENTS.md
13:   - CHANGELOG.md
14:   - CONTRIBUTING.md
15:   - docs/*.md
</file>

<file path=".pre-commit-config.yaml">
 1: repos:
 2:   - repo: https://github.com/pre-commit/pre-commit-hooks
 3:     rev: v4.6.0
 4:     hooks:
 5:       - id: trailing-whitespace
 6:       - id: end-of-file-fixer
 7:       - id: check-yaml
 8:       - id: check-added-large-files
 9:       - id: check-merge-conflict
10:       - id: check-case-conflict
11:       - id: check-executables-have-shebangs
12:       - id: check-symlinks
13:   # Secret Scanning
14:   - repo: https://github.com/gitleaks/gitleaks
15:     rev: v8.18.2
16:     hooks:
17:       - id: gitleaks
18:         description: Detect hardcoded secrets using Gitleaks
19:         args: ["Protect", "-v"]
20:   # Markdown Formatting & Validation
21:   - repo: https://github.com/DavidAnson/markdownlint-cli2
22:     rev: v0.13.0
23:     hooks:
24:       - id: markdownlint-cli2
25:         description: Check markdown files for style guide violations
26:         # Exclude generated files or third-party docs if necessary
27:         # exclude: ^docs/generated/
28:   # Shell Script Linting
29:   - repo: https://github.com/koalaman/shellcheck-precommit
30:     rev: v0.10.0
31:     hooks:
32:       - id: shellcheck
33:         description: Static analysis tool for shell scripts
34:         args: ["--severity=warning"] # Only fail on warnings and errors, not info
35:   # Custom Hook: Prevent Committing Unresolved Template Markers
36:   - repo: local
37:     hooks:
38:       - id: check-template-markers
39:         name: Check for unresolved [FILL: ...] markers
40:         entry: grep -n "\[FILL:"
41:         language: system
42:         types: [text]
43:         exclude: >
44:           (?x)^(
45:             README\.md|
46:             docs/CUSTOMIZATION-GUIDE\.md|
47:             \.agent/rules/coding-standards\.md|
48:             \.agents/skills/.*|
49:             \.claude/.*|
50:             \.github/copilot-instructions\.md|
51:             CHANGELOG\.md|
52:             docs/.*
53:           )$
</file>

<file path=".repomixignore">
 1: # Repomix Ignore File
 2: # Dieses File definiert, welche Dateien und Ordner vom Repomix-Scan ausgeschlossen werden sollen.
 3: # Ziel: Token sparen und irrelevante Dateien (Binaries, Logs, Builds) entfernen.
 4: 
 5: # --- Dependencies & Build ---
 6: node_modules/
 7: dist/
 8: dist-ssr/
 9: build/
10: out/
11: coverage/
12: .output/
13: 
14: # --- Version Control & IDE ---
15: .git/
16: .github/
17: .vscode/
18: .idea/
19: .cursor/
20: .claude/
21: .DS_Store
22: Thumbs.db
23: 
24: # --- Logs & Temporay Files ---
25: logs/
26: *.log
27: npm-debug.log*
28: yarn-debug.log*
29: pnpm-debug.log*
30: *.tmp
31: *.temp
32: .env
33: .env.*
34: 
35: # --- Lock Files & Dummy Configs (Oft zu gro√ü/unn√∂tig f√ºr LLM-Kontext) ---
36: package.json
37: package-lock.json
38: yarn.lock
39: pnpm-lock.yaml
40: 
41: # --- Assets & Binaries (Bilder, Videos, Fonts) ---
42: # Bilder
43: *.png
44: *.jpg
45: *.jpeg
46: *.gif
47: *.webp
48: *.ico
49: *.bmp
50: *.tiff
51: # SVGs k√∂nnen Code sein, aber oft auch nur Assets. 
52: # Wenn SVGs als Komponenten genutzt werden, diese Zeile auskommentieren.
53: *.svg
54: 
55: # Fonts
56: *.woff
57: *.woff2
58: *.ttf
59: *.eot
60: *.otf
61: fonts/
62: 
63: # Video/Audio
64: *.mp4
65: *.webm
66: *.mov
67: *.mp3
68: *.wav
69: 
70: # Dokumente/Archive
71: *.pdf
72: *.zip
73: *.tar.gz
74: *.rar
75: *.7z
76: 
77: # --- Repomix Self-Exclusion ---
78: repomix-output.xml
79: repomix-output.json
80: repomix-output.txt
81: repomix.config.json
82: 
83: # --- Specific Project Directories ---
84: # Public folder often contains static assets
85: public/
86: dist/*
87: deploy/*
88: docs/prompts/*
89: docs/review-reports/*
90: docs/implementation-plans/*
91: repomix-output.xml
92: _helper_scripts/*
93: assets/*
94: .agent/tmp/*
95: .agent/skills/skill-creator/SKILL.md
96: .agents/skills/skill-creator/SKILL.md
</file>

<file path="AGENTS.md">
  1: # AGENTS.md
  2: 
  3: > Agent instructions for AI coding tools (OpenAI Codex, GitHub Copilot, Cursor, Kilo Code, Google Jules).
  4: > For Claude Code see `CLAUDE.md`. For Kilo Code project rules see `.kilocode/rules/`. For Gemini/Antigravity see `.agent/rules/`.
  5: 
  6: <!-- SETUP: Fill in all [FILL: ...] placeholders. See README.md for the full setup guide. -->
  7: 
  8: ## Project Overview
  9: 
 10: **[FILL: Project Name]** ‚Äî [FILL: 1-2 sentence project description. What does it do? Who uses it?]
 11: 
 12: ## Architecture (Must-Know)
 13: 
 14: <!-- Keep only what agents cannot infer from the code. Remove or replace examples below. -->
 15: 
 16: - **[FILL: Key architectural constraint 1]** ‚Äî e.g. "No runtime frameworks, vanilla JS only"
 17: - **[FILL: Key architectural constraint 2]** ‚Äî e.g. "Config-driven: all data in config/ files, never hardcode in templates"
 18: - **[FILL: Key architectural constraint 3]** ‚Äî e.g. "Touch-first: runs in iOS/Android WebView, all interactions are touch gestures"
 19: - **Repo-local Git hooks** ‚Äî Use `.githooks/` via `git config core.hooksPath .githooks` and keep hooks executable
 20: 
 21: ## File Structure
 22: 
 23: ```text
 24: [FILL: Add your project's key file structure here.
 25: Only include files/folders that agents must know about to work effectively.
 26: Example:
 27: 
 28: src/
 29:   index.ts              ‚Üê Entry point
 30:   api/                  ‚Üê API layer
 31:   components/           ‚Üê UI components
 32: 
 33: config/
 34:   app-config.ts         ‚Üê Application configuration
 35: 
 36: tests/
 37:   *.test.ts             ‚Üê Unit tests
 38: 
 39: docs/
 40:   README.md             ‚Üê Primary documentation
 41: ]
 42: ```
 43: 
 44: ## Coding Rules
 45: 
 46: ### General
 47: 
 48: 1. **[FILL: Rule 1]** ‚Äî e.g. "No runtime frameworks"
 49: 2. **[FILL: Rule 2]** ‚Äî e.g. "Config as Single Source of Truth"
 50: 3. **Minimal changes** ‚Äî Only touch files necessary for the task
 51: 4. **No unsolicited features** ‚Äî Don't add functionality the user didn't ask for
 52: 
 53: ### AI Execution & Orchestration
 54: 
 55: 1. **No hanging bash loops** ‚Äî Never use fire-and-forget bash scripts for multi-step iteration or orchestration.
 56: 2. **Agent-Orchestrated Concurrency** ‚Äî For batch tasks, retrieve the list of targets via a native tool, then have the agent iterate with individual tool calls.
 57: 3. **MCP Server Tools Over CLI** ‚Äî Always prioritize native MCP integrations (e.g., Github MCP Server) over arbitrary CLI commands.
 58: 4. **Strict Subprocess Timeouts** ‚Äî Every CLI command via `child_process` must have a strict timeout (e.g., `{ timeout: 10000 }`).
 59: 
 60: ### Documentation Hygiene
 61: 
 62: 1. **Table Style** ‚Äî Use `| --- | --- |` separator style for all tables.
 63: 2. **Fenced Code Language** ‚Äî Every fenced code block must include a language specifier.
 64: 3. **Heading Quality** ‚Äî Single H1 per file (MD025), logical increments (MD001), unique subheadings within document (MD024).
 65: 
 66: ## Immutable Contract ‚Äî NEVER CHANGE
 67: 
 68: <!-- Document any IDs, keys, or values that are used externally and must never change. -->
 69: <!-- If none: remove this section. -->
 70: 
 71: [FILL: e.g.
 72: - `api-variant-id-1` ‚Äî used in deeplinks
 73: - `SCHEMA_VERSION=3` ‚Äî written to stored data
 74: ]
 75: 
 76: ## Common Tasks
 77: 
 78: Agent Skills (via `/skill-name` in chat) and Prompt Files (via `/command`) are available for common workflows:
 79: 
 80: | Task | Invoke | Details |
 81: | --- | --- | --- |
 82: | QA audit | `/qa-audit` skill | `.agents/skills/qa-audit/SKILL.md` |
 83: | Documentation audit | `/doc-audit` skill | `.agents/skills/doc-audit/SKILL.md` |
 84: | Feature delivery | `/feature-delivery` skill | `.agents/skills/feature-delivery/SKILL.md` |
 85: | Plan a new feature | `/new-feature` prompt | `.github/prompts/new-feature.prompt.md` |
 86: | Review changes pre-commit | `/review-changes` prompt | `.github/prompts/review-changes.prompt.md` |
 87: | Release readiness | `/release-readiness` skill | `.agents/skills/release-readiness/SKILL.md` |
 88: | Hotfix | `/hotfix` skill | `.agents/skills/hotfix/SKILL.md` |
 89: 
 90: ## After Every Change
 91: 
 92: 1. Run `[FILL: your test command, e.g. npm test]`
 93: 2. Commit via `git commit` (hooks run automatically) with format `type(scope): description`
 94: 3. [FILL: Any additional verification steps specific to your project]
 95: 
 96: ## Documentation
 97: 
 98: | Doc | What it covers |
 99: | --- | --- |
100: | [README.md](README.md) | Project overview and quick start |
101: | [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) | Template architecture and design decisions |
102: | [docs/CUSTOMIZATION-GUIDE.md](docs/CUSTOMIZATION-GUIDE.md) | How to fill every `[FILL:]` marker |
103: | [docs/SKILLS-CATALOG.md](docs/SKILLS-CATALOG.md) | All available skills and how to invoke them |
104: | [CHANGELOG.md](CHANGELOG.md) | Version history |
105: [FILL: Add links to project-specific docs, e.g. ENGINEERING-PLAYBOOK.md, API-REFERENCE.md]
</file>

<file path="CHANGELOG.md">
 1: # Changelog
 2: 
 3: All notable changes to the **Awesome Agentic AI Coding Template** are documented in this file.
 4: 
 5: The format follows [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).
 6: This project uses [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
 7: 
 8: ---
 9: 
10: ## [1.0.0] ‚Äî 2026-01-01
11: 
12: ### Added (v1.0.0)
13: 
14: **Multi-agent configuration system**
15: - `CLAUDE.md` ‚Äî always-on project instructions for Claude Code
16: - `AGENTS.md` ‚Äî always-on instructions for GitHub Copilot, Cursor, Codex, Kilo Code, and Jules
17: - `.github/copilot-instructions.md` ‚Äî persistent instructions for VS Code Copilot Chat
18: - `.github/pull_request_template.md` ‚Äî PR quality-gate checklist
19: - `.kilocode/rules/coding-standards.md` ‚Äî Kilo Code project-level custom rules (priority 2)
20: 
21: **Copilot prompt and instruction files**
22: - `.github/prompts/new-feature.prompt.md` ‚Äî structured planning before feature coding
23: - `.github/prompts/review-changes.prompt.md` ‚Äî pre-commit rule compliance review
24: - `.github/instructions/docs.instructions.md` ‚Äî scoped documentation rules
25: - `.github/instructions/qa-audit.instructions.md` ‚Äî scoped QA audit instructions
26: 
27: **Claude Code configuration**
28: - `.claude/rules/coding-standards.md` ‚Äî project coding standards (path-scoped)
29: - `.claude/rules/markdown-quality.md` ‚Äî markdown quality rules (path-scoped)
30: - `.claude/agents/qa-reviewer.md` ‚Äî Claude subagent for automated code review
31: - `.claude/settings.json` ‚Äî Claude Code settings
32: - `.claude/hooks/protect-files.sh` ‚Äî pre-tool-call hook to protect critical files
33: 
34: **Universal skill library (15 skills)** ‚Äî available in `.claude/skills/`, `.agents/skills/`, and `.agent/skills/`
35: - `brainstorming` ‚Äî structured ideation before building
36: - `systematic-debugging` ‚Äî root-cause analysis methodology
37: - `qa-audit` ‚Äî 9-phase security and robustness audit
38: - `doc-audit` ‚Äî documentation drift detection
39: - `feature-delivery` ‚Äî end-to-end feature workflow
40: - `release-readiness` ‚Äî pre-release quality gate
41: - `hotfix` ‚Äî emergency fix workflow
42: - `architecture-change` ‚Äî ADR-gated architecture refactors
43: - `requesting-code-review` ‚Äî structured review request
44: - `writing-plans` ‚Äî spec-to-plan conversion
45: - `frontend-design` ‚Äî production-grade UI implementation
46: - `skill-creator` ‚Äî create new custom skills
47: - `find-skills` ‚Äî discover available skills
48: - `using-superpowers` ‚Äî session start skill discovery
49: - `jules-tasks` ‚Äî Jules task and session management
50: 
51: **Workflow procedures (9 workflows) for Jules/Gemini/Antigravity**
52: - `doc-audit.md` ‚Äî documentation drift audit
53: - `qa-audit.md` ‚Äî quality audit with 9 phases
54: - `feature-delivery.md` ‚Äî feature planning to docs sync
55: - `release-readiness.md` ‚Äî pre-release verification
56: - `architecture-change.md` ‚Äî architecture refactor procedure
57: - `hotfix.md` ‚Äî emergency fix procedure
58: - `pr-analysis.md` ‚Äî pull request quality review
59: - `post-merge-analysis.md` ‚Äî post-merge verification
60: - `get-jules-tasks.md` ‚Äî retrieve Jules task list
61: 
62: **Jules automation scripts** in `.agent/scripts/`
63: - `analyze_pr.sh` ‚Äî PR analysis automation
64: - `fetch_gemini_reviews.py` ‚Äî Gemini review fetcher
65: - `gh-helpers.sh` ‚Äî GitHub CLI helper functions
66: - `jules-api.sh` ‚Äî Jules API interaction helpers
67: - `jules-batch-review.js` ‚Äî batch PR review runner
68: - `jules-create-prs.sh` ‚Äî Jules PR creation automation
69: - `jules-extract-patch.js` ‚Äî patch extraction utility
70: 
71: **Gemini/Antigravity rules**
72: - `.agent/rules/coding-standards.md` ‚Äî always-on rules for Jules/Antigravity
73: 
74: **Placeholder system**
75: - `[FILL: ...]` convention for project-specific configuration points
76: - `<!-- SETUP: ... -->` for inline setup annotations
77: 
78: **Community files**
79: - `README.md` ‚Äî professional marketing README
80: - `CONTRIBUTING.md` ‚Äî contribution guidelines
81: - `CHANGELOG.md` ‚Äî this file
82: - `LICENSE` ‚Äî MIT license
83: - `CODE_OF_CONDUCT.md` ‚Äî Contributor Covenant v2.1
84: - `.github/ISSUE_TEMPLATE/bug_report.md` ‚Äî bug report template
85: - `.github/ISSUE_TEMPLATE/feature_request.md` ‚Äî feature request template
86: 
87: ---
88: 
89: [1.0.0]: https://github.com/yourusername/agentic-coding-template/releases/tag/v1.0.0
</file>

<file path="CLAUDE.md">
 1: # CLAUDE.md
 2: 
 3: > Project-specific rules for Claude Code. Coding detail rules are in `.claude/rules/` (path-scoped, auto-loaded).
 4: > See @README.md for project overview and @package.json for available npm commands.
 5: 
 6: <!-- SETUP: Fill in all [FILL: ...] placeholders before using this repo. See README.md. -->
 7: 
 8: ## Project
 9: 
10: [FILL: Project name] ‚Äî [FILL: 1-sentence description]. [FILL: Tech stack, e.g. "TypeScript, React, Node.js"].
11: 
12: ## Critical Constraints
13: 
14: <!-- Add constraints Claude cannot infer from code alone. Examples: -->
15: - [FILL: Constraint 1 ‚Äî e.g. "No runtime dependencies ‚Äî only stdlib"]
16: - [FILL: Constraint 2 ‚Äî e.g. "All API calls must go through the gateway module"]
17: - **Git hooks** ‚Äî Active via `git config core.hooksPath .githooks`. Ensure pre-commit passes before finalizing.
18: 
19: ## Do NOT
20: 
21: <!-- Hard prohibitions ‚Äî things that would break the project if done wrong. -->
22: - [FILL: Prohibition 1 ‚Äî e.g. "Use localStorage or sessionStorage"]
23: - [FILL: Prohibition 2 ‚Äî e.g. "Commit directly to main without a PR"]
24: 
25: ## Available npm Scripts
26: 
27: @package.json
28: 
29: ## After Every Change
30: 
31: 1. Run `[FILL: test command, e.g. npm test]`
32: 2. Commit via `git commit` (hooks run automatically) with format `type(scope): description`
33: 3. [FILL: Any additional post-change steps specific to your project]
34: 
35: ## Context & Compaction
36: 
37: When compacting, always preserve: the list of modified files, any pending test results, the current task state, and the active branch name.
</file>

<file path="CODE_OF_CONDUCT.md">
 1: # Contributor Covenant Code of Conduct
 2: 
 3: ## Our Pledge
 4: 
 5: We as members, contributors, and leaders pledge to make participation in our community a harassment-free experience for everyone, regardless of age, body size, visible or invisible disability, ethnicity, sex characteristics, gender identity and expression, level of experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, or sexual identity and orientation.
 6: 
 7: We pledge to act and interact in ways that contribute to an open, welcoming, diverse, inclusive, and healthy community.
 8: 
 9: ## Our Standards
10: 
11: Examples of behavior that contributes to a positive environment for our community include:
12: 
13: - Demonstrating empathy and kindness toward other people
14: - Being respectful of differing opinions, viewpoints, and experiences
15: - Giving and gracefully accepting constructive feedback
16: - Accepting responsibility and apologizing to those affected by our mistakes, and learning from the experience
17: - Focusing on what is best not just for us as individuals, but for the overall community
18: 
19: Examples of unacceptable behavior include:
20: 
21: - The use of sexualized language or imagery, and sexual attention or advances of any kind
22: - Trolling, insulting or derogatory comments, and personal or political attacks
23: - Public or private harassment
24: - Publishing others' private information, such as a physical or email address, without their explicit permission
25: - Other conduct which could reasonably be considered inappropriate in a professional setting
26: 
27: ## Enforcement Responsibilities
28: 
29: Community leaders are responsible for clarifying and enforcing our standards of acceptable behavior and will take appropriate and fair corrective action in response to any behavior that they deem inappropriate, threatening, offensive, or harmful.
30: 
31: Community leaders have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct, and will communicate reasons for moderation decisions when appropriate.
32: 
33: ## Scope
34: 
35: This Code of Conduct applies within all community spaces, and also applies when an individual is officially representing the community in public spaces. Examples of representing our community include using an official email address, posting via an official social media account, or acting as an appointed representative at an online or offline event.
36: 
37: ## Enforcement
38: 
39: Instances of abusive, harassing, or otherwise unacceptable behavior may be reported to the community leaders responsible for enforcement at the contact address listed in the repository. All complaints will be reviewed and investigated promptly and fairly.
40: 
41: All community leaders are obligated to respect the privacy and security of the reporter of any incident.
42: 
43: ## Enforcement Guidelines
44: 
45: Community leaders will follow these Community Impact Guidelines in determining the consequences for any action they deem in violation of this Code of Conduct:
46: 
47: ### 1. Correction
48: 
49: **Community Impact**: Use of inappropriate language or other behavior deemed unprofessional or unwelcome in the community.
50: 
51: **Consequence**: A private, written warning from community leaders, providing clarity around the nature of the violation and an explanation of why the behavior was inappropriate. A public apology may be requested.
52: 
53: ### 2. Warning
54: 
55: **Community Impact**: A violation through a single incident or series of actions.
56: 
57: **Consequence**: A warning with consequences for continued behavior. No interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, for a specified period of time. This includes avoiding interactions in community spaces as well as external channels like social media. Violating these terms may lead to a temporary or permanent ban.
58: 
59: ### 3. Temporary Ban
60: 
61: **Community Impact**: A serious violation of community standards, including sustained inappropriate behavior.
62: 
63: **Consequence**: A temporary ban from any sort of interaction or public communication with the community for a specified period of time. No public or private interaction with the people involved, including unsolicited interaction with those enforcing the Code of Conduct, is allowed during this period. Violating these terms may lead to a permanent ban.
64: 
65: ### 4. Permanent Ban
66: 
67: **Community Impact**: Demonstrating a pattern of violation of community standards, including sustained inappropriate behavior, harassment of an individual, or aggression toward or disparagement of classes of individuals.
68: 
69: **Consequence**: A permanent ban from any sort of public interaction within the community.
70: 
71: ## Attribution
72: 
73: This Code of Conduct is adapted from the [Contributor Covenant](https://www.contributor-covenant.org), version 2.1, available at [https://www.contributor-covenant.org/version/2/1/code_of_conduct.html](https://www.contributor-covenant.org/version/2/1/code_of_conduct.html).
74: 
75: Community Impact Guidelines were inspired by [Mozilla's code of conduct enforcement ladder](https://github.com/mozilla/diversity).
76: 
77: For answers to common questions about this code of conduct, see the FAQ at [https://www.contributor-covenant.org/faq](https://www.contributor-covenant.org/faq). Translations are available at [https://www.contributor-covenant.org/translations](https://www.contributor-covenant.org/translations).
</file>

<file path="CONTRIBUTING.md">
  1: # Contributing to Awesome Agentic AI Coding Template
  2: 
  3: Thank you for your interest in contributing. This document explains how to get involved and what kinds of contributions are most valuable.
  4: 
  5: ---
  6: 
  7: ## Table of Contents
  8: 
  9: - [Code of Conduct](#code-of-conduct)
 10: - [What We're Looking For](#what-were-looking-for)
 11: - [How to Contribute](#how-to-contribute)
 12: - [Adding a New Skill](#adding-a-new-skill)
 13: - [Improving an Existing Skill or Workflow](#improving-an-existing-skill-or-workflow)
 14: - [Reporting Issues](#reporting-issues)
 15: - [Pull Request Process](#pull-request-process)
 16: - [Style Guidelines](#style-guidelines)
 17: 
 18: ---
 19: 
 20: ## Code of Conduct
 21: 
 22: This project follows the [Contributor Covenant Code of Conduct](CODE_OF_CONDUCT.md). By participating, you agree to uphold it.
 23: 
 24: ---
 25: 
 26: ## What We're Looking For
 27: 
 28: The most valuable contributions to this template:
 29: 
 30: **New universal skills** ‚Äî Skills that apply to any software project, not just a specific tech stack. Examples:
 31: - Accessibility audit skill
 32: - Performance profiling skill
 33: - Dependency security review skill
 34: - API contract validation skill
 35: 
 36: **New workflow procedures** ‚Äî Structured multi-phase workflows for common engineering tasks not yet covered.
 37: 
 38: **Agent-specific improvements** ‚Äî Better config patterns as new AI tools evolve and introduce new capabilities.
 39: 
 40: **Bug fixes and clarity improvements** ‚Äî Corrections to existing skill definitions, workflow steps, or instruction files that are ambiguous, incorrect, or outdated.
 41: 
 42: **Documentation improvements** ‚Äî Clearer setup guides, better examples, improved placeholder annotations.
 43: 
 44: What we are **not** looking for:
 45: 
 46: - Project-specific skills or workflows (e.g. skills for a specific framework or library ‚Äî these belong in your own project's config, not this template)
 47: - Runtime dependencies or build steps (this is a static file template)
 48: - Framework-specific boilerplate
 49: 
 50: ---
 51: 
 52: ## How to Contribute
 53: 
 54: 1. **Fork** the repository and create a branch from `main`:
 55: 
 56:    ```bash
 57:    git checkout -b feat/my-new-skill
 58:    ```
 59: 
 60: 2. **Make your changes** ‚Äî see the sections below for specific guidance.
 61: 
 62: 3. **Test your changes** by using the template in an actual project.
 63: 
 64: 4. **Commit** using [conventional commit format](https://www.conventionalcommits.org/):
 65: 
 66:    ```text
 67:    feat(skills): add accessibility-audit skill
 68:    fix(workflows): correct phase numbering in doc-audit
 69:    docs(readme): improve quick start formatting
 70:    ```
 71: 
 72: 5. **Open a pull request** against `main`. Use the PR template ‚Äî it will be shown automatically.
 73: 
 74: ---
 75: 
 76: ## Adding a New Skill
 77: 
 78: Skills live in three mirrored locations:
 79: 
 80: - `.claude/skills/<skill-name>/` ‚Äî Claude Code skill
 81: - `.agents/skills/<skill-name>/` ‚Äî Universal skill (all tools)
 82: - `.agent/skills/<skill-name>/` ‚Äî Jules/Gemini skill
 83: 
 84: **Required files for a new skill:**
 85: 
 86: ```text
 87: .agents/skills/my-skill/
 88: ‚îú‚îÄ‚îÄ SKILL.md          ‚Üê The skill definition (required)
 89: ‚îî‚îÄ‚îÄ LICENSE.txt       ‚Üê MIT license (copy from any existing skill)
 90: ```
 91: 
 92: **`SKILL.md` structure:**
 93: 
 94: ```markdown
 95: # Skill Name
 96: 
 97: ## Purpose
 98: One-sentence description of what this skill does.
 99: 
100: ## When to Use
101: - Bullet list of triggering scenarios
102: 
103: ## When NOT to Use
104: - Bullet list of cases where another skill or approach is better
105: 
106: ## Procedure
107: Step-by-step instructions the agent will follow.
108: 
109: ## Output
110: What the skill produces / what the user receives.
111: ```
112: 
113: **Naming conventions:**
114: 
115: - Directory name: `kebab-case` (e.g. `accessibility-audit`)
116: - Invoke command: `/skill-name` (matches directory name)
117: - Keep skill names short and action-oriented
118: 
119: After adding a skill in one location, mirror it to the other two locations.
120: 
121: ---
122: 
123: ## Improving an Existing Skill or Workflow
124: 
125: Before editing:
126: 
127: 1. Read the current file carefully end-to-end.
128: 2. Make sure your change doesn't break the logical flow of the procedure.
129: 3. Keep changes focused ‚Äî one improvement per PR is easier to review than a batch rewrite.
130: 
131: For workflow files (`.agent/workflows/`), every phase should be:
132: 
133: - Clearly numbered
134: - Have explicit inputs and expected outputs
135: - Reference specific files or commands where applicable
136: 
137: ---
138: 
139: ## Reporting Issues
140: 
141: Use the GitHub issue templates:
142: 
143: - **Bug report** ‚Äî for skills, workflows, or instructions that produce incorrect agent behavior
144: - **Feature request** ‚Äî for new skills, workflows, or improvements
145: 
146: When reporting a bug, include:
147: 
148: - Which AI agent you were using (Claude Code, Copilot, etc.)
149: - Which skill or workflow was involved
150: - What the agent did vs. what you expected
151: - The relevant excerpt from the skill/workflow definition
152: 
153: ---
154: 
155: ## Pull Request Process
156: 
157: 1. All PRs require at least one review before merging.
158: 2. Use the PR template ‚Äî it includes a checklist for common quality checks.
159: 3. PRs that add or modify skill/workflow files should include a brief description of how the change was tested (which agent, which project).
160: 4. PRs that change `README.md` significantly should update the table of contents if applicable.
161: 
162: **Branch naming:**
163: 
164: ```text
165: feat/      ‚Äî new skills, workflows, or capabilities
166: fix/       ‚Äî corrections to existing content
167: docs/      ‚Äî documentation-only changes
168: refactor/  ‚Äî restructuring without functional change
169: ```
170: 
171: ---
172: 
173: ## Style Guidelines
174: 
175: These mirror the rules already in the template itself:
176: 
177: **Markdown**
178: 
179: - Use `| --- | --- |` table separators (aligned pipes)
180: - Every fenced code block must have a language specifier (even `text` for plain text)
181: - Single H1 per file (`# Title`)
182: - Heading hierarchy must be incremental (no H3 without H2)
183: - Unique subheadings within a document
184: 
185: **Placeholders**
186: 
187: - Use `[FILL: description]` for values that must be customized per project
188: - Use `<!-- SETUP: description -->` for inline setup annotations in HTML/YAML
189: - Never add project-specific data to universal files ‚Äî mark it with `[FILL:]` instead
190: 
191: **Language**
192: 
193: - All files in English
194: - Action-oriented headings (e.g. "Adding a New Skill" not "Skills")
195: 
196: ---
197: 
198: Thank you for helping make this template better for every developer who uses it.
</file>

<file path="docs/ai-coding-agents-best-practices.md">
   1: # AI Coding Agents ‚Äî Best Practices & Optimales Setup
   2: 
   3: > Umfassender Guide f√ºr Claude Code, GitHub Copilot, Kilo Code, Google Antigravity/Jules und weitere AI Coding Agents (Stand: Februar 2026). Quellen: [code.claude.com/docs](https://code.claude.com/docs/en/overview), [kilo.ai/docs](https://kilo.ai/docs), [code.visualstudio.com/docs/copilot](https://code.visualstudio.com/docs/copilot/customization/overview).
   4: 
   5: **Hauptfokus:** Claude Code (Sektionen 0‚Äì17) ¬∑ GitHub Copilot (Sektion 18) ¬∑ Kilo Code (Sektion 19)
   6: 
   7: ---
   8: 
   9: ## Inhaltsverzeichnis
  10: 
  11: 0. [Quick-Start: Neues Repo in 15 Minuten](#0-quick-start-neues-repo-in-15-minuten)
  12: 1. [Memory-Hierarchie](#1-memory-hierarchie)
  13: 2. [CLAUDE.md ‚Äî Die Hauptdatei](#2-claudemd--die-hauptdatei)
  14: 3. [`.claude/rules/` ‚Äî Modulare Regeln](#3-clauderules--modulare-regeln)
  15: 4. [`.claude/skills/` ‚Äî On-Demand-Wissen](#4-claudeskills--on-demand-wissen)
  16: 5. [`.claude/commands/` ‚Äî Slash Commands](#5-claudecommands--slash-commands)
  17: 6. [`.claude/agents/` ‚Äî Custom Subagents](#6-claudeagents--custom-subagents)
  18: 7. [`.claude/hooks/` ‚Äî Deterministische Hooks](#7-claudehooks--deterministische-hooks)
  19: 8. [Auto Memory](#8-auto-memory)
  20: 9. [`@`-Import-Syntax](#9-import-syntax)
  21: 10. [CLAUDE.local.md ‚Äî Pers√∂nliche Overrides](#10-claudelocalmd--pers√∂nliche-overrides)
  22: 11. [Anti-Patterns & h√§ufige Fehler](#11-anti-patterns--h√§ufige-fehler)
  23: 12. [Optimale Verzeichnisstruktur (exemplarisch)](#12-optimale-verzeichnisstruktur-exemplarisch)
  24: 13. [Checkliste: CLAUDE.md Audit](#13-checkliste-claudemd-audit)
  25: 14. [Agent Skills Open Standard ‚Äî Plattformvergleich](#14-agent-skills-open-standard--plattformvergleich)
  26: 15. [MCP-Server ‚Äî Model Context Protocol](#15-mcp-server--model-context-protocol)
  27: 16. [Permissions & `settings.json`](#16-permissions--settingsjson)
  28: 17. [Multi-Root Workspaces & Monorepos](#17-multi-root-workspaces--monorepos)
  29: 18. [GitHub Copilot in VS Code ‚Äî Optimales Setup](#18-github-copilot-in-vs-code--optimales-setup)
  30: 19. [Kilo Code ‚Äî Optimales Setup](#19-kilo-code--optimales-setup)
  31: 
  32: ---
  33: 
  34: ## 0. Quick-Start: Neues Repo in 15 Minuten
  35: 
  36: Diese Schritt-f√ºr-Schritt-Anleitung bringt ein leeres Repo auf ein vollst√§ndiges Claude Code Setup. Die einzelnen Features werden in den nachfolgenden Sektionen im Detail erkl√§rt.
  37: 
  38: ### Schritt 1: CLAUDE.md erzeugen
  39: 
  40: ```bash
  41: # Option A: Claude generiert eine Starter-Datei basierend auf der Codebase
  42: /init
  43: 
  44: # Option B: Manuell erstellen (empfohlen f√ºr volle Kontrolle)
  45: touch CLAUDE.md
  46: ```
  47: 
  48: Minimales Starter-Template (anpassen!):
  49: 
  50: ```markdown
  51: # Project
  52: 
  53: [Projektname] ‚Äî [1-Satz-Beschreibung]. [Sprache/Stack].
  54: 
  55: ## Critical Constraints
  56: 
  57: - [Constraint 1 die Claude nicht erraten kann]
  58: - [Constraint 2]
  59: 
  60: ## Commands
  61: 
  62: - Build: `npm run build`
  63: - Test: `npm test`
  64: - Lint: `npm run lint`
  65: 
  66: ## Do NOT
  67: 
  68: - [Verbot 1]
  69: - [Verbot 2]
  70: 
  71: @package.json
  72: ```
  73: 
  74: **Ziel:** 50‚Äì120 Zeilen. Alles was Claude nicht selbst aus dem Code ablesen kann.
  75: 
  76: ### Schritt 2: Repo-lokale Git-Hooks (optional)
  77: 
  78: ```bash
  79: mkdir -p .githooks
  80: # Hooks erstellen (pre-commit, commit-msg, etc.)
  81: git config core.hooksPath .githooks
  82: chmod +x .githooks/*
  83: ```
  84: 
  85: In CLAUDE.md dokumentieren:
  86: 
  87: ```markdown
  88: - Activate hooks: `git config core.hooksPath .githooks`
  89: ```
  90: 
  91: ### Schritt 3: Modulare Rules anlegen
  92: 
  93: ```bash
  94: mkdir -p .claude/rules
  95: ```
  96: 
  97: Erstelle pfad-spezifische Regeln f√ºr wiederkehrende Standards:
  98: 
  99: ```markdown
 100: <!-- .claude/rules/testing.md -->
 101: ---
 102: paths: ["**/*.test.*", "**/*.spec.*"]
 103: ---
 104: 
 105: # Testing Standards
 106: 
 107: - Use `describe/it` blocks with descriptive names
 108: - One assertion per test (where practical)
 109: - Arrange-Act-Assert pattern
 110: ```
 111: 
 112: ### Schritt 4: Skills installieren
 113: 
 114: ```bash
 115: # Universelle Basis-Skills (empfohlen):
 116: npx skills add vercel-labs/skills --skill find-skills --copy -a claude-code -y
 117: npx skills add anthropics/skills --skill frontend-design --skill skill-creator --copy -a claude-code -y
 118: npx skills add obra/superpowers --skill brainstorming --skill writing-plans --skill systematic-debugging --skill requesting-code-review --skill using-superpowers --copy -a claude-code -y
 119: ```
 120: 
 121: ### Schritt 5: Slash Commands erstellen
 122: 
 123: ```bash
 124: mkdir -p .claude/commands
 125: ```
 126: 
 127: F√ºr **Aktions-Workflows** (Deploy, Hotfix, Release) unbedingt `disable-model-invocation: true` setzen ‚Äî sonst kann Claude den Workflow automatisch und unbeabsichtigt ausl√∂sen:
 128: 
 129: ```markdown
 130: <!-- .claude/commands/deploy.md -->
 131: ---
 132: description: Deploy the application after tests
 133: disable-model-invocation: true
 134: ---
 135: 
 136: Deploy the application:
 137: 
 138: 1. Run tests: `npm test`
 139: 2. Build: `npm run build`
 140: 3. If all green, deploy with: `npm run deploy`
 141: 4. Verify the deployment is healthy
 142: ```
 143: 
 144: Aufruf: `/deploy`
 145: 
 146: > **Faustregel:** `disable-model-invocation: true` auf alle Workflows mit Seiteneffekten (Deploy, Commit, Hotfix, Release). Nur weglassen bei reinen Informations- oder Analyse-Commands.
 147: 
 148: ### Schritt 6: Deterministische Hooks einrichten
 149: 
 150: ```bash
 151: mkdir -p .claude/hooks
 152: ```
 153: 
 154: Claude kann Hooks auch selbst schreiben:
 155: 
 156: ```text
 157: Write a hook that runs eslint after every file edit
 158: Write a hook that blocks writes to the migrations folder
 159: ```
 160: 
 161: Oder interaktiv: `/hooks`
 162: 
 163: > **WICHTIG:** Ein Hook-Script ohne Registrierung in `.claude/settings.json` ist **Dead Code** ‚Äî er wird niemals ausgef√ºhrt. Nach dem Erstellen eines Hooks muss er explizit registriert werden:
 164: 
 165: ```json
 166: // .claude/settings.json
 167: {
 168:   "hooks": {
 169:     "PreToolUse": [
 170:       {
 171:         "matcher": "Edit|Write",
 172:         "hooks": [{ "type": "command", "command": ".claude/hooks/protect-files.sh" }]
 173:       }
 174:     ]
 175:   }
 176: }
 177: ```
 178: 
 179: Details: [Section 7 ‚Äî Hooks](#7-claudehooks--deterministische-hooks)
 180: 
 181: ### Schritt 7: MCP-Server konfigurieren
 182: 
 183: ```bash
 184: # GitHub-Integration (erfordert gh CLI):
 185: claude mcp add github -- gh copilot mcp
 186: 
 187: # Filesystem-Server (z.B. f√ºr Docs au√üerhalb des Repos):
 188: claude mcp add filesystem -- npx @anthropic/mcp-filesystem /path/to/docs
 189: 
 190: # Postgres-Anbindung:
 191: claude mcp add postgres -- npx @anthropic/mcp-postgres $DATABASE_URL
 192: ```
 193: 
 194: Details: [Section 15 ‚Äî MCP-Server](#15-mcp-server--model-context-protocol)
 195: 
 196: ### Schritt 8: Permissions konfigurieren
 197: 
 198: ```text
 199: # In Claude Code:
 200: /permissions
 201: 
 202: # Typische Einstellungen:
 203: Allow: Bash(npm test), Bash(npm run lint), Bash(git *)
 204: Deny: Bash(rm -rf *), Bash(curl *)
 205: ```
 206: 
 207: Details: [Section 16 ‚Äî Permissions](#16-permissions--settingsjson)
 208: 
 209: ### Schritt 9: Multi-Agent-Support (optional)
 210: 
 211: Wenn andere AI-Tools das Repo nutzen (Copilot, Codex, Gemini, Cursor):
 212: 
 213: ```bash
 214: # AGENTS.md f√ºr OpenAI Codex / Gemini CLI / Cursor
 215: touch AGENTS.md
 216: 
 217: # Skills f√ºr alle Tools verf√ºgbar machen
 218: mkdir -p .agents/skills
 219: cp -r .claude/skills/* .agents/skills/
 220: 
 221: # Copilot-Instruktionen
 222: mkdir -p .github/instructions
 223: touch .github/copilot-instructions.md
 224: ```
 225: 
 226: Details: [Section 14 ‚Äî Plattformvergleich](#14-agent-skills-open-standard--plattformvergleich)
 227: 
 228: ### Schritt 10: Verifizieren
 229: 
 230: ```bash
 231: # Context pr√ºfen (was Claude beim Start sieht):
 232: /context
 233: 
 234: # Auto Memory aktivieren (opt-in):
 235: export CLAUDE_CODE_DISABLE_AUTO_MEMORY=0
 236: 
 237: # Test-Session starten:
 238: claude
 239: ```
 240: 
 241: ### Checkliste nach dem Setup
 242: 
 243: - [ ] CLAUDE.md ist ‚â§120 Zeilen und enth√§lt nur nicht-offensichtliche Infos
 244: - [ ] `.claude/rules/` hat mindestens eine pfad-spezifische Regel
 245: - [ ] Skills installiert und mit `/context` sichtbar
 246: - [ ] `.gitignore` enth√§lt `CLAUDE.local.md` (wird automatisch hinzugef√ºgt)
 247: - [ ] Hooks in `.claude/settings.json` registriert (nicht nur das Script erstellt!)
 248: - [ ] Hooks funktionieren (`git commit` l√∂st pre-commit aus)
 249: - [ ] Aktions-Commands haben `disable-model-invocation: true` im Frontmatter
 250: - [ ] MCP-Server getestet (falls konfiguriert)
 251: 
 252: ---
 253: 
 254: ## 1. Memory-Hierarchie
 255: 
 256: Claude Code l√§dt Instruktionen aus mehreren Quellen in einer definierten Hierarchie. Spezifischere Instruktionen √ºberschreiben allgemeinere:
 257: 
 258: | Ebene | Pfad | Scope | Inhalt | Wer profitiert |
 259: | --- | --- | --- | --- | --- |
 260: | **Managed Policy** | `C:\Program Files\ClaudeCode\CLAUDE.md` (Win) / `/Library/Application Support/ClaudeCode/CLAUDE.md` (Mac) | Organisations-weit | Company-Standards, Security-Policies | Alle in der Organisation |
 261: | **User Memory** | `~/.claude/CLAUDE.md` | Alle Projekte eines Users | Pers√∂nliche Pr√§ferenzen, Shortcuts | Nur du (global) |
 262: | **User Rules** | `~/.claude/rules/*.md` | Alle Projekte eines Users | Pers√∂nliche Coding-Regeln | Nur du (global) |
 263: | **Project Memory** | `./CLAUDE.md` oder `./.claude/CLAUDE.md` | Projekt (Team-shared) | Architektur, Coding-Standards, Workflows | Team via Git |
 264: | **Project Memory (local)** | `./CLAUDE.local.md` | Projekt (nur du) | Pers√∂nliche Sandbox-URLs, Test-Daten | Nur du (aktuelles Projekt) |
 265: | **Project Rules** | `./.claude/rules/*.md` | Projekt (Team-shared) | Sprach-/Pfad-spezifische Guidelines | Team via Git |
 266: | **Auto Memory** | `~/.claude/projects/<project>/memory/` | Projekt (nur du) | Claude's automatische Notizen | Nur du (per Projekt) |
 267: 
 268: ### Lade-Verhalten
 269: 
 270: - CLAUDE.md-Dateien **oberhalb** des Working Directory werden **vollst√§ndig** beim Start geladen
 271: - CLAUDE.md-Dateien in **Unterverzeichnissen** werden **on-demand** geladen, wenn Claude Dateien dort liest
 272: - `.claude/rules/*.md` werden beim Start geladen (au√üer pfad-scoped Regeln ‚Äî diese on-demand)
 273: - Auto Memory: nur die **ersten 200 Zeilen** von `MEMORY.md` werden geladen
 274: 
 275: ---
 276: 
 277: ## 2. CLAUDE.md ‚Äî Die Hauptdatei
 278: 
 279: ### Goldene Regel
 280: 
 281: > *"Keep it concise. For each line, ask: 'Would removing this cause Claude to make mistakes?' If not, cut it. Bloated CLAUDE.md files cause Claude to ignore your actual instructions!"*
 282: 
 283: ### Was hinein geh√∂rt
 284: 
 285: | Kategorie | Beispiel |
 286: | --- | --- |
 287: | Bash-Commands die Claude nicht erraten kann | `npm run test:sync-baseline` |
 288: | Code-Style die von Defaults abweicht | "Use 2-space indentation", "IIFE pattern for configs" |
 289: | Test-Anweisungen & bevorzugte Runner | "Run `npm test` for unit tests, `npm run test:webview` for E2E" |
 290: | Repo-Etikette | "Commit format: `type(scope): description`" |
 291: | Projekt-spezifische Architektur-Entscheidungen | "Config-driven: all data in config/*.js (IIFE + Object.freeze)" |
 292: | Dev-Environment Besonderheiten | "Activate hooks: `git config core.hooksPath .githooks`" |
 293: | H√§ufige Gotchas / nicht-offensichtliches Verhalten | "No leading `/` or `./` in paths ‚Äî breaks iFrame context" |
 294: | Compaction-Hinweis | "When compacting, always preserve: list of modified files, pending test results, current task state, active branch name" |
 295: 
 296: ### Was NICHT hinein geh√∂rt
 297: 
 298: | Kategorie | Warum nicht | Alternative |
 299: | --- | --- | --- |
 300: | File-by-file Beschreibungen der Codebase | Claude kann Code lesen | `@`-Imports oder Skills |
 301: | Standard-Sprachkonventionen die Claude kennt | Redundant ‚Äî Claude wei√ü ES6, CSS, HTML | Weglassen |
 302: | Detaillierte API-Dokumentation | Zu lang | Verlinken statt kopieren |
 303: | Information die sich h√§ufig √§ndert | Drift-Risiko | Dynamisch ableiten (Scripts) |
 304: | Lange Erkl√§rungen oder Tutorials | F√ºllt Context | In Skills auslagern |
 305: | Selbstverst√§ndliches ("write clean code") | Kein Mehrwert | Weglassen |
 306: 
 307: ### Formatierung
 308: 
 309: - **Bullet Points unter Markdown-Headings** ‚Äî keine Prosa-Abs√§tze
 310: - **Spezifisch statt vage**: `"Use ES modules (import/export)"` > `"Use modern syntax"`
 311: - **Emphasis f√ºr kritische Regeln**: `IMPORTANT`, `YOU MUST`, `NEVER` erh√∂ht die Einhaltung
 312: - **Kein festes Format vorgeschrieben** ‚Äî aber kurz und menschenlesbar
 313: 
 314: ### Empfohlene L√§nge
 315: 
 316: Anthropic nennt kein hartes Limit, warnt aber wiederholt vor zu langen Dateien. Aus der Praxis:
 317: 
 318: | Zeilen | Bewertung |
 319: | --- | --- |
 320: | 50‚Äì80 | Ideal f√ºr kleine/mittlere Projekte |
 321: | 80‚Äì120 | Akzeptabel f√ºr komplexe Projekte |
 322: | 120‚Äì150 | Grenzbereich ‚Äî pr√ºfen ob Auslagerung in Rules/Skills m√∂glich |
 323: | 150+ | Problematisch ‚Äî Regeln werden ignoriert, Context wird verschwendet |
 324: 
 325: ### Bootstrap
 326: 
 327: ```bash
 328: # Generiert eine Starter-CLAUDE.md basierend auf der Codebase:
 329: /init
 330: ```
 331: 
 332: ### Standort-Optionen
 333: 
 334: | Pfad | Wann verwenden |
 335: | --- | --- |
 336: | `./CLAUDE.md` (Root) | Standard ‚Äî sichtbar, ins Git einchecken |
 337: | `./.claude/CLAUDE.md` | Wenn Root-Verzeichnis sauber bleiben soll |
 338: | Beide | M√∂glich ‚Äî werden kombiniert geladen |
 339: 
 340: ---
 341: 
 342: ## 3. `.claude/rules/` ‚Äî Modulare Regeln
 343: 
 344: ### Wann statt CLAUDE.md
 345: 
 346: - Projekt hat **mehrere Domains** (Frontend, Backend, Config, Docs)
 347: - Regeln gelten nur f√ºr **bestimmte Dateitypen/Pfade**
 348: - CLAUDE.md wird zu lang (>120 Zeilen)
 349: 
 350: ### Grundstruktur
 351: 
 352: ```text
 353: .claude/rules/
 354: ‚îú‚îÄ‚îÄ code-style.md         # Allgemeine Code-Konventionen
 355: ‚îú‚îÄ‚îÄ testing.md            # Test-Konventionen
 356: ‚îú‚îÄ‚îÄ security.md           # Sicherheitsanforderungen
 357: ‚îú‚îÄ‚îÄ frontend/
 358: ‚îÇ   ‚îú‚îÄ‚îÄ css-touch.md      # Touch-spezifische CSS-Regeln
 359: ‚îÇ   ‚îî‚îÄ‚îÄ accessibility.md  # ARIA/Keyboard-Patterns
 360: ‚îî‚îÄ‚îÄ backend/
 361:     ‚îî‚îÄ‚îÄ api.md            # API-Design-Regeln
 362: ```
 363: 
 364: ### Pfad-spezifische Regeln (Conditional Loading)
 365: 
 366: Regeln k√∂nnen mit `paths:` Frontmatter auf bestimmte Dateien beschr√§nkt werden. Sie werden **nur geladen**, wenn Claude an passenden Dateien arbeitet:
 367: 
 368: ```markdown
 369: ---
 370: paths:
 371:   - "newsletter-template.html"
 372:   - "config/*.js"
 373: ---
 374: 
 375: # Touch-First CSS Rules
 376: 
 377: - `touch-action: manipulation` on every interactive element
 378: - All `:hover` rules inside `@media (hover: hover) and (pointer: fine)`
 379: - `-webkit-tap-highlight-color: transparent` on tappable elements
 380: ```
 381: 
 382: ### Glob-Patterns
 383: 
 384: | Pattern | Matches |
 385: | --- | --- |
 386: | `**/*.ts` | Alle TypeScript-Dateien |
 387: | `src/**/*` | Alles unter src/ |
 388: | `*.md` | Markdown nur im Root |
 389: | `src/components/*.tsx` | React-Komponenten in einem Ordner |
 390: 
 391: Brace Expansion wird unterst√ºtzt:
 392: 
 393: ```yaml
 394: paths:
 395:   - "src/**/*.{ts,tsx}"        # .ts UND .tsx
 396:   - "{src,lib}/**/*.ts"        # src/ ODER lib/
 397: ```
 398: 
 399: ### Regeln ohne `paths:`
 400: 
 401: Werden **bedingungslos geladen**, wie Inhalt in CLAUDE.md. Selbe Priorit√§t wie `.claude/CLAUDE.md`.
 402: 
 403: ### Unterverzeichnisse
 404: 
 405: Regeln k√∂nnen in Subdirectories organisiert werden. Alle `.md`-Dateien werden **rekursiv** entdeckt:
 406: 
 407: ```text
 408: .claude/rules/
 409: ‚îú‚îÄ‚îÄ frontend/
 410: ‚îÇ   ‚îú‚îÄ‚îÄ react.md
 411: ‚îÇ   ‚îî‚îÄ‚îÄ styles.md
 412: ‚îú‚îÄ‚îÄ backend/
 413: ‚îÇ   ‚îú‚îÄ‚îÄ api.md
 414: ‚îÇ   ‚îî‚îÄ‚îÄ database.md
 415: ‚îî‚îÄ‚îÄ general.md
 416: ```
 417: 
 418: ### Symlinks
 419: 
 420: ```bash
 421: # Shared Rules √ºber Projekte hinweg:
 422: ln -s ~/shared-claude-rules .claude/rules/shared
 423: 
 424: # Einzelne Rule-Dateien:
 425: ln -s ~/company-standards/security.md .claude/rules/security.md
 426: ```
 427: 
 428: Symlinks werden aufgel√∂st und normal geladen. Zirkul√§re Symlinks werden erkannt.
 429: 
 430: ### User-Level Rules
 431: 
 432: Pers√∂nliche Regeln f√ºr **alle Projekte** in `~/.claude/rules/`:
 433: 
 434: ```text
 435: ~/.claude/rules/
 436: ‚îú‚îÄ‚îÄ preferences.md    # Pers√∂nliche Coding-Pr√§ferenzen
 437: ‚îî‚îÄ‚îÄ workflows.md      # Bevorzugte Workflows
 438: ```
 439: 
 440: User-Level-Rules werden **vor** Projekt-Rules geladen (niedrigere Priorit√§t).
 441: 
 442: ---
 443: 
 444: ## 4. `.claude/skills/` ‚Äî On-Demand-Wissen
 445: 
 446: ### Wof√ºr
 447: 
 448: Skills erweitern Claude's Wissen mit **dom√§nenspezifischen Informationen** oder **wiederholbaren Workflows**. Im Unterschied zu Rules/CLAUDE.md werden Skills **nicht immer geladen**, sondern nur wenn relevant.
 449: 
 450: > *"CLAUDE.md is loaded every session, so only include things that apply broadly. For domain knowledge or workflows that are only relevant sometimes, use skills instead. Claude loads them on demand without bloating every conversation."*
 451: 
 452: ### Struktur
 453: 
 454: ```text
 455: .claude/skills/
 456: ‚îú‚îÄ‚îÄ api-conventions/
 457: ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
 458: ‚îú‚îÄ‚îÄ fix-issue/
 459: ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md
 460: ‚îî‚îÄ‚îÄ deploy/
 461:     ‚îî‚îÄ‚îÄ SKILL.md
 462: ```
 463: 
 464: ### Skill-Datei Format
 465: 
 466: ```markdown
 467: ---
 468: name: api-conventions
 469: description: REST API design conventions for our services
 470: ---
 471: 
 472: # API Conventions
 473: 
 474: - Use kebab-case for URL paths
 475: - Use camelCase for JSON properties
 476: - Always include pagination for list endpoints
 477: - Version APIs in the URL path (/v1/, /v2/)
 478: ```
 479: 
 480: ### Workflow-Skills mit Invokation
 481: 
 482: Skills k√∂nnen als **aufrufbare Workflows** definiert werden:
 483: 
 484: ```markdown
 485: ---
 486: name: fix-issue
 487: description: Fix a GitHub issue
 488: disable-model-invocation: true
 489: ---
 490: 
 491: Analyze and fix the GitHub issue: $ARGUMENTS.
 492: 
 493: 1. Use `gh issue view` to get the issue details
 494: 2. Understand the problem described in the issue
 495: 3. Search the codebase for relevant files
 496: 4. Implement the necessary changes to fix the issue
 497: 5. Write and run tests to verify the fix
 498: 6. Ensure code passes linting and type checking
 499: 7. Create a descriptive commit message
 500: 8. Push and create a PR
 501: ```
 502: 
 503: Aufruf: `/fix-issue 1234`
 504: 
 505: - `$ARGUMENTS` wird durch die √ºbergebenen Argumente ersetzt
 506: - `disable-model-invocation: true` verhindert automatische Ausl√∂sung ‚Äî nur manuell per `/skill-name`
 507: 
 508: ### Empfohlene Basis-Skills
 509: 
 510: Die folgenden 8 universellen Skills bilden eine solide Grundlage f√ºr jedes Projekt. Installation via `npx skills add <repo> --skill <name> --copy -a claude-code -y`:
 511: 
 512: | Skill | Quelle | Beschreibung |
 513: | --- | --- | --- |
 514: | `find-skills` | [vercel-labs/skills](https://github.com/vercel-labs/skills) | Hilft beim Entdecken und Installieren weiterer Skills aus dem √ñkosystem |
 515: | `frontend-design` | [anthropics/skills](https://github.com/anthropics/skills) | Production-grade Frontend-Interfaces mit hoher Designqualit√§t |
 516: | `skill-creator` | [anthropics/skills](https://github.com/anthropics/skills) | Anleitung zum Erstellen eigener Skills (Struktur, Frontmatter, Progressive Disclosure) |
 517: | `brainstorming` | [obra/superpowers](https://github.com/obra/superpowers) | Socratic Design Refinement ‚Äî kl√§rt Anforderungen vor dem Coden |
 518: | `writing-plans` | [obra/superpowers](https://github.com/obra/superpowers) | Zerlegt Arbeit in kleine, verifizierbare Implementierungsschritte |
 519: | `systematic-debugging` | [obra/superpowers](https://github.com/obra/superpowers) | 4-Phasen Root-Cause-Analyse (Observe ‚Üí Hypothesize ‚Üí Test ‚Üí Fix) |
 520: | `requesting-code-review` | [obra/superpowers](https://github.com/obra/superpowers) | Pre-Review-Checkliste, pr√ºft Code gegen Plan und Qualit√§tskriterien |
 521: | `using-superpowers` | [obra/superpowers](https://github.com/obra/superpowers) | Einf√ºhrung in das Superpowers-Skill-System |
 522: 
 523: **Installation aller 8 Skills:**
 524: 
 525: ```bash
 526: # Vercel + Anthropic Skills
 527: npx skills add vercel-labs/skills --skill find-skills --copy -a claude-code -y
 528: npx skills add anthropics/skills --skill frontend-design --skill skill-creator --copy -a claude-code -y
 529: 
 530: # Obra Superpowers Skills
 531: npx skills add obra/superpowers --skill brainstorming --skill writing-plans --skill systematic-debugging --skill requesting-code-review --skill using-superpowers --copy -a claude-code -y
 532: ```
 533: 
 534: **Multi-Agent-Sync:** Um dieselben Skills auch f√ºr Copilot, Codex, Cursor etc. verf√ºgbar zu machen:
 535: 
 536: ```bash
 537: mkdir -p .agents/skills
 538: cp -r .claude/skills/* .agents/skills/
 539: ```
 540: 
 541: > **Hinweis:** Projektspezifische Skills (z.B. `add_newsletter_brand`) kommen zus√§tzlich dazu und werden nicht hier aufgelistet.
 542: 
 543: ### Skills vs. Rules vs. CLAUDE.md
 544: 
 545: | Feature | CLAUDE.md | Rules | Skills |
 546: | --- | --- | --- | --- |
 547: | Laden | Immer (jede Session) | Immer oder pfad-bedingt | On-demand |
 548: | Zweck | Globale Projekt-Regeln | Spezifische Coding-Standards | Dom√§nen-Wissen, Workflows |
 549: | Context-Verbrauch | Permanent | Permanent (oder bedingt) | Nur wenn ben√∂tigt |
 550: | Aufruf | Automatisch | Automatisch | Automatisch oder `/skill-name` |
 551: | Ideal f√ºr | Constraints, Commands | CSS-Regeln, Test-Konventionen | Brand hinzuf√ºgen, Deploy, Audit |
 552: 
 553: ---
 554: 
 555: ## 5. `.claude/commands/` ‚Äî Slash Commands
 556: 
 557: ### Wof√ºr
 558: 
 559: Slash Commands sind **vordefinierte Prompts**, die Claude mit `/command-name` ausf√ºhrt. Sie sind die Claude-Code-Variante von `.agent/workflows/`.
 560: 
 561: ### Struktur
 562: 
 563: ```text
 564: .claude/commands/
 565: ‚îú‚îÄ‚îÄ add-brand.md
 566: ‚îú‚îÄ‚îÄ doc-audit.md
 567: ‚îú‚îÄ‚îÄ feature-delivery.md
 568: ‚îî‚îÄ‚îÄ hotfix.md
 569: ```
 570: 
 571: ### Frontmatter
 572: 
 573: ```markdown
 574: ---
 575: description: Full checklist for adding a new brand
 576: allowed-tools: Read, Grep, Glob, Edit, MultiEdit, Write, Bash
 577: ---
 578: 
 579: # Add Brand
 580: 
 581: Follow `.agent/workflows/add-brand.md` strictly.
 582: ...
 583: ```
 584: 
 585: - `description` ‚Äî Kurzbeschreibung (wird in der Command-Liste angezeigt)
 586: - `allowed-tools` ‚Äî Einschr√§nkung der verf√ºgbaren Tools f√ºr diesen Command
 587: 
 588: #### `disable-model-invocation: true` ‚Äî Pflicht f√ºr Aktions-Workflows
 589: 
 590: F√ºr Workflows mit Seiteneffekten (Deploy, Hotfix, Release, Commit) **muss** dieses Flag gesetzt sein, sonst kann Claude den Workflow automatisch ausl√∂sen wenn es kontextuell passend erscheint:
 591: 
 592: ```markdown
 593: ---
 594: description: Execute hotfix deployment to production
 595: disable-model-invocation: true
 596: ---
 597: 
 598: # Hotfix
 599: ...
 600: ```
 601: 
 602: | Workflow-Typ | `disable-model-invocation` |
 603: | --- | --- |
 604: | Deploy, Hotfix, Release | **Immer `true`** |
 605: | Commit, Push | **Immer `true`** |
 606: | Audit, Analyse (read-only) | Optional (empfohlen) |
 607: | Feature-Delivery (Implementierung) | Empfohlen |
 608: 
 609: ### Commands vs. Skills
 610: 
 611: | Feature | Commands | Skills |
 612: | --- | --- | --- |
 613: | Aufruf | `/command-name` | `/skill-name` oder automatisch |
 614: | Zweck | Vordefinierte Prompts/Workflows | Wissen + Workflows |
 615: | Argumente | Fester Prompt | `$ARGUMENTS` Support |
 616: | Automatische Erkennung | Nein (nur manuell) | Ja (Claude erkennt Relevanz) |
 617: 
 618: ---
 619: 
 620: ## 6. `.claude/agents/` ‚Äî Custom Subagents
 621: 
 622: ### Wof√ºr
 623: 
 624: Subagents sind **spezialisierte Assistenten**, die in **eigenem Context** mit **eigenen Tool-Beschr√§nkungen** laufen. Sie sind ideal f√ºr Tasks die viele Dateien lesen oder spezialisierten Fokus brauchen, ohne den Hauptcontext zu belasten.
 625: 
 626: > *"Subagents run in their own context with their own set of allowed tools. They're useful for tasks that read many files or need specialized focus without cluttering your main conversation."*
 627: 
 628: ### Struktur
 629: 
 630: ```text
 631: .claude/agents/
 632: ‚îú‚îÄ‚îÄ security-reviewer.md
 633: ‚îú‚îÄ‚îÄ doc-auditor.md
 634: ‚îî‚îÄ‚îÄ performance-analyzer.md
 635: ```
 636: 
 637: ### Agent-Datei Format
 638: 
 639: ```markdown
 640: ---
 641: name: security-reviewer
 642: description: Reviews code for security vulnerabilities
 643: tools: Read, Grep, Glob, Bash
 644: model: opus
 645: ---
 646: 
 647: You are a senior security engineer. Review code for:
 648: - Injection vulnerabilities (SQL, XSS, command injection)
 649: - Authentication and authorization flaws
 650: - Secrets or credentials in code
 651: - Insecure data handling
 652: 
 653: Provide specific line references and suggested fixes.
 654: ```
 655: 
 656: ### Projektspezifisches Beispiel: qa-reviewer
 657: 
 658: Kleiner, read-only Spezialist der nach Feature-Edits proaktiv angewendet werden kann:
 659: 
 660: ```markdown
 661: ---
 662: name: qa-reviewer
 663: description: Use proactively after editing newsletter-template.html or config files. Reviews for XSS vulnerabilities, CSS touch compliance, avatar rendering, and API contract violations.
 664: tools: Read, Grep, Glob
 665: model: haiku
 666: ---
 667: 
 668: You are a QA engineer for a mobile WebView newsletter template. Review for:
 669: 
 670: **Critical**
 671: - All config-derived innerHTML uses `escapeHtml()` (XSS)
 672: - All brand avatars use `buildAvatarImgHTML()` (no manual `<img>` tags)
 673: - Variant IDs unchanged: `inbox-ad-image-clickout-17-5`, `inbox-ad-clickout`, `inbox-ad-image-branding-1-91`
 674: 
 675: **High**
 676: - All `:hover` rules inside `@media (hover: hover) and (pointer: fine)`
 677: - All interactive elements have `touch-action: manipulation`
 678: - No hardcoded brand/category counts
 679: 
 680: **Medium**
 681: - Relative paths only (no leading `/` or `./`)
 682: - No `localStorage`, `sessionStorage`, `postMessage`
 683: - No runtime framework imports
 684: 
 685: Output: severity-classified list (Critical/High/Medium/Low) with file:line references.
 686: ```
 687: 
 688: Dieses Pattern ist optimal f√ºr projektspezifische Regeln die bei jedem Edit gepr√ºft werden sollen, ohne den Haupt-Context zu belasten.
 689: 
 690: ### Konfigurationsfelder
 691: 
 692: | Feld | Beschreibung |
 693: | --- | --- |
 694: | `name` | Identifier |
 695: | `description` | Was der Agent tut |
 696: | `tools` | Erlaubte Tools (z.B. `Read, Grep, Glob, Bash`) |
 697: | `model` | Welches Modell (z.B. `opus`, `sonnet`) |
 698: 
 699: ### Aufruf
 700: 
 701: ```text
 702: Use a subagent to review this code for security issues.
 703: ```
 704: 
 705: Oder explizit:
 706: 
 707: ```text
 708: Use the doc-auditor subagent to check documentation drift.
 709: ```
 710: 
 711: ### Wann Subagents statt Commands
 712: 
 713: | Subagents | Commands |
 714: | --- | --- |
 715: | Task liest viele Dateien (Context-Schonung) | Task hat klaren linearen Ablauf |
 716: | Spezialisierter Fokus n√∂tig | Genereller Workflow |
 717: | Ergebnis = Bericht (read-only) | Ergebnis = Code-√Ñnderungen |
 718: | Parallelisierbar (Writer/Reviewer Pattern) | Sequentiell |
 719: 
 720: ### Writer/Reviewer Pattern
 721: 
 722: Ein m√§chtiges Pattern mit zwei Agents:
 723: 
 724: | Session A (Writer) | Session B (Reviewer) |
 725: | --- | --- |
 726: | Implementiere Feature X | ‚Äî |
 727: | ‚Äî | Reviewe die Implementierung in `@src/feature.ts`. Finde Edge Cases, Race Conditions. |
 728: | Hier das Feedback: [Session B Output]. Behebe die Issues. | ‚Äî |
 729: 
 730: ---
 731: 
 732: ## 7. `.claude/hooks/` ‚Äî Deterministische Hooks
 733: 
 734: ### Wof√ºr
 735: 
 736: Hooks sind **Scripts die automatisch** an bestimmten Punkten in Claude's Workflow laufen. Im Unterschied zu CLAUDE.md-Instruktionen (die "advisory" sind) sind Hooks **deterministisch und garantiert**.
 737: 
 738: > *"Unlike CLAUDE.md instructions which are advisory, hooks are deterministic and guarantee the action happens."*
 739: 
 740: ### Hook-Typen
 741: 
 742: Hooks k√∂nnen an verschiedenen Stellen im Workflow eingeh√§ngt werden. Typische Trigger:
 743: 
 744: - **Nach jedem File-Edit** ‚Äî z.B. ESLint ausf√ºhren
 745: - **Vor File-Writes** ‚Äî z.B. bestimmte Dateien sch√ºtzen
 746: - **Nach Tool-Aufrufen** ‚Äî z.B. Logging
 747: 
 748: ### Beispiel: File Protection Hook
 749: 
 750: ```bash
 751: #!/bin/bash
 752: # protect-files.sh ‚Äî Blocks modifications to critical files
 753: 
 754: INPUT=$(cat)
 755: FILE_PATH=$(echo "$INPUT" | jq -r '.tool_input.file_path // empty')
 756: 
 757: PROTECTED_PATTERNS=(".env" "package-lock.json" ".git/" "CLAUDE.md" "AGENTS.md")
 758: 
 759: for pattern in "${PROTECTED_PATTERNS[@]}"; do
 760:   if [[ "$FILE_PATH" == *"$pattern"* ]]; then
 761:     echo "Blocked: $FILE_PATH matches protected pattern '$pattern'." >&2
 762:     exit 2  # Exit 2 = block the action
 763:   fi
 764: done
 765: 
 766: exit 0  # Exit 0 = allow
 767: ```
 768: 
 769: ### KRITISCH: Hooks m√ºssen in `settings.json` registriert werden
 770: 
 771: Ein Hook-Script das nur in `.claude/hooks/` liegt ist **Dead Code** ‚Äî es wird niemals ausgef√ºhrt. Die Registrierung in `.claude/settings.json` ist **zwingend erforderlich**:
 772: 
 773: ```json
 774: // .claude/settings.json
 775: {
 776:   "hooks": {
 777:     "PreToolUse": [
 778:       {
 779:         "matcher": "Edit|Write",
 780:         "hooks": [{ "type": "command", "command": ".claude/hooks/protect-files.sh" }]
 781:       }
 782:     ]
 783:   }
 784: }
 785: ```
 786: 
 787: Ohne diesen Eintrag: Hook-Script existiert, wird nie aufgerufen, kein Fehler, kein Hinweis ‚Äî stille Fehlfunktion.
 788: 
 789: ### Hooks erstellen lassen
 790: 
 791: Claude kann Hooks selbst schreiben:
 792: 
 793: ```text
 794: Write a hook that runs eslint after every file edit
 795: Write a hook that blocks writes to the migrations folder
 796: ```
 797: 
 798: Interaktive Konfiguration: `/hooks`
 799: 
 800: Oder direkt in `.claude/settings.json` bearbeiten.
 801: 
 802: ### Hooks vs. CLAUDE.md-Regeln
 803: 
 804: | Hooks | CLAUDE.md-Regeln |
 805: | --- | --- |
 806: | **Deterministisch** ‚Äî laufen immer | **Advisory** ‚Äî Claude kann ignorieren |
 807: | F√ºr Actions die 100% passieren m√ºssen | F√ºr Guidance die Entscheidung beeinflusst |
 808: | Shell-Scripts | Markdown-Text |
 809: | Exit 2 = Block, Exit 0 = Allow | Keine Enforcement-Mechanik |
 810: 
 811: ---
 812: 
 813: ## 8. Auto Memory
 814: 
 815: ### Was es ist
 816: 
 817: Auto Memory ist ein **persistentes Verzeichnis** in dem Claude automatisch Learnings, Patterns und Insights w√§hrend der Arbeit speichert. Im Unterschied zu CLAUDE.md (du schreibst f√ºr Claude) enth√§lt Auto Memory **Notizen die Claude f√ºr sich selbst schreibt**.
 818: 
 819: ### Was Claude speichert
 820: 
 821: - **Projekt-Patterns:** Build-Commands, Test-Konventionen, Code-Style
 822: - **Debugging-Insights:** L√∂sungen f√ºr knifflige Probleme, h√§ufige Fehlerursachen
 823: - **Architektur-Notizen:** Key Files, Modul-Beziehungen, wichtige Abstraktionen
 824: - **Deine Pr√§ferenzen:** Kommunikationsstil, Workflow-Gewohnheiten, Tool-Vorlieben
 825: 
 826: ### Speicherort
 827: 
 828: ```text
 829: ~/.claude/projects/<project>/memory/
 830: ‚îú‚îÄ‚îÄ MEMORY.md          # Index ‚Äî erste 200 Zeilen werden geladen
 831: ‚îú‚îÄ‚îÄ debugging.md       # Detail-Notizen zu Debugging
 832: ‚îú‚îÄ‚îÄ api-conventions.md # API-Design-Entscheidungen
 833: ‚îî‚îÄ‚îÄ ...                # Beliebige weitere Topic-Dateien
 834: ```
 835: 
 836: ### Lade-Verhalten
 837: 
 838: - **MEMORY.md:** Erste 200 Zeilen werden beim Session-Start in den System-Prompt geladen
 839: - **Topic-Dateien** (debugging.md etc.): Werden **nicht** beim Start geladen ‚Äî Claude liest sie on-demand
 840: - Claude h√§lt `MEMORY.md` **knapp** und lagert Details in Topic-Dateien aus
 841: 
 842: ### Steuerung
 843: 
 844: ```bash
 845: # Aktivieren (opt-in w√§hrend Rollout):
 846: export CLAUDE_CODE_DISABLE_AUTO_MEMORY=0
 847: 
 848: # Deaktivieren:
 849: export CLAUDE_CODE_DISABLE_AUTO_MEMORY=1
 850: ```
 851: 
 852: Claude etwas explizit merken lassen:
 853: 
 854: ```text
 855: Remember that we use pnpm, not npm.
 856: Save to memory that the API tests require a local Redis instance.
 857: ```
 858: 
 859: Bearbeiten: `/memory` √∂ffnet die Dateien im System-Editor.
 860: 
 861: ---
 862: 
 863: ## 9. `@`-Import-Syntax
 864: 
 865: ### Was es ist
 866: 
 867: CLAUDE.md-Dateien k√∂nnen andere Dateien importieren mit `@path/to/file`:
 868: 
 869: ```markdown
 870: See @README.md for project overview and @package.json for available npm commands.
 871: 
 872: # Additional Instructions
 873: - Git workflow: @docs/git-instructions.md
 874: - Personal overrides: @~/.claude/my-project-instructions.md
 875: ```
 876: 
 877: ### Verhalten
 878: 
 879: - **Relative Pfade** werden relativ zur Datei aufgel√∂st die den Import enth√§lt (nicht zum Working Directory)
 880: - **Absolute Pfade** und **Home-Directory** (`~`) werden unterst√ºtzt
 881: - Imports sind **rekursiv** (max 5 Hops tief)
 882: - Imports in Markdown-Code-Spans (`` `@foo` ``) und Code-Blocks werden **nicht** aufgel√∂st
 883: - Beim ersten Encounter zeigt Claude ein **Approval-Dialogfeld** ‚Äî einmalige Entscheidung pro Projekt
 884: 
 885: ### Wof√ºr
 886: 
 887: | Statt | Verwende |
 888: | --- | --- |
 889: | npm Scripts in CLAUDE.md auflisten | `@package.json` |
 890: | Architektur-Doku in CLAUDE.md kopieren | `@docs/ARCHITECTURE.md` |
 891: | Pers√∂nliche Regeln pro Projekt | `@~/.claude/my-project-instructions.md` |
 892: 
 893: ### Worktree-Support
 894: 
 895: ```markdown
 896: # Funktioniert √ºber Git Worktrees hinweg:
 897: @~/.claude/my-project-instructions.md
 898: ```
 899: 
 900: Statt `CLAUDE.local.md` (existiert nur in einem Worktree) kann ein Home-Directory-Import alle Worktrees abdecken.
 901: 
 902: ---
 903: 
 904: ## 10. CLAUDE.local.md ‚Äî Pers√∂nliche Overrides
 905: 
 906: ### Was es ist
 907: 
 908: `CLAUDE.local.md` ist eine **pers√∂nliche, projektspezifische** Datei die automatisch geladen wird aber **nicht ins Git** eingecheckt wird (automatisch zu `.gitignore` hinzugef√ºgt).
 909: 
 910: ### Wof√ºr
 911: 
 912: | Beispiel | Warum lokal |
 913: | --- | --- |
 914: | Sandbox/Dev-URLs | Unterscheiden sich pro Entwickler |
 915: | Bevorzugte Test-Daten | Pers√∂nliche Pr√§ferenz |
 916: | Extra-Debugging-Befehle | Nicht f√ºr alle relevant |
 917: | Feature-Flag-Overrides | Tempor√§r, entwickler-spezifisch |
 918: 
 919: ### Beispiel
 920: 
 921: ```markdown
 922: # My local dev setup
 923: - Dev server: http://localhost:3001
 924: - Use `npm run test:webview:headed` for visual debugging
 925: - My test user: testuser@gmx.de / password123
 926: ```
 927: 
 928: ---
 929: 
 930: ## 11. Anti-Patterns & h√§ufige Fehler
 931: 
 932: Direkt aus den offiziellen Anthropic Best Practices:
 933: 
 934: ### The Over-Specified CLAUDE.md
 935: 
 936: > *"If your CLAUDE.md is too long, Claude ignores half of it because important rules get lost in the noise."*
 937: 
 938: **Fix:** Ruthlessly prune. Wenn Claude etwas bereits korrekt macht ohne die Instruktion ‚Üí l√∂schen. Oder in Hook konvertieren.
 939: 
 940: ### The Kitchen Sink Session
 941: 
 942: Ein Task starten, etwas Unrelated fragen, zum ersten Task zur√ºckkehren. Context ist voll mit irrelevantem Inhalt.
 943: 
 944: **Fix:** `/clear` zwischen unrelated Tasks.
 945: 
 946: ### Correcting Over and Over
 947: 
 948: Claude macht etwas falsch ‚Üí korrigieren ‚Üí immer noch falsch ‚Üí nochmal korrigieren. Context ist polluted mit fehlgeschlagenen Ans√§tzen.
 949: 
 950: **Fix:** Nach 2 fehlgeschlagenen Korrekturen: `/clear` und besseren initialen Prompt schreiben.
 951: 
 952: ### The Trust-Then-Verify Gap
 953: 
 954: Claude produziert plausibel aussehende Implementierung die Edge Cases nicht behandelt.
 955: 
 956: **Fix:** Immer Verifikation mitgeben (Tests, Scripts, Screenshots).
 957: 
 958: ### The Infinite Exploration
 959: 
 960: "Investigate X" ohne Scoping ‚Üí Claude liest hunderte Dateien, Context ist voll.
 961: 
 962: **Fix:** Untersuchungen eng scopen oder **Subagents** nutzen.
 963: 
 964: ### CLAUDE.md-spezifische Warnsignale
 965: 
 966: | Signal | Problem | L√∂sung |
 967: | --- | --- | --- |
 968: | Claude ignoriert eine Regel trotz CLAUDE.md-Eintrag | Datei zu lang, Regel geht unter | Datei k√ºrzen, Emphasis (`IMPORTANT`) hinzuf√ºgen |
 969: | Claude fragt nach etwas das in CLAUDE.md steht | Formulierung ist mehrdeutig | Klarer/spezifischer formulieren |
 970: | Info √§ndert sich h√§ufig | Drift-Risiko, veraltete Info | Dynamisch ableiten oder `@`-Import nutzen |
 971: 
 972: ### Hook-Script ohne `settings.json` ‚Äî Dead Code
 973: 
 974: > *"The hook script exists, is never called, no error, no warning. Silent failure."*
 975: 
 976: Einer der h√§ufigsten Einrichtungsfehler: Ein `.claude/hooks/protect-files.sh` wird erstellt, aber kein Eintrag in `.claude/settings.json` wird angelegt.
 977: 
 978: **Symptom:** Gesch√ºtzte Dateien k√∂nnen trotzdem editiert werden. Kein Fehler, kein Hinweis.
 979: 
 980: **Fix:** Immer nach dem Erstellen eines Hook-Scripts die Registrierung in `.claude/settings.json` pr√ºfen:
 981: 
 982: ```json
 983: // .claude/settings.json (erforderlich!)
 984: {
 985:   "hooks": {
 986:     "PreToolUse": [
 987:       {
 988:         "matcher": "Edit|Write",
 989:         "hooks": [{ "type": "command", "command": ".claude/hooks/protect-files.sh" }]
 990:       }
 991:     ]
 992:   }
 993: }
 994: ```
 995: 
 996: **Pr√ºfung:** `/hooks` in einer Claude-Session zeigt alle aktiven Hooks. Wenn der Hook dort nicht erscheint, ist er nicht registriert.
 997: 
 998: ---
 999: 
1000: ## 12. Optimale Verzeichnisstruktur (exemplarisch)
1001: 
1002: Basierend auf allen Anthropic-Features ‚Äî so sieht ein vollst√§ndig ausgestattetes Claude-Code-Setup aus:
1003: 
1004: ```text
1005: project-root/
1006: ‚îú‚îÄ‚îÄ CLAUDE.md                          # Hauptdatei: kurz & knackig (80‚Äì120 Zeilen)
1007: ‚îÇ                                      # ‚Üí Projekt-Kontext, kritische Constraints,
1008: ‚îÇ                                      #   Commands, Do-NOTs, Testing-Workflow
1009: ‚îÇ                                      # ‚Üí @package.json f√ºr npm Scripts
1010: ‚îÇ
1011: ‚îú‚îÄ‚îÄ CLAUDE.local.md                    # Pers√∂nlich (auto-gitignored)
1012: ‚îÇ                                      # ‚Üí Dev-URLs, Test-Credentials, Overrides
1013: ‚îÇ
1014: ‚îú‚îÄ‚îÄ .claude/
1015: ‚îÇ   ‚îú‚îÄ‚îÄ CLAUDE.md                      # Optional: Alternative zu Root-CLAUDE.md
1016: ‚îÇ   ‚îÇ
1017: ‚îÇ   ‚îú‚îÄ‚îÄ rules/                         # Modulare, pfad-spezifische Regeln
1018: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ general.md                 # Immer geladen (kein paths: Frontmatter)
1019: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css-touch.md               # paths: ["**/*.html", "**/*.css"]
1020: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatar-system.md           # paths: ["config/newsletter-brands-config.js",
1021: ‚îÇ   ‚îÇ   ‚îÇ                              #          "newsletter-template.html"]
1022: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config-patterns.md         # paths: ["config/*.js"]
1023: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accessibility.md           # paths: ["newsletter-template.html"]
1024: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ markdown-quality.md        # paths: ["**/*.md"]
1025: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ frontend/                  # Subdirectories f√ºr Gruppierung
1026: ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ animations.md
1027: ‚îÇ   ‚îÇ
1028: ‚îÇ   ‚îú‚îÄ‚îÄ skills/                        # On-demand Dom√§nen-Wissen & Workflows
1029: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ add-brand/
1030: ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md               # name: add-brand
1031: ‚îÇ   ‚îÇ   ‚îÇ                              # description: Add a new newsletter brand
1032: ‚îÇ   ‚îÇ   ‚îÇ                              # ‚Üí Vollst√§ndige Checklist, Category-Tabelle
1033: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fix-issue/
1034: ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SKILL.md               # name: fix-issue
1035: ‚îÇ   ‚îÇ   ‚îÇ                              # disable-model-invocation: true
1036: ‚îÇ   ‚îÇ   ‚îÇ                              # ‚Üí Aufruf: /fix-issue 1234
1037: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ brainstorming/
1038: ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ SKILL.md
1039: ‚îÇ   ‚îÇ
1040: ‚îÇ   ‚îú‚îÄ‚îÄ commands/                      # Slash Commands (vordefinierte Prompts)
1041: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doc-audit.md               # /doc-audit ‚Üí Audit-Workflow
1042: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature-delivery.md        # /feature-delivery ‚Üí Feature-Workflow
1043: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotfix.md                  # /hotfix ‚Üí Hotfix-Workflow
1044: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ release-readiness.md       # /release-readiness ‚Üí Release-Gate
1045: ‚îÇ   ‚îÇ
1046: ‚îÇ   ‚îú‚îÄ‚îÄ agents/                        # Custom Subagents (eigener Context)
1047: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doc-auditor.md             # Spezialist f√ºr Documentation-Drift
1048: ‚îÇ   ‚îÇ   ‚îÇ                              # tools: Read, Grep, Glob, Bash
1049: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security-reviewer.md       # Spezialist f√ºr Security-Review
1050: ‚îÇ   ‚îÇ   ‚îÇ                              # tools: Read, Grep, Glob
1051: ‚îÇ   ‚îÇ   ‚îÇ                              # model: opus
1052: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test-writer.md             # Spezialist f√ºr Test-Generierung
1053: ‚îÇ   ‚îÇ       
1054: ‚îÇ   ‚îú‚îÄ‚îÄ hooks/                         # Deterministische Hooks
1055: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ protect-files.sh           # Sch√ºtzt kritische Dateien vor Modifikation
1056: ‚îÇ   ‚îÇ
1057: ‚îÇ   ‚îî‚îÄ‚îÄ settings.json                  # Claude Code Settings (Permissions etc.)
1058: ‚îÇ
1059: ‚îî‚îÄ‚îÄ .githooks/                         # Git Hooks (unabh√§ngig von Claude)
1060:     ‚îú‚îÄ‚îÄ pre-commit
1061:     ‚îî‚îÄ‚îÄ commit-msg
1062: ```
1063: 
1064: ### Inhaltliche Aufteilung
1065: 
1066: ```text
1067: ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1068: ‚îÇ CLAUDE.md (~100 Zeilen)                                         ‚îÇ
1069: ‚îÇ  ‚Ä¢ Projekt-Kontext (3 Zeilen)                                   ‚îÇ
1070: ‚îÇ  ‚Ä¢ Critical Constraints (nur was Claude nicht erraten kann)      ‚îÇ
1071: ‚îÇ  ‚Ä¢ @package.json (Import statt npm-Script-Liste)                ‚îÇ
1072: ‚îÇ  ‚Ä¢ Commit-Format & Hook-Aktivierung                             ‚îÇ
1073: ‚îÇ  ‚Ä¢ Do-NOT-Liste (die wichtigsten Verbote)                       ‚îÇ
1074: ‚îÇ  ‚Ä¢ Testing-Workflow (Befehle, Reihenfolge)                      ‚îÇ
1075: ‚îÇ  ‚Ä¢ Slash Commands √úbersicht                                     ‚îÇ
1076: ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1077:          ‚îÇ
1078:          ‚ñº
1079: ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1080: ‚îÇ .claude/rules/ (pfad-spezifisch, immer oder bedingt geladen)    ‚îÇ
1081: ‚îÇ  ‚Ä¢ CSS/Touch-Regeln ‚Üí nur bei HTML/CSS-Arbeit                   ‚îÇ
1082: ‚îÇ  ‚Ä¢ Avatar-System ‚Üí nur bei Brand-Config/Template-Arbeit         ‚îÇ
1083: ‚îÇ  ‚Ä¢ Config-Patterns ‚Üí nur bei config/*.js-Arbeit                 ‚îÇ
1084: ‚îÇ  ‚Ä¢ Accessibility ‚Üí nur bei Template-Arbeit                      ‚îÇ
1085: ‚îÇ  ‚Ä¢ Markdown Quality ‚Üí nur bei *.md-Arbeit                       ‚îÇ
1086: ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1087:          ‚îÇ
1088:          ‚ñº
1089: ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1090: ‚îÇ .claude/skills/ (on-demand, Claude erkennt Relevanz)            ‚îÇ
1091: ‚îÇ  ‚Ä¢ add-brand: 10-Schritte-Workflow f√ºr neue Brands              ‚îÇ
1092: ‚îÇ  ‚Ä¢ fix-issue: GitHub Issue ‚Üí PR Workflow                        ‚îÇ
1093: ‚îÇ  ‚Ä¢ Domain-Wissen das nur manchmal relevant ist                  ‚îÇ
1094: ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1095:          ‚îÇ
1096:          ‚ñº
1097: ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1098: ‚îÇ .claude/agents/ (eigener Context, eigene Tools)                 ‚îÇ
1099: ‚îÇ  ‚Ä¢ doc-auditor: Liest alle Docs, st√∂rt Haupt-Context nicht      ‚îÇ
1100: ‚îÇ  ‚Ä¢ security-reviewer: Code-Review in isoliertem Context         ‚îÇ
1101: ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1102:          ‚îÇ
1103:          ‚ñº
1104: ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1105: ‚îÇ .claude/hooks/ (deterministisch, 100% Enforcement)              ‚îÇ
1106: ‚îÇ  ‚Ä¢ protect-files.sh: Blockiert Writes auf kritische Dateien     ‚îÇ
1107: ‚îÇ  ‚Ä¢ Auto-Lint nach File-Edits                                    ‚îÇ
1108: ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1109: ```
1110: 
1111: ---
1112: 
1113: ## 13. Checkliste: CLAUDE.md Audit
1114: 
1115: Verwende diese Checkliste um dein CLAUDE.md Setup zu bewerten:
1116: 
1117: ### L√§nge & Fokus
1118: 
1119: - [ ] CLAUDE.md ist ‚â§120 Zeilen
1120: - [ ] Jede Zeile besteht den Test: "W√ºrde Claude ohne diese Zeile Fehler machen?"
1121: - [ ] Keine Standard-Konventionen die Claude bereits kennt
1122: - [ ] Keine file-by-file Codebase-Beschreibungen
1123: - [ ] Keine langen Tutorials oder Erkl√§rungen
1124: - [ ] Keine Information die sich h√§ufig √§ndert (dynamisch ableiten stattdessen)
1125: 
1126: ### Struktur & Format
1127: 
1128: - [ ] Bullet Points unter Markdown-Headings (keine Prosa)
1129: - [ ] Spezifische Anweisungen statt vage Guidance
1130: - [ ] Kritische Regeln mit Emphasis markiert (`IMPORTANT`, `NEVER`)
1131: - [ ] `@`-Imports wo sinnvoll (package.json, README)
1132: 
1133: ### Modulare Auslagerung
1134: 
1135: - [ ] Pfad-spezifische Regeln in `.claude/rules/` mit `paths:` Frontmatter
1136: - [ ] Dom√§nen-Wissen und Workflows in `.claude/skills/`
1137: - [ ] Read-heavy Tasks als `.claude/agents/` Subagents
1138: - [ ] Garantierte Actions als `.claude/hooks/`
1139: 
1140: ### Hooks & Settings
1141: 
1142: - [ ] `.claude/settings.json` existiert und registriert alle Hooks
1143: - [ ] Hook-Scripts sind executable (`chmod +x`)
1144: - [ ] Aktions-Commands (Deploy, Hotfix, Release) haben `disable-model-invocation: true`
1145: 
1146: ### Team & Hygiene
1147: 
1148: - [ ] CLAUDE.md ins Git eingecheckt
1149: - [ ] Pers√∂nliche Overrides in CLAUDE.local.md (auto-gitignored)
1150: - [ ] Kein Drift zwischen CLAUDE.md und tats√§chlichem Code (regelm√§√üig pr√ºfen)
1151: - [ ] `/memory` zum Bearbeiten von Auto Memory nutzen
1152: 
1153: ---
1154: 
1155: ## 14. Agent Skills Open Standard ‚Äî Plattformvergleich
1156: 
1157: ### Hintergrund
1158: 
1159: Claude Code und Google Antigravity (die Gemini-CLI / Agentic IDE) folgen beide dem [Agent Skills Open Standard](https://agentskills.io/) ‚Äî einem offenen Format f√ºr wiederverwendbare Skill-Pakete, das plattform√ºbergreifend funktioniert. Das Kernformat ist identisch: ein `SKILL.md` Entrypoint mit YAML-Frontmatter in einem benannten Ordner. Die Plattformen unterscheiden sich jedoch erheblich in der Tiefe der unterst√ºtzten Features.
1160: 
1161: Quellen:
1162: 
1163: - [Claude Code ‚Äî Skills](https://code.claude.com/docs/en/skills)
1164: - [Antigravity ‚Äî Skills](https://antigravity.google/docs/skills)
1165: - [Agent Skills Standard](https://agentskills.io/)
1166: 
1167: ### Gemeinsames Grundformat
1168: 
1169: Beide Plattformen verwenden exakt dasselbe Basis-Layout:
1170: 
1171: ```text
1172: <skills-root>/<skill-name>/
1173: ‚îî‚îÄ‚îÄ SKILL.md           # Entrypoint (required)
1174:     ‚îú‚îÄ‚îÄ YAML Frontmatter (name + description)
1175:     ‚îî‚îÄ‚îÄ Markdown Body (Instruktionen)
1176: ```
1177: 
1178: Minimales Beispiel (funktioniert auf **beiden** Plattformen):
1179: 
1180: ```markdown
1181: ---
1182: name: code-review
1183: description: Reviews code changes for bugs, style issues, and best practices.
1184: ---
1185: 
1186: # Code Review
1187: 
1188: When reviewing code, check:
1189: 1. Correctness ‚Äî Does the code do what it's supposed to?
1190: 2. Edge cases ‚Äî Are error conditions handled?
1191: 3. Style ‚Äî Does it follow project conventions?
1192: ```
1193: 
1194: ### Speicherorte
1195: 
1196: | Scope | Claude Code | Antigravity (Gemini) | Kilo Code |
1197: | --- | --- | --- | --- |
1198: | **Projekt** | `.claude/skills/<name>/` | `.agent/skills/<name>/` | `.kilocode/skills/<name>/` |
1199: | **Universal** | `.agents/skills/<name>/` | `.agents/skills/<name>/` | `.agents/skills/<name>/` |
1200: | **Global (User)** | `~/.claude/skills/<name>/` | `~/.gemini/antigravity/skills/<name>/` | `~/.kilocode/skills/<name>/` |
1201: | **Enterprise/Managed** | Via Managed Settings (zentral) | ‚Äî (nicht dokumentiert) | ‚Äî (nicht dokumentiert) |
1202: | **Plugin** | `<plugin>/skills/<name>/` | ‚Äî | ‚Äî |
1203: 
1204: **Priorit√§t bei Namenskollision (Claude Code):** Enterprise > Personal > Project. Plugin-Skills verwenden Namespace (`plugin-name:skill-name`).
1205: 
1206: **Antigravity:** Workspace-Skills √ºberschreiben Global-Skills bei gleichem Namen (implizit).
1207: 
1208: ### Discovery & Loading
1209: 
1210: Beide Plattformen nutzen **Progressive Disclosure** ‚Äî ein dreistufiges Lademodell:
1211: 
1212: | Stufe | Was wird geladen | Wann |
1213: | --- | --- | --- |
1214: | **1. Metadata** | `name` + `description` aus Frontmatter | Immer (Session-Start) |
1215: | **2. SKILL.md Body** | Vollst√§ndiger Markdown-Inhalt | Wenn Agent den Skill als relevant erkennt |
1216: | **3. Supporting Files** | Scripts, References, Assets | On-demand durch Agent |
1217: 
1218: **Claude Code** hat ein explizites **Context-Budget** f√ºr Skill-Descriptions: 2% des Context-Windows (dynamisch), Fallback 16.000 Zeichen. Bei zu vielen Skills werden einige ausgeschlossen. Pr√ºfbar via `/context`.
1219: 
1220: **Antigravity** dokumentiert kein explizites Budget ‚Äî der Agent sieht die Skill-Liste und entscheidet autonom.
1221: 
1222: ### Frontmatter-Felder im Vergleich
1223: 
1224: #### Gemeinsame Felder
1225: 
1226: | Feld | Required? | Beschreibung |
1227: | --- | --- | --- |
1228: | `name` | Nein (empfohlen) | Eindeutiger Identifier. Lowercase, Hyphens, max 64 Zeichen. Default = Ordnername. |
1229: | `description` | Empfohlen | Was der Skill tut und **wann** er verwendet werden soll. Prim√§rer Trigger-Mechanismus. |
1230: 
1231: Bei **beiden** Plattformen gilt: Die `description` ist das wichtigste Feld, da der Agent anhand dieser Beschreibung entscheidet, ob der Skill relevant ist. Best Practice: Keywords einbauen, die Nutzer nat√ºrlich verwenden w√ºrden.
1232: 
1233: #### Claude Code ‚Äî Exklusive Frontmatter-Felder
1234: 
1235: Antigravity unterst√ºtzt **nur** `name` und `description`. Claude Code erweitert das Format erheblich:
1236: 
1237: | Feld | Typ | Beschreibung |
1238: | --- | --- | --- |
1239: | `disable-model-invocation` | `boolean` | `true` = Agent kann den Skill **nicht** automatisch laden. Nur manuell per `/skill-name`. Ideal f√ºr Workflows mit Seiteneffekten (Deploy, Commit). |
1240: | `user-invocable` | `boolean` | `false` = Skill erscheint **nicht** im `/`-Men√º. F√ºr Hintergrundwissen das der Agent nutzt, nicht der User. |
1241: | `allowed-tools` | `string` | Tool-Whitelist f√ºr aktiven Skill. Z.B. `Read, Grep, Glob` f√ºr Read-only-Modus. |
1242: | `context` | `string` | `fork` = Skill l√§uft in isoliertem **Subagent-Context** (eigener Context, keine Conversation History). |
1243: | `agent` | `string` | Subagent-Typ wenn `context: fork`. Built-in: `Explore`, `Plan`, `general-purpose`. Oder custom aus `.claude/agents/`. |
1244: | `model` | `string` | Modell-Override f√ºr diesen Skill (z.B. `opus`, `sonnet`). |
1245: | `hooks` | `object` | Skill-spezifische Hooks (deterministisch, Shell-basiert). |
1246: | `argument-hint` | `string` | Autocomplete-Hint, z.B. `[issue-number]` oder `[filename] [format]`. |
1247: | `license` | `string` | Lizenz-Info (z.B. `Complete terms in LICENSE.txt`). |
1248: 
1249: **Invocation-Matrix (Claude Code):**
1250: 
1251: | Konfiguration | User kann aufrufen? | Agent kann automatisch laden? |
1252: | --- | --- | --- |
1253: | Default (keine Felder) | Ja (`/name`) | Ja |
1254: | `disable-model-invocation: true` | Ja (`/name`) | Nein |
1255: | `user-invocable: false` | Nein | Ja |
1256: 
1257: ### String-Substitution & Argumente
1258: 
1259: #### Substitution in Claude Code
1260: 
1261: Skills unterst√ºtzen Platzhalter die beim Aufruf ersetzt werden:
1262: 
1263: | Platzhalter | Beschreibung |
1264: | --- | --- |
1265: | `$ARGUMENTS` | Alle √ºbergebenen Argumente als String |
1266: | `$ARGUMENTS[N]` / `$N` | N-tes Argument (0-basiert) |
1267: | `${CLAUDE_SESSION_ID}` | Aktuelle Session-ID |
1268: 
1269: Beispiel:
1270: 
1271: ```markdown
1272: ---
1273: name: fix-issue
1274: description: Fix a GitHub issue
1275: disable-model-invocation: true
1276: ---
1277: 
1278: Fix GitHub issue $ARGUMENTS following our coding standards.
1279: ```
1280: 
1281: Aufruf: `/fix-issue 123` ‚Üí Agent erh√§lt "Fix GitHub issue 123 following our coding standards."
1282: 
1283: Mehrere Argumente: `/migrate-component SearchBar React Vue` ‚Üí `$0` = SearchBar, `$1` = React, `$2` = Vue.
1284: 
1285: #### Substitution in Antigravity
1286: 
1287: String-Substitution ist **nicht dokumentiert**. Skills in Antigravity funktionieren prim√§r als passives Wissen, nicht als parametrisierte Workflows.
1288: 
1289: ### Dynamische Kontext-Injektion
1290: 
1291: #### Claude Code ‚Äî `!`command`` Syntax
1292: 
1293: Shell-Commands werden **vor** dem Laden ausgef√ºhrt, das Ergebnis wird in den Skill-Content eingef√ºgt:
1294: 
1295: ```markdown
1296: ---
1297: name: pr-summary
1298: description: Summarize changes in a pull request
1299: context: fork
1300: agent: Explore
1301: allowed-tools: Bash(gh *)
1302: ---
1303: 
1304: ## Pull request context
1305: - PR diff: !`gh pr diff`
1306: - PR comments: !`gh pr view --comments`
1307: - Changed files: !`gh pr diff --name-only`
1308: 
1309: ## Your task
1310: Summarize this pull request.
1311: ```
1312: 
1313: Dies ist **Preprocessing** ‚Äî der Agent sieht nur das finale Ergebnis mit den tats√§chlichen Daten.
1314: 
1315: #### Kontext-Injektion in Antigravity
1316: 
1317: Dynamische Kontext-Injektion ist **nicht dokumentiert**. Kein √Ñquivalent zur `!`command`` Syntax.
1318: 
1319: ### Subagent-Integration
1320: 
1321: #### Subagents in Claude Code
1322: 
1323: Mit `context: fork` l√§uft ein Skill in einem isolierten Subagent:
1324: 
1325: ```markdown
1326: ---
1327: name: deep-research
1328: description: Research a topic thoroughly
1329: context: fork
1330: agent: Explore
1331: ---
1332: 
1333: Research $ARGUMENTS thoroughly:
1334: 1. Find relevant files using Glob and Grep
1335: 2. Read and analyze the code
1336: 3. Summarize findings with specific file references
1337: ```
1338: 
1339: - Der Subagent hat **keinen Zugriff** auf die Conversation History
1340: - Ergebnisse werden zusammengefasst und in den Haupt-Context zur√ºckgegeben
1341: - `agent`-Feld bestimmt Toolset und Modell
1342: - Inverse Richtung: Subagents k√∂nnen Skills als Referenzmaterial vorladen
1343: 
1344: #### Subagents in Antigravity
1345: 
1346: Antigravity hat kein Konzept f√ºr Skill-basierte Subagent-Delegation. Skills sind immer inline im Haupt-Context.
1347: 
1348: ### Supporting Files
1349: 
1350: Beide Plattformen unterst√ºtzen zus√§tzliche Dateien im Skill-Ordner, verwenden aber leicht unterschiedliche Konventionen:
1351: 
1352: | Datei-Typ | Claude Code | Antigravity |
1353: | --- | --- | --- |
1354: | **Scripts** | `scripts/` ‚Äî Executable Code | `scripts/` ‚Äî Helper Scripts |
1355: | **Referenzen** | `references/` ‚Äî Doku als On-demand-Context | `resources/` ‚Äî Templates und Assets |
1356: | **Assets** | `assets/` ‚Äî Output-Dateien (Logos, Templates) | ‚Äî (in `resources/` zusammengefasst) |
1357: | **Beispiele** | `examples/` | `examples/` |
1358: 
1359: **Claude Code Best Practice:**
1360: 
1361: - `SKILL.md` unter 500 Zeilen halten
1362: - Detaillierte Referenzen in separate Dateien auslagern
1363: - Von SKILL.md aus referenzieren: `For API details, see [reference.md](reference.md)`
1364: - Referenzen maximal eine Ebene tief (kein verschachteltes Linking)
1365: - Bei Dateien >100 Zeilen: Inhaltsverzeichnis am Anfang einf√ºgen
1366: 
1367: **Antigravity Best Practice:**
1368: 
1369: - Scripts als Black Boxes behandeln ‚Äî Agent soll `--help` aufrufen statt Source lesen
1370: - Decision Trees f√ºr komplexe Skills einbauen
1371: - Jeder Skill sollte genau eine Sache gut machen (Single Responsibility)
1372: 
1373: ### Tool-Beschr√§nkungen
1374: 
1375: #### Tool-Control in Claude Code
1376: 
1377: Skills k√∂nnen Tools einschr√§nken oder freigeben:
1378: 
1379: ```markdown
1380: ---
1381: name: safe-reader
1382: description: Read files without making changes
1383: allowed-tools: Read, Grep, Glob
1384: ---
1385: ```
1386: 
1387: Permissions k√∂nnen auch auf Skill-Ebene gesteuert werden:
1388: 
1389: ```text
1390: # In /permissions:
1391: Skill(deploy *)      # Deny deploy skill
1392: Skill(commit)         # Allow only exact match
1393: ```
1394: 
1395: #### Tool-Control in Antigravity
1396: 
1397: Tool-Beschr√§nkungen f√ºr Skills sind **nicht dokumentiert**. Skills haben Zugang zu allen Tools des Agents.
1398: 
1399: ### Feature-Vergleich Gesamt√ºbersicht
1400: 
1401: | Feature | Claude Code | Antigravity |
1402: | --- | --- | --- |
1403: | SKILL.md + Frontmatter | ‚úÖ | ‚úÖ |
1404: | `name` + `description` | ‚úÖ | ‚úÖ |
1405: | Progressive Disclosure | ‚úÖ | ‚úÖ |
1406: | Supporting Files | ‚úÖ (scripts, references, assets, examples) | ‚úÖ (scripts, examples, resources) |
1407: | Automatische Skill-Erkennung | ‚úÖ | ‚úÖ |
1408: | Manueller Aufruf (`/name`) | ‚úÖ | ‚ùå (nicht dokumentiert) |
1409: | `disable-model-invocation` | ‚úÖ | ‚ùå |
1410: | `user-invocable` | ‚úÖ | ‚ùå |
1411: | `allowed-tools` | ‚úÖ | ‚ùå |
1412: | `context: fork` (Subagent) | ‚úÖ | ‚ùå |
1413: | `model` Override | ‚úÖ | ‚ùå |
1414: | `hooks` (Skill-scoped) | ‚úÖ | ‚ùå |
1415: | `$ARGUMENTS` Substitution | ‚úÖ | ‚ùå |
1416: | `!`command`` Injektion | ‚úÖ | ‚ùå |
1417: | Monorepo-Discovery (nested) | ‚úÖ | ‚ùå (nicht dokumentiert) |
1418: | Plugin-Skills | ‚úÖ | ‚ùå |
1419: | Enterprise/Managed Skills | ‚úÖ | ‚ùå |
1420: | Context-Budget (explizit) | ‚úÖ (2% Window) | ‚ùå (nicht dokumentiert) |
1421: | Live-Change-Detection | ‚úÖ (via `--add-dir`) | ‚ùå |
1422: | Skills-CLI (`npx skills`) | ‚úÖ (kompatibel) | ‚úÖ (kompatibel) |
1423: 
1424: ### Cross-Agent Kompatibilit√§t
1425: 
1426: Da mehrere Plattformen den gleichen Open Standard nutzen, k√∂nnen Skills plattform√ºbergreifend geteilt werden ‚Äî mit Einschr√§nkungen.
1427: 
1428: #### Verzeichnis-Konventionen aller Tools
1429: 
1430: | Tool | Instructions-Datei | Skills-Verzeichnis (Workspace) | Skills-Verzeichnis (Global) |
1431: | --- | --- | --- | --- |
1432: | **Claude Code** | `CLAUDE.md` | `.claude/skills/<name>/` | `~/.claude/skills/<name>/` |
1433: | **Google Antigravity** | `GEMINI.md` | `.agent/skills/<name>/` | `~/.gemini/antigravity/skills/<name>/` |
1434: | **Gemini CLI** | `GEMINI.md` | `.gemini/skills/<name>/` oder `.agents/skills/<name>/` (Alias, hat Vorrang) | `~/.gemini/skills/<name>/` oder `~/.agents/skills/<name>/` |
1435: | **OpenAI Codex** | `AGENTS.md` | `.agents/skills/<name>/` | `~/.agents/skills/<name>/` |
1436: | **GitHub Copilot** | `.github/copilot-instructions.md` + `AGENTS.md` | `.github/instructions/*.instructions.md` | ‚Äî |
1437: | **Cursor** | `.cursor/rules/*.mdc` | `.agents/skills/<name>/` | ‚Äî |
1438: 
1439: #### Zus√§tzliche Konventionen (nur Antigravity)
1440: 
1441: Antigravity unterst√ºtzt neben Skills auch diese `.agent/`-Unterverzeichnisse:
1442: 
1443: | Verzeichnis | Zweck |
1444: | --- | --- |
1445: | `.agent/rules/` | Always-on Regeln (√§quivalent zu `.claude/rules/`) |
1446: | `.agent/workflows/` | Wiederverwendbare Task-Prozeduren |
1447: | `.agent/scripts/` | Helper-Scripts |
1448: 
1449: Diese existieren nur in Antigravity ‚Äî kein anderes Tool erkennt sie automatisch.
1450: 
1451: #### Jules ‚Äî nativ gelesene Dateien
1452: 
1453: **Google Jules** (der asynchrone Cloud-Agent unter [jules.google.com](https://jules.google.com)) ist von Antigravity getrennt und liest eigene Dateien:
1454: 
1455: | Datei | Wie Jules sie nutzt |
1456: | --- | --- |
1457: | `AGENTS.md` | **Prim√§rer Kontext** ‚Äî Jules liest diese Datei automatisch bei jeder Task-Ausf√ºhrung (offiziell dokumentiert). Beschreibe hier Architektur, Constraints und Conventions. |
1458: | `README.md` | **Fallback f√ºr Environment-Setup** ‚Äî Jules greift auf `README.md` zur√ºck, wenn kein Setup-Script konfiguriert ist, um Dependencies und Toolchain zu verstehen. |
1459: 
1460: > **Key Insight:** Jules kennt kein `CLAUDE.md`, kein `.agent/`, keine `.jules`-Config. Der einzige native Hebel ist `AGENTS.md`. Ein gut bef√ºlltes `AGENTS.md` ist deshalb die effektivste Ma√ünahme f√ºr bessere Jules-Ergebnisse. Quelle: [jules.google/docs](https://jules.google/docs)
1461: 
1462: #### Verzeichnis-Mapping in diesem Repo
1463: 
1464: | Verzeichnis | F√ºr welche Tools | Inhalt |
1465: | --- | --- | --- |
1466: | `.agents/skills/` | Gemini CLI, OpenAI Codex, Cursor, VS Code Copilot | Agent Skills (Open Standard) |
1467: | `.agent/skills/` | Google Antigravity | Agent Skills (gleiche Skills, Antigravity-Pfad) |
1468: | `.agent/rules/` | Google Antigravity | Always-on Coding-Standards |
1469: | `.agent/workflows/` | Google Antigravity | Task-Prozeduren (add-brand, doc-audit, etc.) |
1470: | `.claude/rules/` | Claude Code | Pfad-spezifische Regeln |
1471: | `.claude/commands/` | Claude Code | Slash Commands |
1472: | `.github/copilot-instructions.md` | GitHub Copilot | Repo-weite Instruktionen |
1473: | `.github/instructions/` | GitHub Copilot | Pfad-spezifische Instruktionen |
1474: 
1475: **Portabel (funktioniert √ºberall):**
1476: 
1477: - Skills die nur `name` + `description` im Frontmatter nutzen
1478: - Reiner Markdown-Body mit Instruktionen
1479: - Supporting Files mit Standard-Unterordnern (`scripts/`, `examples/`)
1480: 
1481: **Nicht portabel (Claude Code ‚Üí Antigravity):**
1482: 
1483: - Claude-exklusive Frontmatter-Felder (`disable-model-invocation`, `context`, `allowed-tools`, `hooks`, `model`, `agent`)
1484: - `$ARGUMENTS` Substitution
1485: - `!`command`` Syntax
1486: - Plattform-spezifische Tool-Referenzen (z.B. "Use the `Skill` tool")
1487: 
1488: **Praxis-Empfehlung f√ºr Multi-Agent-Repos:**
1489: 
1490: ```text
1491: .claude/skills/    ‚Üí Claude Code (kann erweiterte Features nutzen)
1492: .agent/skills/     ‚Üí Antigravity (nur Standard-Format)
1493: .agents/skills/    ‚Üí Gemini CLI / Codex / Cursor / Copilot (Standard-Format)
1494: ```
1495: 
1496: Wenn ein Skill beide Plattformen bedienen soll, keine Claude-exklusiven Frontmatter-Felder verwenden. Unbekannte Felder werden von Antigravity stillschweigend ignoriert ‚Äî f√ºhren aber zu totem Code im Frontmatter.
1497: 
1498: ### Wann welche Plattform-Features nutzen?
1499: 
1500: | Szenario | Empfehlung |
1501: | --- | --- |
1502: | Skill soll √ºberall funktionieren | Nur `name` + `description`, Standard-Body |
1503: | Deploy-Workflow (gef√§hrlich, manuell) | Claude: `disable-model-invocation: true` |
1504: | Recherche-Task (context-schwer) | Claude: `context: fork` + `agent: Explore` |
1505: | Hintergrundwissen ohne User-Invocation | Claude: `user-invocable: false` |
1506: | Read-only Analyse | Claude: `allowed-tools: Read, Grep, Glob` |
1507: | Parametrisierter Workflow | Claude: `$ARGUMENTS` |
1508: | Live-Daten in Skill einbetten | Claude: `!`command`` |
1509: | Simple Wissens-Kapsel | Beide: Standard-Format reicht |
1510: 
1511: ---
1512: 
1513: ## 15. MCP-Server ‚Äî Model Context Protocol
1514: 
1515: ### Was es ist
1516: 
1517: MCP (Model Context Protocol) ist ein **offener Standard** f√ºr die Anbindung externer Tools und Datenquellen an Claude Code. Statt Daten manuell in den Context zu kopieren, verbindet sich Claude direkt mit APIs, Datenbanken, Dateisystemen und Services.
1518: 
1519: > *"MCP servers give Claude direct access to external tools and data sources ‚Äî GitHub PRs, databases, APIs ‚Äî without you needing to copy-paste context into the conversation."*
1520: 
1521: ### Architektur
1522: 
1523: ```text
1524: Claude Code   ‚Üê‚Üí   MCP Client (built-in)   ‚Üê‚Üí   MCP Server   ‚Üê‚Üí   Externe Ressource
1525:                                                     ‚îÇ
1526:                                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
1527:                                               ‚îÇ  Tools      ‚îÇ  (Actions die Claude ausf√ºhrt)
1528:                                               ‚îÇ  Resources  ‚îÇ  (Daten die Claude liest)
1529:                                               ‚îÇ  Prompts    ‚îÇ  (Vorgefertigte Prompt-Templates)
1530:                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
1531: ```
1532: 
1533: ### Server hinzuf√ºgen
1534: 
1535: ```bash
1536: # Syntax:
1537: claude mcp add <name> -- <command> [args...]
1538: 
1539: # Beispiele:
1540: claude mcp add github -- gh copilot mcp
1541: claude mcp add filesystem -- npx @anthropic/mcp-filesystem /path/to/docs
1542: claude mcp add postgres -- npx @anthropic/mcp-postgres $DATABASE_URL
1543: claude mcp add brave-search -- npx @anthropic/mcp-brave-search
1544: ```
1545: 
1546: ### Server verwalten
1547: 
1548: ```bash
1549: # Alle konfigurierten Server auflisten:
1550: claude mcp list
1551: 
1552: # Server entfernen:
1553: claude mcp remove <name>
1554: 
1555: # Server-Status pr√ºfen (in einer Session):
1556: /mcp
1557: ```
1558: 
1559: ### Scope-Ebenen
1560: 
1561: MCP-Server k√∂nnen auf verschiedenen Ebenen konfiguriert werden:
1562: 
1563: | Scope | Flag | Speicherort | Geteilt? |
1564: | --- | --- | --- | --- |
1565: | **Projekt** | `--scope project` | `.claude/settings.json` | Ja (Git) |
1566: | **User** | `--scope user` | `~/.claude/settings.json` | Nein |
1567: | **Projekt-lokal** | `--scope project-local` | `.claude/settings.local.json` | Nein |
1568: 
1569: ```bash
1570: # Projekt-weiter Server (Team teilt ihn via Git):
1571: claude mcp add github --scope project -- gh copilot mcp
1572: 
1573: # Nur f√ºr dich:
1574: claude mcp add my-db --scope user -- npx @anthropic/mcp-postgres $MY_DB_URL
1575: ```
1576: 
1577: ### Popul√§re MCP-Server
1578: 
1579: | Server | Paket | Typischer Einsatz |
1580: | --- | --- | --- |
1581: | **GitHub** | `gh copilot mcp` | PRs, Issues, Repos, Code Search |
1582: | **Filesystem** | `@anthropic/mcp-filesystem` | Zugriff auf Ordner au√üerhalb des Repos |
1583: | **PostgreSQL** | `@anthropic/mcp-postgres` | DB-Queries, Schema-Inspection |
1584: | **Brave Search** | `@anthropic/mcp-brave-search` | Web-Suche aus Claude heraus |
1585: | **Puppeteer** | `@anthropic/mcp-puppeteer` | Browser-Automation, Screenshots |
1586: | **SQLite** | `@anthropic/mcp-sqlite` | Lokale DB-Abfragen |
1587: | **Sentry** | `@sentry/mcp-server` | Error-Tracking, Issue-Triage |
1588: 
1589: Vollst√§ndige Liste: [MCP Server Registry](https://github.com/modelcontextprotocol/servers)
1590: 
1591: ### Eigene MCP-Server bauen
1592: 
1593: Claude kann MCP-Server direkt schreiben:
1594: 
1595: ```text
1596: Build an MCP server that connects to our internal REST API at https://api.example.com
1597: It should expose:
1598: - A "search-users" tool that queries /api/users?q=
1599: - A "get-user" tool that fetches /api/users/:id
1600: ```
1601: 
1602: MCP-Server sind Node.js- oder Python-Prozesse die √ºber stdio kommunizieren. Das Protokoll ist standardisiert und gut dokumentiert.
1603: 
1604: ### Best Practices
1605: 
1606: - **Projekt-MCP in `.claude/settings.json`** ‚Äî damit das Team die gleichen Server nutzt
1607: - **Credentials nie in Settings** ‚Äî Umgebungsvariablen verwenden (`$DATABASE_URL`, `$GITHUB_TOKEN`)
1608: - **Least Privilege** ‚Äî nur die Server anbinden die tats√§chlich gebraucht werden
1609: - **MCP statt CLI-Workarounds** ‚Äî `claude mcp add github` statt manuelles `gh api` Scripting
1610: - **Test mit `/mcp`** ‚Äî nach dem Setup pr√ºfen ob alle Server healthy sind
1611: 
1612: ---
1613: 
1614: ## 16. Permissions & `settings.json`
1615: 
1616: ### Was es ist
1617: 
1618: Claude Code hat ein **gestuftes Permission-System** das kontrolliert, welche Tools und Aktionen erlaubt, verboten oder approval-pflichtig sind. Permissions werden in `settings.json` gespeichert und k√∂nnen per `/permissions` interaktiv verwaltet werden.
1619: 
1620: ### Permission-Ebenen
1621: 
1622: | Ebene | Datei | Wer kontrolliert |
1623: | --- | --- | --- |
1624: | **Enterprise** | Managed Policy (IT-Admin) | Organisations-Admins |
1625: | **User** | `~/.claude/settings.json` | Du (global, alle Projekte) |
1626: | **Project** | `.claude/settings.json` | Team (via Git) |
1627: | **Project-Local** | `.claude/settings.local.json` | Du (nur dieses Projekt) |
1628: 
1629: **Priorit√§t:** Enterprise > User > Project. H√∂here Ebenen k√∂nnen niedrigere √ºberschreiben.
1630: 
1631: ### Quick Setup
1632: 
1633: ```text
1634: # In Claude Code:
1635: /permissions
1636: ```
1637: 
1638: ### Allow/Deny-Syntax
1639: 
1640: Permissions verwenden **Glob-Patterns** um Tools gezielt freizugeben oder zu sperren:
1641: 
1642: ```json
1643: {
1644:   "permissions": {
1645:     "allow": [
1646:       "Bash(npm test)",
1647:       "Bash(npm run lint)",
1648:       "Bash(npm run build)",
1649:       "Bash(git *)",
1650:       "Read(*)",
1651:       "Write(src/**)",
1652:       "MCP(github:*)"
1653:     ],
1654:     "deny": [
1655:       "Bash(rm -rf *)",
1656:       "Bash(curl *)",
1657:       "Bash(wget *)",
1658:       "Write(.env*)",
1659:       "Write(*.lock)"
1660:     ]
1661:   }
1662: }
1663: ```
1664: 
1665: ### Permission-Patterns
1666: 
1667: | Pattern | Bedeutung |
1668: | --- | --- |
1669: | `Bash(npm test)` | Exakt diesen Befehl erlauben |
1670: | `Bash(npm run *)` | Alle npm-run-Befehle erlauben |
1671: | `Bash(git *)` | Alle Git-Befehle erlauben |
1672: | `Read(*)` | Alle Dateien lesen erlauben |
1673: | `Write(src/**)` | Nur in `src/` schreiben erlauben |
1674: | `MCP(github:*)` | Alle GitHub-MCP-Tools erlauben |
1675: | `Skill(deploy *)` | Deploy-Skill sperren/erlauben |
1676: 
1677: ### Trust-Modi
1678: 
1679: Claude Code kann mit verschiedenen Trust-Leveln gestartet werden:
1680: 
1681: ```bash
1682: # Standard: Fragt bei jedem potenziell gef√§hrlichen Tool
1683: claude
1684: 
1685: # Alles erlauben (f√ºr CI/CD oder vertrauensw√ºrdige Umgebungen):
1686: claude --dangerously-skip-permissions
1687: 
1688: # Headless Mode (f√ºr Automation/Scripts):
1689: claude -p "Run all tests" --allowedTools "Bash(npm test)" --json
1690: ```
1691: 
1692: ### Session-Permissions
1693: 
1694: W√§hrend einer Session kannst du Permissions anpassen:
1695: 
1696: ```text
1697: # Anzeigen was aktuell erlaubt/verboten ist:
1698: /permissions
1699: 
1700: # Tempor√§r erlauben (nur diese Session):
1701: Allow Bash(docker *) for this session
1702: 
1703: # Dauerhaft erlauben:
1704: Always allow Bash(docker *)
1705: ```
1706: 
1707: ### Hook-Registrierung in `settings.json`
1708: 
1709: Neben Permissions ist `settings.json` auch der einzige Ort, an dem Hooks registriert werden. Ein Hook-Script ohne Eintrag hier ist **Dead Code**.
1710: 
1711: ```json
1712: {
1713:   "permissions": {
1714:     "allow": ["Bash(npm test)", "Bash(git *)"],
1715:     "deny": ["Bash(rm -rf *)", "Write(.env*)"]
1716:   },
1717:   "hooks": {
1718:     "PreToolUse": [
1719:       {
1720:         "matcher": "Edit|Write",
1721:         "hooks": [{ "type": "command", "command": ".claude/hooks/protect-files.sh" }]
1722:       }
1723:     ],
1724:     "PostToolUse": [
1725:       {
1726:         "matcher": "Edit",
1727:         "hooks": [{ "type": "command", "command": ".claude/hooks/run-lint.sh" }]
1728:       }
1729:     ]
1730:   }
1731: }
1732: ```
1733: 
1734: | Hook-Typ | Wann | Typischer Einsatz |
1735: | --- | --- | --- |
1736: | `PreToolUse` | Vor dem Tool-Aufruf | File-Schutz, Validierung |
1737: | `PostToolUse` | Nach dem Tool-Aufruf | Linting, Logging, Formatierung |
1738: | `PreCompact` | Vor Context-Komprimierung | Wichtige Infos sichern |
1739: 
1740: ### Best Practices
1741: 
1742: - **Project-level `settings.json` ins Git** ‚Äî Team-weite Konsistenz
1743: - **Deny vor Allow** ‚Äî sicherheitsrelevante Befehle explizit sperren
1744: - **Credentials-Files sch√ºtzen** ‚Äî `Deny: Write(.env*)`, `Write(*secret*)`
1745: - **CI-Pipelines:** `--allowedTools` Whitelist statt `--dangerously-skip-permissions`
1746: - **Neue MCP-Server:** beim ersten Einsatz Permissions pr√ºfen
1747: - **Nach Hook-Script erstellen:** sofort in `settings.json` registrieren, sonst l√§uft der Hook nie
1748: 
1749: ---
1750: 
1751: ## 17. Multi-Root Workspaces & Monorepos
1752: 
1753: ### Was es ist
1754: 
1755: Claude Code kann mit **mehreren Projekt-Ordnern** gleichzeitig arbeiten. Das ist relevant f√ºr Monorepos, Cross-Repo-Arbeit, und wenn Docs oder Configs in einem separaten Ordner liegen.
1756: 
1757: ### Ordner hinzuf√ºgen
1758: 
1759: ```bash
1760: # Zus√§tzlichen Ordner zur Session hinzuf√ºgen:
1761: claude --add-dir /path/to/other-project
1762: 
1763: # Mehrere Ordner:
1764: claude --add-dir ../shared-lib --add-dir ../docs
1765: ```
1766: 
1767: ### CLAUDE.md in Unterverzeichnissen
1768: 
1769: In einem Monorepo kann jedes Paket ein eigenes `CLAUDE.md` haben:
1770: 
1771: ```text
1772: monorepo/
1773: ‚îú‚îÄ‚îÄ CLAUDE.md                    # Root-Level: Globale Regeln
1774: ‚îú‚îÄ‚îÄ packages/
1775: ‚îÇ   ‚îú‚îÄ‚îÄ frontend/
1776: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CLAUDE.md            # Frontend-spezifische Regeln
1777: ‚îÇ   ‚îú‚îÄ‚îÄ backend/
1778: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CLAUDE.md            # Backend-spezifische Regeln
1779: ‚îÇ   ‚îî‚îÄ‚îÄ shared/
1780: ‚îÇ       ‚îî‚îÄ‚îÄ CLAUDE.md            # Shared-Library-Regeln
1781: ```
1782: 
1783: **Lade-Verhalten:**
1784: 
1785: - Root-CLAUDE.md wird **immer** geladen
1786: - Unterverzeichnis-CLAUDE.md-Dateien werden **on-demand** geladen, wenn Claude dort Dateien liest
1787: - Regeln werden **additiv** kombiniert (kein Override)
1788: 
1789: ### Rules in Monorepos
1790: 
1791: Pfad-spezifische Rules eignen sich besonders gut f√ºr Monorepos:
1792: 
1793: ```markdown
1794: <!-- .claude/rules/frontend.md -->
1795: ---
1796: paths: ["packages/frontend/**"]
1797: ---
1798: 
1799: # Frontend Rules
1800: - Use React 19 with Server Components
1801: - CSS Modules, no Tailwind
1802: - All components must have unit tests
1803: ```
1804: 
1805: ```markdown
1806: <!-- .claude/rules/backend.md -->
1807: ---
1808: paths: ["packages/backend/**"]
1809: ---
1810: 
1811: # Backend Rules
1812: - Express.js with TypeScript
1813: - Zod for request validation
1814: - Integration tests with supertest
1815: ```
1816: 
1817: ### Skills-Discovery in Monorepos
1818: 
1819: Claude Code durchsucht verschachtelte Verzeichnisse nach Skills:
1820: 
1821: ```text
1822: monorepo/
1823: ‚îú‚îÄ‚îÄ .claude/skills/              # Root Skills (f√ºr alle Packages)
1824: ‚îú‚îÄ‚îÄ packages/
1825: ‚îÇ   ‚îú‚îÄ‚îÄ frontend/.claude/skills/ # Frontend-spezifische Skills
1826: ‚îÇ   ‚îî‚îÄ‚îÄ backend/.claude/skills/  # Backend-spezifische Skills
1827: ```
1828: 
1829: Claude sieht alle Skills und entscheidet kontextbasiert welche relevant sind.
1830: 
1831: ### Cross-Repo-Arbeit
1832: 
1833: F√ºr Arbeit √ºber Repo-Grenzen hinweg:
1834: 
1835: ```bash
1836: # Hauptprojekt + API-Spec-Repo + Shared Types:
1837: claude --add-dir ../api-spec --add-dir ../shared-types
1838: ```
1839: 
1840: Claude kann dann Dateien aus allen Ordnern lesen und bearbeiten, wobei die CLAUDE.md-Dateien jedes Ordners respektiert werden.
1841: 
1842: ### Best Practices
1843: 
1844: - **Root-CLAUDE.md minimal halten** ‚Äî nur Regeln die f√ºr alle Packages gelten
1845: - **Package-spezifisches in Unterverzeichnis-CLAUDE.md** ‚Äî nicht alles in Root stopfen
1846: - **`paths:`-Scoping in Rules** ‚Äî verhindert dass Backend-Regeln auf Frontend-Code angewandt werden
1847: - **`--add-dir` statt Symlinks** ‚Äî sauberer und Claude versteht den Context besser
1848: - **Nur hinzuf√ºgen was n√∂tig ist** ‚Äî jeder zus√§tzliche Ordner verbraucht Discovery-Budget
1849: 
1850: ---
1851: 
1852: ## 18. GitHub Copilot in VS Code ‚Äî Optimales Setup
1853: 
1854: > Quelle: [VS Code Copilot Customization](https://code.visualstudio.com/docs/copilot/customization/overview) und [Custom Instructions](https://code.visualstudio.com/docs/copilot/customization/custom-instructions) (Stand: Februar 2026)
1855: 
1856: ### √úbersicht: Customization-Ebenen
1857: 
1858: VS Code Copilot kennt diese Schichten, von "immer aktiv" bis "on-demand":
1859: 
1860: | Zweck | Mechanismus | Wann aktiv |
1861: | --- | --- | --- |
1862: | Coding-Standards f√ºr das ganze Repo | Always-on instructions | Jede Chat-Anfrage |
1863: | Unterschiedliche Regeln je Dateityp | File-based instructions (`*.instructions.md`) | Wenn Dateiten den `applyTo`-Glob matchen |
1864: | Wiederholbare Tasks als Slash-Command | Prompt files (`*.prompt.md`) | Manuell per `/command` |
1865: | Mehrere AI-Tools, ein Set Regeln | `AGENTS.md` | Jede Chat-Anfrage (multi-tool) |
1866: | Spezialisierter Agent f√ºr eine Rolle | Custom agents | Wenn ausgew√§hlt oder delegiert |
1867: | Externe APIs / Datenbanken | MCP | Wenn Tool relevant |
1868: | Automation an Agent-Lifecycle-Punkten | Hooks | Beim konfigurierten Trigger |
1869: 
1870: **Empfehlung f√ºr den Einstieg:**
1871: 1. `/.github/copilot-instructions.md` f√ºr projekt-weite Standards
1872: 2. `.github/instructions/*.instructions.md` f√ºr sprach-/technologie-spezifische Regeln
1873: 3. `.github/prompts/*.prompt.md` f√ºr wiederkehrende Workflows (Review, Feature-Plan etc.)
1874: 
1875: ### Typ 1: Always-On Instructions
1876: 
1877: Always-on instructions werden **automatisch in jede Chat-Anfrage** geladen ‚Äî kein manuelles Anh√§ngen n√∂tig.
1878: 
1879: #### `copilot-instructions.md`
1880: 
1881: Datei: `.github/copilot-instructions.md`
1882: 
1883: - Wird f√ºr **alle Chat-Anfragen** im Workspace geladen (Inline Chat, Ask, Agent, Code Review)
1884: - Enth√§lt: Coding-Standards, Tech-Stack, Architektur-Patterns, Security-Requirements
1885: - **L√§nge:** Concise halten ‚Äî je l√§nger, desto mehr Rauschen im Context
1886: - Inhalt: nur was der AI nicht aus dem Code ablesen kann
1887: 
1888: Minimales Starter-Template:
1889: 
1890: ```markdown
1891: # Copilot Instructions
1892: 
1893: ## Project Context
1894: 
1895: [Project Name] ‚Äî [1-sentence description]. [Stack/framework].
1896: 
1897: ## Always Do
1898: 
1899: - [Rule 1 that Copilot cannot infer from code]
1900: - [Rule 2]
1901: 
1902: ## Never Do
1903: 
1904: - [Hard prohibition 1]
1905: - [Hard prohibition 2]
1906: 
1907: ## Key Files
1908: 
1909: | File | Purpose |
1910: | --- | --- |
1911: | `src/main.ts` | Entry point |
1912: | `config/` | All configuration |
1913: ```
1914: 
1915: #### `AGENTS.md`
1916: 
1917: Datei: `AGENTS.md` (Repo-Root)
1918: 
1919: - Wird von **VS Code Copilot, OpenAI Codex, Gemini CLI, Cursor** gleicherma√üen gelesen
1920: - Ideal wenn mehrere AI-Tools im Repo eingesetzt werden ‚Äî ein Ort f√ºr alle
1921: - Experimentell: nested `AGENTS.md` in Subordnern (via `chat.useNestedAgentsMdFiles` Setting)
1922: - Setting: `chat.useAgentsMdFile` (default: enabled)
1923: 
1924: #### `CLAUDE.md`
1925: 
1926: VS Code liest seit 2026 auch `CLAUDE.md` und `.claude/rules/*.md` als Always-On-Instructions.
1927: 
1928: - Setting: `chat.useClaudeMdFile`
1929: - `.claude/rules/` nutzt `paths:` statt `applyTo:` f√ºr Glob-Matching (Claude Rules Format)
1930: - Vorteil: Ein gemeinsames Setup f√ºr Claude Code + VS Code Copilot ohne Duplizierung
1931: 
1932: **Priorit√§t bei Konflikten:** Personal > Repository (copilot-instructions.md / AGENTS.md) > Organization
1933: 
1934: ### Typ 2: File-Based Instructions (`.instructions.md`)
1935: 
1936: Dateien: `.github/instructions/*.instructions.md`
1937: 
1938: File-based instructions werden **nur geladen wenn der Agent an Dateien arbeitet die dem Glob-Pattern matchen**. Ideal f√ºr sprachspezifische Konventionen oder Framework-Patterns.
1939: 
1940: #### Frontmatter-Felder
1941: 
1942: | Feld | Required | Beschreibung |
1943: | --- | --- | --- |
1944: | `name` | Nein | Anzeigename im VS Code Diagnostics-View und beim Hover |
1945: | `description` | Nein | Kurzbeschreibung (auch f√ºr semantisches Matching ohne `applyTo`) |
1946: | `applyTo` | Nein | Glob-Pattern. Ohne dieses Feld: **nicht automatisch geladen** (nur manuell) |
1947: 
1948: > **Wichtig:** Ohne `applyTo` wird die Datei niemals automatisch angewendet. Wenn kein Glob passt aber semantisch √Ñhnlichkeit besteht, kann die `description` als Fallback-Trigger wirken.
1949: 
1950: #### Dateiformat
1951: 
1952: ```markdown
1953: ---
1954: name: 'TypeScript Standards'
1955: description: 'Type safety and naming conventions for TypeScript files'
1956: applyTo: "**/*.ts,**/*.tsx"
1957: ---
1958: 
1959: # TypeScript Standards
1960: 
1961: - Prefer `interface` over `type` for object shapes
1962: - Use `unknown` instead of `any`
1963: - All public functions must have JSDoc comments
1964: ```
1965: 
1966: #### Best Practices
1967: 
1968: - Granular statt monolithisch: eine Datei pro Thema (Frontend, Backend, Tests, Docs)
1969: - `name` + `description` immer ausf√ºllen ‚Äî verbessert die VS Code Diagnostics-UI
1970: - Setting: `chat.includeApplyingInstructions` muss enabled sein (default: true)
1971: - Debugging: Chat View ‚Üí Rechtsklick ‚Üí Diagnostics zeigt alle geladenen Instruction-Files
1972: 
1973: ### Typ 3: Prompt Files (`.prompt.md`) ‚Äî Slash Commands
1974: 
1975: Dateien: `.github/prompts/*.prompt.md`
1976: 
1977: Prompt Files sind **manuell aufrufbare Slash-Commands** im Chat. Sie kapseln wiederkehrende Tasks als vordefinierte Prompts.
1978: 
1979: #### Frontmatter-Felder
1980: 
1981: | Feld | Beschreibung |
1982: | --- | --- |
1983: | `name` | Slash-Command-Name (default: Dateiname) |
1984: | `description` | Tooltip-Text im Command-Picker |
1985: | `argument-hint` | Placeholder-Text im Chat-Input, z.B. `describe the feature` |
1986: | `agent` | Agent f√ºr den Prompt: `ask`, `agent`, `plan`, oder Custom Agent Name |
1987: | `model` | Modell-Override (optional) |
1988: | `tools` | Whitelist der verf√ºgbaren Tools f√ºr diesen Prompt |
1989: 
1990: #### Beispiel: Feature-Plan Prompt
1991: 
1992: ```markdown
1993: ---
1994: name: 'new-feature'
1995: description: 'Plan a new feature before any code is written'
1996: agent: plan
1997: argument-hint: 'describe the feature'
1998: ---
1999: 
2000: Create a structured implementation plan for: ${input:feature:describe the feature}
2001: 
2002: ## Constraints
2003: - [Project-specific constraint 1]
2004: - [Project-specific constraint 2]
2005: 
2006: ## Plan Structure
2007: 1. Goal ‚Äî one sentence
2008: 2. Files to change
2009: 3. Test plan
2010: ```
2011: 
2012: #### Beispiel: Pre-Commit Review Prompt
2013: 
2014: ```markdown
2015: ---
2016: name: 'review-changes'
2017: description: 'Review current changes for project rule compliance'
2018: agent: ask
2019: ---
2020: 
2021: Review the current changes in `#changes` for compliance:
2022: 
2023: - [Rule A]
2024: - [Rule B]
2025: 
2026: Report each violation with file + line + fix suggestion.
2027: ```
2028: 
2029: #### Aufruf
2030: 
2031: - Im Chat: `/review-changes` oder `/new-feature`
2032: - Command Palette: `Chat: Run Prompt`
2033: - Editor: Play-Button in der Prompt-Datei (zum Testen)
2034: 
2035: #### Agent Skills vs. Prompt Files
2036: 
2037: | Feature | Agent Skills (`.agents/skills/`) | Prompt Files (`.github/prompts/`) |
2038: | --- | --- | --- |
2039: | Aufruf | `/skill-name` oder automatisch | `/command` manuell |
2040: | Multi-Tool | ‚úÖ Claude, Codex, Copilot, Cursor | VS Code Copilot only |
2041: | Tools-Whitelist | `allowed-tools:` | `tools:` |
2042: | Agent w√§hlbar | `agent:` (Claude-Felder) | `agent:` |
2043: | Argumente | `$ARGUMENTS` | `${input:name}` Variablen |
2044: | Semantisches Triggern | ‚úÖ (automatisch) | ‚ùå (immer manuell) |
2045: 
2046: **Faustregel:** Agent Skills f√ºr plattform√ºbergreifende wiederverwendbare Workflows. Prompt Files f√ºr VS-Code-spezifische oder Copilot-optimierte Tasks.
2047: 
2048: ### Typ 4: Custom Agents
2049: 
2050: Dateien: `.github/agents/*.md` (oder via VS Code UI angelegt)
2051: 
2052: Custom Agents definieren eine **spezialisierte Persona** mit eigenen Tools, Modell und Instruktionen. Ein Custom Agent kann als Subagent delegiert werden.
2053: 
2054: ```markdown
2055: ---
2056: name: 'security-reviewer'
2057: description: 'Reviews code for security vulnerabilities'
2058: tools: ["read_file", "grep", "run_command"]
2059: model: claude-sonnet
2060: ---
2061: 
2062: You are a senior security engineer. Review code for:
2063: - Injection vulnerabilities (XSS, SQL injection)
2064: - Authentication and authorization flaws
2065: - Hardcoded secrets
2066: 
2067: Output severity-classified findings with exact file:line references.
2068: ```
2069: 
2070: ### Checkliste: Neues Repo aufsetzen
2071: 
2072: ```text
2073: ‚òê .github/copilot-instructions.md erstellt (projekt-weite Standards)
2074: ‚òê .github/instructions/ angelegt mit *.instructions.md Dateien
2075:   ‚òê Alle instruction files haben name + description + applyTo Frontmatter
2076:   ‚òê applyTo Glob-Pattern korrekt (ohne applyTo: wird Datei nie automatisch geladen)
2077: ‚òê .github/prompts/ angelegt mit *.prompt.md Dateien
2078:   ‚òê Review-Prompt (agent: ask, read-only)
2079:   ‚òê Feature-Plan-Prompt (agent: plan)
2080: ‚òê AGENTS.md im Root (wenn mehrere AI-Tools eingesetzt werden)
2081: ‚òê Diagnostics gepr√ºft (Chat View ‚Üí Rechtsklick ‚Üí Diagnostics)
2082: ```
2083: 
2084: ### Anti-Patterns
2085: 
2086: | Anti-Pattern | Problem | Fix |
2087: | --- | --- | --- |
2088: | `*.instructions.md` ohne `applyTo:` | Datei wird niemals automatisch geladen | `applyTo: "**/*"` f√ºr immer-aktiv, oder spezifischer Glob |
2089: | Instruction-Datei ohne `name`/`description` | Schlechte Diagnostics-UI, kein semantisches Matching | Frontmatter erg√§nzen |
2090: | `copilot-instructions.md` zu lang | Wichtige Regeln gehen im Rauschen unter | Pfad-spezifische Regeln in `*.instructions.md` auslagern |
2091: | Provider-Adressform pauschal hardcoded | Falsche Tonalit√§t wenn mehrere Provider variieren | Provider-spezifische Regel mit Ausnahmen dokumentieren |
2092: | Duplikate zwischen `copilot-instructions.md` und `AGENTS.md` | Inkonsistenz bei √Ñnderungen | In `copilot-instructions.md` auf `AGENTS.md` verweisen, nicht duplizieren |
2093: | Hook-Script ohne VS Code Settings | Script wird nie ausgef√ºhrt ‚Äî stille Fehlfunktion | In VS Code `settings.json` registrieren |
2094: 
2095: ---
2096: 
2097: ## 19. Kilo Code ‚Äî Optimales Setup
2098: 
2099: > Quelle: [kilo.ai/docs/customize](https://kilo.ai/docs/customize) und [kilo.ai/docs/customize/custom-rules](https://kilo.ai/docs/customize/custom-rules) (Stand: Februar 2026)
2100: 
2101: ### √úberblick
2102: 
2103: Kilo Code ist ein Open-Source AI Coding Agent (VS Code Extension + CLI, Fork von OpenCode). Er unterst√ºtzt 500+ Modelle, hat 15k+ GitHub Stars und ist #1 auf OpenRouter. Kilo verwendet `AGENTS.md` als prim√§ren Standard f√ºr Projektkontext und hat zus√§tzlich ein eigenes `.kilocode/`-basiertes Regelwerk.
2104: 
2105: ### Konfigurations-Ebenen (Priorit√§t, hoch ‚Üí niedrig)
2106: 
2107: | Priorit√§t | Datei/Verzeichnis | Zweck |
2108: | --- | --- | --- |
2109: | 1 (h√∂chste) | `.kilocode/rules-{mode}/` | Mode-spezifische Regeln (Code, Architect, Debug, Ask) |
2110: | 2 | `.kilocode/rules/*.md` | Projekt-Regeln ‚Äî **wichtigste per-Projekt-Konfiguration** |
2111: | 3 | `AGENTS.md` | Universeller Standard aller AI Coding Tools |
2112: | 4 | `~/.kilocode/rules/` | Globale User-Regeln (nicht im Repo) |
2113: | 5 (niedrigste) | Custom Instructions | IDE-global, nicht versionierbar |
2114: 
2115: **Key Insight:** `AGENTS.md` wird von Kilo Code nativ gelesen (Priorit√§t 3). F√ºr st√§rkere Regeln ‚Äî die `AGENTS.md` √ºberschreiben ‚Äî `.kilocode/rules/coding-standards.md` nutzen.
2116: 
2117: ### Projekt-Regeln: `.kilocode/rules/`
2118: 
2119: Dateien in `.kilocode/rules/*.md` werden **bei jeder Anfrage** geladen (Priorit√§t 2, h√∂her als `AGENTS.md`).
2120: 
2121: ```text
2122: project/
2123: ‚îú‚îÄ‚îÄ .kilocode/
2124: ‚îÇ   ‚îî‚îÄ‚îÄ rules/
2125: ‚îÇ       ‚îú‚îÄ‚îÄ coding-standards.md    ‚Üê Haupt-Regelwerk
2126: ‚îÇ       ‚îú‚îÄ‚îÄ security.md            ‚Üê Sicherheitsrichtlinien
2127: ‚îÇ       ‚îî‚îÄ‚îÄ naming-conventions.md  ‚Üê Benennungskonventionen
2128: ‚îú‚îÄ‚îÄ AGENTS.md                      ‚Üê Universeller Kontext (Priorit√§t 3)
2129: ‚îî‚îÄ‚îÄ ...
2130: ```
2131: 
2132: #### Regelformat
2133: 
2134: Kilo Rules verwenden YAML-Frontmatter mit `trigger: always` f√ºr dauerhaft aktive Regeln:
2135: 
2136: ```markdown
2137: ---
2138: trigger: always
2139: ---
2140: 
2141: # Coding Standards
2142: 
2143: - Minimal changes only ‚Äî don't touch unrelated files
2144: - No runtime frameworks, no CDN imports
2145: - UTF-8 without BOM on all files
2146: ```
2147: 
2148: #### Mode-spezifische Regeln
2149: 
2150: F√ºr Regeln die nur in bestimmten Modi gelten:
2151: 
2152: ```text
2153: .kilocode/rules-code/     ‚Üê Nur im Code-Modus
2154: .kilocode/rules-architect/ ‚Üê Nur im Architect-Modus
2155: .kilocode/rules-debug/    ‚Üê Nur im Debug-Modus
2156: ```
2157: 
2158: ### AGENTS.md ‚Äî Universeller Kontext
2159: 
2160: Kilo Code liest `AGENTS.md` nativ (Priorit√§t 3). Das Template enth√§lt bereits eine fertige `AGENTS.md`. Kilo sch√ºtzt die Datei vor versehentlichen √Ñnderungen durch den Agent (write-protected by default).
2161: 
2162: Die Konfigurationshierarchie in Kilo im √úberblick ‚Äî `.kilocode/rules/` hat Vorrang:
2163: 
2164: ```text
2165: .kilocode/rules-{mode}/    ‚Üê  h√∂chste Priorit√§t (mode-spezifisch)
2166: .kilocode/rules/           ‚Üê  Projekt-Regeln
2167: AGENTS.md                  ‚Üê  Universal-Kontext
2168: ~/.kilocode/rules/         ‚Üê  User-globale Regeln
2169: Custom Instructions        ‚Üê  IDE-global (niedrigste Priorit√§t)
2170: ```
2171: 
2172: ### Modi (Modes)
2173: 
2174: Kilo Code hat 4 eingebaute Modi, zwischen denen man wechseln kann:
2175: 
2176: | Modus | Zweck | Typische Tools |
2177: | --- | --- | --- |
2178: | **Code** | Code schreiben und editieren | File tools, Terminal, Browser |
2179: | **Architect** | Planen, analysieren, entwerfen | Read-only Tools, kein Code schreiben |
2180: | **Debug** | Fehler finden und beheben | Diagnostics, Terminal, selective writes |
2181: | **Ask** | Questions beantworten ohne √Ñnderungen | Read-only |
2182: 
2183: Eigene Modi k√∂nnen mit Custom Modes erstellt werden ‚Äî n√ºtzlich f√ºr projektspezifische Workflows (z.B. `review`, `doc-writer`, `migration`).
2184: 
2185: ### `.kilocodeignore` ‚Äî Dateien ausschlie√üen
2186: 
2187: √Ñhnlich wie `.gitignore` ‚Äî verhindert dass Kilo bestimmte Dateien liest oder modifiziert:
2188: 
2189: ```text
2190: # .kilocodeignore
2191: .env
2192: credentials.json
2193: secrets/*.txt
2194: dist/
2195: ```
2196: 
2197: ### Skills & Workflows
2198: 
2199: Kilo Code unterst√ºtzt denselben Agent Skills Open Standard wie Claude Code und Antigravity:
2200: 
2201: - **Skills**: `.kilocode/skills/<name>/SKILL.md` (Kilo-spezifisch) oder `.agents/skills/<name>/SKILL.md` (universal, empfohlen)
2202: - **Workflows**: Kilo hat ein eigenes Workflow-System (`kilo.ai/docs/customize/workflows`) f√ºr automatisierte Mehrstufen-Tasks
2203: 
2204: Das Template-Repo enth√§lt alle Skills bereits im universellen `.agents/skills/`-Format ‚Äî diese funktionieren mit Kilo Code ohne weitere Anpassung.
2205: 
2206: ### Migration: Memory Bank ‚Üí AGENTS.md
2207: 
2208: Kilo hat das √§ltere Memory Bank Feature zugunsten von `AGENTS.md` deprecated. Falls du ein altes Kilo-Projekt migrierst:
2209: 
2210: ```bash
2211: # Memory Bank Inhalte ansehen:
2212: ls .kilocode/rules/memory-bank/
2213: 
2214: # Inhalte nach AGENTS.md migrieren (manuell oder per Kilo):
2215: # "Migrate my memory bank content to AGENTS.md"
2216: ```
2217: 
2218: ### Empfohlenes Setup (5 Minuten)
2219: 
2220: 1. **`AGENTS.md` bef√ºllen** ‚Äî Projektname, Stack, Constraints, verbotene Patterns
2221: 2. **`.kilocode/rules/coding-standards.md` bef√ºllen** ‚Äî Stack-spezifische Regeln (Priorit√§t 2, √ºberschreibt AGENTS.md)
2222: 3. **Mode-spezifische Regeln** (optional) ‚Äî `.kilocode/rules-architect/` f√ºr Architekt-Kontext
2223: 4. **`.kilocodeignore` anlegen** ‚Äî Secrets, Build-Outputs, Credentials ausschlie√üen
2224: 5. **Skills nutzen** ‚Äî universelle Skills in `.agents/skills/` funktionieren direkt
2225: 
2226: ### Anti-Patterns
2227: 
2228: | Anti-Pattern | Problem | Besser |
2229: | --- | --- | --- |
2230: | Nur `AGENTS.md` ohne `.kilocode/rules/` | Niedrigste Priorit√§t, wird von anderen Quellen √ºberschrieben | `.kilocode/rules/coding-standards.md` als prim√§res Regelwerk |
2231: | Secrets in `AGENTS.md` | Kilo liest die Datei bei jeder Anfrage ‚Äî Leak-Risiko | `.kilocodeignore` nutzen, Secrets nie in Konfigurationsdateien |
2232: | Mode-spezifische Regeln f√ºr alles | Overhead, schwer wartbar | Nur f√ºr echte Mode-Unterschiede nutzen |
2233: | Memory Bank weiter nutzen | Deprecated ‚Äî wird ggf. entfernt | Zu `AGENTS.md` migrieren |
2234: 
2235: ---
2236: 
2237: ## Quellen
2238: 
2239: - [Claude Code ‚Äî Memory Management](https://code.claude.com/docs/en/memory)
2240: - [Claude Code ‚Äî Best Practices](https://code.claude.com/docs/en/best-practices)
2241: - [Claude Code ‚Äî Skills](https://code.claude.com/docs/en/skills)
2242: - [Claude Code ‚Äî Hooks](https://code.claude.com/docs/en/hooks-guide)
2243: - [Claude Code ‚Äî Overview](https://code.claude.com/docs/en/overview)
2244: - [Claude Code ‚Äî MCP](https://code.claude.com/docs/en/mcp)
2245: - [Claude Code ‚Äî Permissions](https://code.claude.com/docs/en/permissions)
2246: - [Claude Code ‚Äî Settings](https://code.claude.com/docs/en/settings)
2247: - [Model Context Protocol ‚Äî Specification](https://modelcontextprotocol.io/)
2248: - [MCP Server Registry](https://github.com/modelcontextprotocol/servers)
2249: - [Google Antigravity ‚Äî Skills](https://antigravity.google/docs/skills)
2250: - [Gemini CLI ‚Äî Skills](https://geminicli.com/docs/cli/skills/)
2251: - [OpenAI Codex ‚Äî Skills](https://developers.openai.com/codex/skills)
2252: - [OpenAI Codex ‚Äî AGENTS.md](https://developers.openai.com/codex/guides/agents-md)
2253: - [Agent Skills Open Standard](https://agentskills.io/)
2254: - [VS Code ‚Äî Customize AI in VS Code (Overview)](https://code.visualstudio.com/docs/copilot/customization/overview)
2255: - [VS Code ‚Äî Use custom instructions](https://code.visualstudio.com/docs/copilot/customization/custom-instructions)
2256: - [VS Code ‚Äî Use prompt files (slash commands)](https://code.visualstudio.com/docs/copilot/customization/prompt-files)
2257: - [VS Code ‚Äî Create custom agents](https://code.visualstudio.com/docs/copilot/customization/custom-agents)
2258: - [VS Code ‚Äî Agent Skills](https://code.visualstudio.com/docs/copilot/customization/agent-skills)
2259: - [VS Code ‚Äî Hooks](https://code.visualstudio.com/docs/copilot/customization/hooks)
2260: - [Kilo Code ‚Äî Dokumentation (√úbersicht)](https://kilo.ai/docs)
2261: - [Kilo Code ‚Äî Customize](https://kilo.ai/docs/customize)
2262: - [Kilo Code ‚Äî Custom Rules](https://kilo.ai/docs/customize/custom-rules)
2263: - [Kilo Code ‚Äî Custom Instructions](https://kilo.ai/docs/customize/custom-instructions)
2264: - [Kilo Code ‚Äî AGENTS.md](https://kilo.ai/docs/customize/agents-md)
2265: - [Kilo Code ‚Äî Workflows](https://kilo.ai/docs/customize/workflows)
2266: - [Kilo Code ‚Äî Skills](https://kilo.ai/docs/customize/skills)
2267: - [Kilo Code ‚Äî GitHub Repository](https://github.com/Kilo-Org/kilocode)
</file>

<file path="docs/ARCHITECTURE.md">
  1: # Architecture
  2: 
  3: > Why this template is structured the way it is ‚Äî the design decisions behind every directory, convention, and pattern.
  4: 
  5: ## The Core Problem
  6: 
  7: AI coding agents work best when they have rich, accurate context about your project. But each agent reads context from different files in different formats:
  8: 
  9: - Claude Code reads `CLAUDE.md` and `.claude/`
 10: - GitHub Copilot reads `.github/copilot-instructions.md`
 11: - Jules reads `AGENTS.md`
 12: - Antigravity reads `GEMINI.md` and `.agent/`
 13: - Kilo Code reads `AGENTS.md` and `.kilocode/rules/`
 14: - Cursor / Codex read `AGENTS.md`
 15: 
 16: Without a template, developers either configure one tool well (and others poorly), or duplicate content across files that inevitably drift out of sync.
 17: 
 18: This template solves that with a **multi-layered, zero-duplication architecture**: one source of truth per concern, delivered in every agent's native format.
 19: 
 20: ---
 21: 
 22: ## Layered Instruction Architecture
 23: 
 24: ```mermaid
 25: flowchart TB
 26:     AGENTS["üìÑ AGENTS.md\nUniversal context ‚Äî always on\nProject overview ¬∑ architecture ¬∑ coding rules"]
 27: 
 28:     AGENTS --> CLAUDE["üìÑ CLAUDE.md\nClaude Code only\nConstraints ¬∑ prohibitions ¬∑ context hooks"]
 29:     AGENTS --> COPILOT["üìÑ .github/copilot-instructions.md\nGitHub Copilot only\nAlways-on rules ¬∑ prompt files"]
 30:     AGENTS --> KILO["üìÑ .kilocode/rules/\nKilo Code only\nPriority 2 ‚Äî overrides AGENTS.md"]
 31:     AGENTS --> AGENT["üìÅ .agent/rules/ + GEMINI.md\nAntigravity / Gemini only\nAlways-on rules"]
 32: 
 33:     CLAUDE --> RULES["üìÅ .claude/rules/*.md\nPath-scoped ‚Äî auto-loaded per file type\nStack-specific conventions"]
 34: 
 35:     RULES --> SKILLS["üìÅ Skills\n.claude/skills/ ¬∑ .agents/skills/ ¬∑ .agent/skills/\nOn-demand deep workflows ‚Äî invoked explicitly"]
 36:     COPILOT --> SKILLS
 37:     KILO --> SKILLS
 38:     AGENT --> SKILLS
 39: ```
 40: 
 41: **Key principle:** Lower layers override higher layers, but only when invoked. Path-scoped rules override AGENTS.md for specific file types. Skills override everything when active ‚Äî but only for the duration of the invoked task.
 42: 
 43: ---
 44: 
 45: ## Directory Map
 46: 
 47: ### Which agent reads which file
 48: 
 49: ```mermaid
 50: flowchart LR
 51:     subgraph Universal
 52:         AGENTS["AGENTS.md"]
 53:         README["README.md"]
 54:     end
 55: 
 56:     subgraph Claude
 57:         CLAUDE["CLAUDE.md"]
 58:         CRULES[".claude/rules/*.md"]
 59:         CSKILLS[".claude/skills/"]
 60:         CAGENTS[".claude/agents/"]
 61:     end
 62: 
 63:     subgraph Copilot
 64:         GH[".github/copilot-instructions.md"]
 65:         PROMPTS[".github/prompts/"]
 66:         INSTR[".github/instructions/"]
 67:     end
 68: 
 69:     subgraph Kilo
 70:         KILO[".kilocode/rules/"]
 71:     end
 72: 
 73:     subgraph Antigravity["Antigravity / Gemini"]
 74:         GEMINI["GEMINI.md"]
 75:         ARULES[".agent/rules/"]
 76:         AWFLOWS[".agent/workflows/"]
 77:         ASKILLS[".agent/skills/"]
 78:     end
 79: 
 80:     subgraph JulesAI["Google Jules"]
 81:         J_AGENTS["AGENTS.md ‚úì"]
 82:         J_README["README.md ‚úì fallback"]
 83:     end
 84: 
 85:     AGENTS --> Claude
 86:     AGENTS --> Copilot
 87:     AGENTS --> Kilo
 88:     AGENTS --> JulesAI
 89:     README --> JulesAI
 90: ```
 91: 
 92: ### Root instruction files
 93: 
 94: | File | Read by | Purpose |
 95: | --- | --- | --- |
 96: | `CLAUDE.md` | Claude Code | Primary instructions: project overview, constraints, prohibited actions, test command |
 97: | `AGENTS.md` | Jules (native), Copilot, Cursor, Codex, Kilo | Universal context: architecture, file structure, coding rules, common tasks |
 98: 
 99: These are the two most important files. Everything else extends them.
100: 
101: ---
102: 
103: ### `.claude/` ‚Äî Claude Code exclusive
104: 
105: ```text
106: .claude/
107: ‚îú‚îÄ‚îÄ rules/                    ‚Üê Path-scoped: auto-loaded based on file type
108: ‚îÇ   ‚îú‚îÄ‚îÄ coding-standards.md   ‚Üê Applied to all files
109: ‚îÇ   ‚îî‚îÄ‚îÄ markdown-quality.md   ‚Üê Applied to *.md files
110: ‚îú‚îÄ‚îÄ agents/
111: ‚îÇ   ‚îî‚îÄ‚îÄ qa-reviewer.md        ‚Üê Subagent definition for code review dispatch
112: ‚îî‚îÄ‚îÄ skills/                   ‚Üê Claude skill library
113:     ‚îî‚îÄ‚îÄ <skill-name>/
114:         ‚îî‚îÄ‚îÄ SKILL.md
115: ```
116: 
117: **Why path-scoped rules?** Claude Code supports loading different rules for different file types. `markdown-quality.md` only fires when Claude is editing `.md` files ‚Äî it doesn't pollute the context window when editing Python or TypeScript. This keeps per-file context tight and relevant.
118: 
119: **Why a subagent?** The `qa-reviewer` subagent allows the `/requesting-code-review` skill to dispatch a separate Claude instance focused only on review ‚Äî with no memory of the implementation decisions that led to the code. This mimics how real peer review works: fresh eyes.
120: 
121: ---
122: 
123: ### `.github/` ‚Äî GitHub Copilot exclusive
124: 
125: ```text
126: .github/
127: ‚îú‚îÄ‚îÄ copilot-instructions.md   ‚Üê Persistent instructions for every Copilot Chat session
128: ‚îú‚îÄ‚îÄ prompts/
129: ‚îÇ   ‚îú‚îÄ‚îÄ new-feature.prompt.md     ‚Üê /new-feature command
130: ‚îÇ   ‚îî‚îÄ‚îÄ review-changes.prompt.md  ‚Üê /review-changes command
131: ‚îú‚îÄ‚îÄ instructions/
132: ‚îÇ   ‚îú‚îÄ‚îÄ docs.instructions.md      ‚Üê Scoped to docs/**/*.md
133: ‚îÇ   ‚îî‚îÄ‚îÄ qa-audit.instructions.md  ‚Üê Scoped to audit output files
134: ‚îú‚îÄ‚îÄ ISSUE_TEMPLATE/
135: ‚îî‚îÄ‚îÄ pull_request_template.md
136: ```
137: 
138: **Why separate from AGENTS.md?** Copilot reads both, but `copilot-instructions.md` supports Copilot-specific features (prompt files, scoped instructions) that other agents don't understand. The content that matters for all agents lives in `AGENTS.md`; Copilot-specific features live here.
139: 
140: ---
141: 
142: ### `.agents/` ‚Äî Universal skill directory
143: 
144: ```text
145: .agents/
146: ‚îî‚îÄ‚îÄ skills/            ‚Üê Works with: Copilot, Codex, Cursor, Kilo Code
147:     ‚îî‚îÄ‚îÄ <skill-name>/
148:         ‚îî‚îÄ‚îÄ SKILL.md
149: ```
150: 
151: This directory follows the [Agent Skills Open Standard](https://agentskills.io/) ‚Äî an open format for reusable AI skills that works across tools. It's the "universal" skill installation path.
152: 
153: ---
154: 
155: ### `.agent/` ‚Äî Antigravity / Gemini exclusive
156: 
157: ```text
158: .agent/
159: ‚îú‚îÄ‚îÄ rules/             ‚Üê Always-on coding standards (Antigravity)
160: ‚îú‚îÄ‚îÄ workflows/         ‚Üê Reusable task procedures
161: ‚îú‚îÄ‚îÄ skills/            ‚Üê Antigravity skill library (same skills, Antigravity path)
162: ‚îî‚îÄ‚îÄ scripts/           ‚Üê Jules API helpers, PR automation scripts
163: ```
164: 
165: **Why does `.agent/` duplicate `.agents/`?** Antigravity uses `.agent/` as its skill path; most other tools use `.agents/`. The content of the skill files is identical ‚Äî the duplication is purely a path-compatibility requirement. The `/skill-creator` skill includes commands to keep them in sync.
166: 
167: **Why are workflows separate from skills?** Workflows are linear procedures ‚Äî "do step 1, then step 2, then step 3." Skills are more flexible: they provide guidance and let the agent adapt. Complex multi-step tasks like feature delivery or release readiness benefit from explicit procedural workflows. Simpler exploratory tasks like brainstorming or debugging benefit from skill-based guidance.
168: 
169: ---
170: 
171: ### `.kilocode/` ‚Äî Kilo Code exclusive
172: 
173: ```text
174: .kilocode/
175: ‚îî‚îÄ‚îÄ rules/
176:     ‚îî‚îÄ‚îÄ coding-standards.md   ‚Üê Priority 2 ‚Äî overrides AGENTS.md
177: ```
178: 
179: Kilo Code uses a priority system: `.kilocode/rules/` loads at priority 2, above `AGENTS.md` (priority 3). This means project-specific Kilo rules can override the universal AGENTS.md context when they conflict.
180: 
181: ---
182: 
183: ## The `[FILL: ...]` Convention
184: 
185: Every project-specific value in this template is marked `[FILL: description]`. This serves three purposes:
186: 
187: 1. **Discoverability** ‚Äî `grep -rn "\[FILL:" .` finds every unset value instantly
188: 2. **Safety** ‚Äî `[FILL:]` markers are inert strings that won't accidentally trigger agent behavior
189: 3. **Documentation** ‚Äî the marker text explains *what* should go there, not just that something is missing
190: 
191: After setup, no `[FILL:]` markers should remain.
192: 
193: ---
194: 
195: ## The Skills-as-Code Philosophy
196: 
197: Complex engineering processes ‚Äî audits, feature delivery, debugging workflows ‚Äî are easy to describe in English but hard for agents to execute consistently without structure.
198: 
199: Skills codify these processes as invocable, version-controlled procedures. Benefits:
200: 
201: - **Repeatability** ‚Äî the same workflow every time, not whatever the agent improvises
202: - **Reviewability** ‚Äî workflows live in git, can be code-reviewed and improved
203: - **Evolution** ‚Äî as you learn what works for your project, you improve the skill
204: - **Portability** ‚Äî skills follow the Agent Skills Open Standard and work across agents
205: 
206: The separation between "universal" skills (brainstorming, debugging) and "project-specific" skills (qa-audit, feature-delivery) reflects a real engineering distinction: some workflows are universally applicable, others need project context to be useful.
207: 
208: ---
209: 
210: ## Documentation Drift Prevention
211: 
212: A template that documents best practices while drifting from its own state is worse than no documentation ‚Äî it actively misleads agents.
213: 
214: The architecture addresses drift at three levels:
215: 
216: 1. **`[FILL:]` markers** ‚Äî unfilled values are visible and grep-able
217: 2. **`/doc-audit` skill** ‚Äî actively scans for inconsistencies between docs and code
218: 3. **`/release-readiness` skill** ‚Äî enforces doc-sync as a release gate
219: 
220: ---
221: 
222: ## What This Template Does NOT Include
223: 
224: Intentional omissions:
225: 
226: | Not included | Why |
227: | --- | --- |
228: | Build system / bundler | Template is framework-agnostic |
229: | CI/CD pipeline | Highly project-specific; add your own `.github/workflows/` |
230: | Test framework config | Depends on your stack |
231: | `package.json` / `requirements.txt` | No runtime dependencies ‚Äî agent config files only |
232: | Pre-filled `CHANGELOG.md` | Your project's changelog belongs in your project |
233: 
234: The template is a **starting point**, not a complete application. Add project-specific infrastructure on top of it.
</file>

<file path="docs/CUSTOMIZATION-GUIDE.md">
  1: # Customization Guide
  2: 
  3: > How to turn this template into a fully configured AI coding setup for your specific project.
  4: > Time required: 15‚Äì30 minutes for a typical project.
  5: 
  6: ## Overview
  7: 
  8: Every customization point in this template is marked with a `[FILL: ...]` placeholder. The goal is to replace every placeholder with real project content ‚Äî and delete sections that don't apply.
  9: 
 10: ```mermaid
 11: flowchart LR
 12:     A(["1. Clone\ntemplate"]) --> B(["2. Find all\nplaceholders"])
 13:     B --> C(["3. Fill core files\nCLAUDE.md ¬∑ AGENTS.md"])
 14:     C --> D(["4. Fill rules\n& config files"])
 15:     D --> E(["5. Delete\nunused sections"])
 16:     E --> F(["6. Activate\ngit hooks"])
 17:     F --> G(["‚úÖ Validate:\nno FILL: remain"])
 18: ```
 19: 
 20: ```bash
 21: # Find all placeholders in one command:
 22: grep -rn "\[FILL:" . --include="*.md" | grep -v node_modules
 23: ```
 24: 
 25: ---
 26: 
 27: ## File-by-File Guide
 28: 
 29: ### 1. `CLAUDE.md` ‚Äî Claude Code instructions
 30: 
 31: This is the primary context file for Claude Code. It's loaded on every conversation.
 32: 
 33: **What to fill:**
 34: 
 35: ```markdown
 36: ## Project
 37: 
 38: [FILL: Project name] ‚Äî [FILL: 1-sentence description].
 39: ```
 40: 
 41: **Good example:**
 42: 
 43: ```markdown
 44: ## Project
 45: 
 46: Inventory API ‚Äî A REST API for warehouse stock management. TypeScript, Express, PostgreSQL.
 47: ```
 48: 
 49: **Bad example (too vague):**
 50: 
 51: ```markdown
 52: ## Project
 53: 
 54: My app ‚Äî A web application.
 55: ```
 56: 
 57: **Critical Constraints section** ‚Äî This is where you encode things Claude cannot infer from reading the code:
 58: 
 59: | Good constraint | Bad constraint |
 60: | --- | --- |
 61: | "No runtime npm dependencies ‚Äî stdlib only" | "Write good code" |
 62: | "All DB queries must go through `src/db/query.ts`" | "Use the database correctly" |
 63: | "Never modify `schema.sql` directly ‚Äî use migrations" | "Be careful with the database" |
 64: 
 65: **Do NOT section** ‚Äî Hard prohibitions. Be specific:
 66: 
 67: ```markdown
 68: ## Do NOT
 69: 
 70: - Use `eval()` or `Function()` constructor anywhere
 71: - Commit directly to `main` ‚Äî always use a PR
 72: - Add fields to the User table without a migration
 73: ```
 74: 
 75: **After Every Change** ‚Äî Fill in your real test command:
 76: 
 77: ```markdown
 78: ## After Every Change
 79: 
 80: 1. Run `npm test`
 81: 2. Run `npm run lint`
 82: 3. Commit via `git commit` with format `type(scope): description`
 83: ```
 84: 
 85: ---
 86: 
 87: ### 2. `AGENTS.md` ‚Äî Universal context for all other agents
 88: 
 89: This file is read by Jules (natively), Cursor, OpenAI Codex, Kilo Code, and GitHub Copilot. Keep it factual and architectural ‚Äî not a list of preferences.
 90: 
 91: **Project Overview** ‚Äî Be concrete:
 92: 
 93: ```markdown
 94: ## Project Overview
 95: 
 96: **Inventory API** ‚Äî REST API for real-time warehouse stock management.
 97: Used by warehouse staff via a React dashboard and by third-party logistics providers via API.
 98: ```
 99: 
100: **Architecture section** ‚Äî Only include constraints agents cannot infer from code:
101: 
102: ```markdown
103: ## Architecture (Must-Know)
104: 
105: - **No ORM** ‚Äî All DB access via raw SQL in `src/db/`. Never use Prisma or Sequelize.
106: - **Config-driven feature flags** ‚Äî All feature toggles in `config/features.ts`, never inline conditionals.
107: - **Read replicas** ‚Äî SELECT queries must use `db.replica`, writes use `db.primary`.
108: ```
109: 
110: **File Structure** ‚Äî Only include files/folders agents need to know to navigate effectively. Skip obvious ones:
111: 
112: ```markdown
113: ## File Structure
114: 
115: src/
116:   api/routes/        ‚Üê Route handlers (thin ‚Äî delegate to services)
117:   services/          ‚Üê Business logic (thick)
118:   db/                ‚Üê All DB queries (raw SQL, no ORM)
119:   config/
120:     features.ts      ‚Üê Feature flags (READ BEFORE adding conditionals)
121: 
122: migrations/          ‚Üê Database migrations (run via: npm run migrate)
123: tests/
124:   unit/              ‚Üê Fast, no DB
125:   integration/       ‚Üê Requires DB (use: npm run test:integration)
126: ```
127: 
128: **Immutable Contract section** ‚Äî If you have IDs, API versions, or stored values that can never change:
129: 
130: ```markdown
131: ## Immutable Contract ‚Äî NEVER CHANGE
132: 
133: - `SCHEMA_VERSION=4` ‚Äî written to all stored records, changing breaks existing data
134: - Route `/api/v1/` ‚Äî used by third-party integrations, must never be removed
135: ```
136: 
137: If you have nothing immutable: **delete this section entirely**.
138: 
139: ---
140: 
141: ### 3. `.github/copilot-instructions.md` ‚Äî GitHub Copilot
142: 
143: This is loaded for every Copilot Chat conversation in VS Code. Keep it focused on rules, not prose:
144: 
145: ```markdown
146: ## Always Do
147: 
148: - Use the `Result<T, E>` type for all error-returning functions
149: - Add JSDoc to all exported functions
150: - Use `src/db/query.ts` for all database access
151: 
152: ## Never Do
153: 
154: - Use `any` type in TypeScript
155: - Write business logic in route handlers
156: - Import directly from `node_modules` internals
157: ```
158: 
159: ---
160: 
161: ### 4. `.claude/rules/coding-standards.md` ‚Äî Claude path-scoped rules
162: 
163: This file is auto-loaded by Claude Code for **all files**. Add your stack-specific conventions:
164: 
165: ```markdown
166: ## TypeScript Conventions
167: 
168: - Prefer `interface` over `type` for object shapes
169: - Use `readonly` arrays where mutation is not needed
170: - Explicit return types on all exported functions
171: 
172: ## Testing Conventions
173: 
174: - Test file naming: `*.test.ts` co-located with source
175: - Mock DB via `tests/helpers/db-mock.ts`, never the real DB in unit tests
176: ```
177: 
178: ---
179: 
180: ### 5. `.agent/rules/coding-standards.md` ‚Äî Gemini/Antigravity rules
181: 
182: Same content as `.claude/rules/coding-standards.md` ‚Äî keep them in sync. This file is read by Google Antigravity.
183: 
184: ---
185: 
186: ### 6. `.kilocode/rules/coding-standards.md` ‚Äî Kilo Code rules
187: 
188: Kilo Code loads this at priority 2 (higher than `AGENTS.md`). Use it for rules you want to override AGENTS.md:
189: 
190: ```markdown
191: ## Kilo Code Specifics
192: 
193: - Always prefer Kilo's inline diffs for reviews
194: - Run `npm test` before confirming any code change
195: ```
196: 
197: ---
198: 
199: ### 7. Git hooks (`.githooks/`)
200: 
201: The pre-commit and commit-msg hooks are already wired. Activate them once:
202: 
203: ```bash
204: git config core.hooksPath .githooks
205: chmod +x .githooks/pre-commit .githooks/commit-msg
206: ```
207: 
208: Customize the pre-commit checks for your project by editing `.githooks/pre-commit`.
209: 
210: ---
211: 
212: ## Sections to Delete
213: 
214: These sections exist in the template for projects that need them. **Delete them if they don't apply to yours** ‚Äî dead instructions confuse agents:
215: 
216: | Section | Delete if... |
217: | --- | --- |
218: | `## Immutable Contract` in AGENTS.md | No IDs or versions are externally bound |
219: | `## Layout Constraints` | Not a UI/mobile project |
220: | `## Provider-specific` language rules | Not a multi-language/multi-locale project |
221: | `## Database` patterns | No database in project |
222: 
223: ---
224: 
225: ## Validation Checklist
226: 
227: After filling in all placeholders, run through this:
228: 
229: ```bash
230: # 1. No unfilled placeholders remain
231: grep -rn "\[FILL:" . --include="*.md" | grep -v node_modules
232: 
233: # 2. All placeholder files are committed
234: git status
235: 
236: # 3. Git hooks are active
237: git config core.hooksPath
238: # Should output: .githooks
239: ```
240: 
241: And manually verify:
242: - [ ] `CLAUDE.md` describes your actual project, not the template
243: - [ ] `AGENTS.md` architecture section is accurate for your codebase
244: - [ ] Test command in "After Every Change" actually runs and passes
245: - [ ] `Immutable Contract` section either has real values or is deleted
246: - [ ] `.env` is in `.gitignore` (it is by default ‚Äî don't remove it)
</file>

<file path="docs/SKILLS-CATALOG.md">
  1: # Skills Catalog
  2: 
  3: > All pre-built skills included in this template ‚Äî what they do, how to invoke them, and which agents support them.
  4: 
  5: ## How Skills Work
  6: 
  7: Skills are invocable AI workflows. You call them by name in your agent's chat interface and the agent follows the skill's procedure ‚Äî no extra setup required.
  8: 
  9: **Not sure which skill to use?**
 10: 
 11: ```mermaid
 12: flowchart TD
 13:     Start(["What are you doing?"])
 14: 
 15:     Start --> Q1{"Exploring an idea\nor new feature?"}
 16:     Q1 -->|Yes| Brainstorm["/brainstorming"]
 17:     Q1 -->|No| Q2{"Hit a bug or\nunexpected behavior?"}
 18:     Q2 -->|Yes| Debug["/systematic-debugging"]
 19:     Q2 -->|No| Q3{"Got requirements,\nneed a plan?"}
 20:     Q3 -->|Yes| Plan["/writing-plans"]
 21:     Q3 -->|No| Q4{"Building\nUI / frontend?"}
 22:     Q4 -->|Yes| FE["/frontend-design"]
 23:     Q4 -->|No| Q5{"Task complete ‚Äî\nready to review?"}
 24:     Q5 -->|Code review| Review["/requesting-code-review"]
 25:     Q5 -->|Feature done| Delivery["/feature-delivery"]
 26:     Q5 -->|Urgent fix| Hotfix["/hotfix"]
 27:     Q5 -->|Pre-release| Release["/release-readiness"]
 28:     Q5 -->|Docs drifting?| DocAudit["/doc-audit"]
 29:     Q5 -->|Security check| QA["/qa-audit"]
 30: ```
 31: 
 32: | Agent | How to invoke |
 33: | --- | --- |
 34: | **Claude Code** | `/skill-name` in chat |
 35: | **GitHub Copilot** | `@workspace /skill-name` or reference in prompt |
 36: | **Cursor** | Mention skill name in chat |
 37: | **Kilo Code** | `/skill-name` in chat |
 38: | **Antigravity / Gemini** | Mention skill name; agent auto-discovers from `.agent/skills/` |
 39: 
 40: Skills live in three parallel directories (same content, different paths for agent compatibility):
 41: 
 42: - `.claude/skills/` ‚Äî Claude Code
 43: - `.agents/skills/` ‚Äî Universal (Copilot, Codex, Cursor, Kilo Code)
 44: - `.agent/skills/` ‚Äî Antigravity / Gemini
 45: 
 46: ### Source legend
 47: 
 48: Each skill entry is tagged with its origin:
 49: 
 50: | Tag | Source |
 51: | --- | --- |
 52: | `[obra/superpowers]` | [github.com/obra/superpowers](https://github.com/obra/superpowers) ‚Äî by Jesse Vincent (@obra) |
 53: | `[skills.sh]` | [skills.sh](https://skills.sh) marketplace ‚Äî third-party verified skill |
 54: | `[this template]` | Created for this template ‚Äî contains `[FILL:]` markers for your project |
 55: 
 56: ---
 57: 
 58: ### Installing skills from skills.sh
 59: 
 60: Browse skills at **[skills.sh](https://skills.sh)**, then install in three steps:
 61: 
 62: **1. Find the skill URL** on skills.sh (each skill has a raw SKILL.md link).
 63: 
 64: **2. Install into all three directories:**
 65: 
 66: ```bash
 67: SKILL=my-skill-name
 68: SKILL_URL=https://skills.sh/skills/my-skill-name/SKILL.md
 69: 
 70: mkdir -p .claude/skills/$SKILL .agents/skills/$SKILL .agent/skills/$SKILL
 71: curl -sL "$SKILL_URL" -o .claude/skills/$SKILL/SKILL.md
 72: cp .claude/skills/$SKILL/SKILL.md .agents/skills/$SKILL/SKILL.md
 73: cp .claude/skills/$SKILL/SKILL.md .agent/skills/$SKILL/SKILL.md
 74: ```
 75: 
 76: **3. Verify:**
 77: 
 78: ```bash
 79: ls .claude/skills/$SKILL/SKILL.md   # should exist
 80: ```
 81: 
 82: The skill is immediately available ‚Äî no restart needed. Invoke it in your agent with `/my-skill-name`.
 83: 
 84: **Installing the full obra/superpowers suite** (recommended):
 85: 
 86: ```bash
 87: git clone https://github.com/obra/superpowers /tmp/superpowers
 88: for dir in .claude/skills .agents/skills .agent/skills; do
 89:   cp -r /tmp/superpowers/skills/* "$dir/"
 90: done
 91: ```
 92: 
 93: ---
 94: 
 95: ## Universal Skills
 96: 
 97: These skills need no project customization. Use them as-is.
 98: 
 99: ---
100: 
101: ### `brainstorming` `[this template]`
102: 
103: **Use before any creative work** ‚Äî features, components, UI changes, new functionality.
104: 
105: Explores user intent, design constraints, and edge cases through structured dialogue before writing a single line of code. Prevents building the wrong thing.
106: 
107: | | |
108: | --- | --- |
109: | **Invoke** | `/brainstorming` |
110: | **When** | Before implementing anything non-trivial |
111: | **When NOT** | For trivial one-liner fixes or purely mechanical tasks |
112: | **Needs `[FILL:]`** | No |
113: | **Agents** | All |
114: 
115: ---
116: 
117: ### `systematic-debugging` `[obra/superpowers]`
118: 
119: **Use before proposing any fix** to a bug, test failure, or unexpected behavior.
120: 
121: Enforces root-cause tracing instead of guessing. Follows a structured investigation: reproduce ‚Üí isolate ‚Üí hypothesize ‚Üí verify ‚Üí fix. Resists pressure to jump to conclusions.
122: 
123: | | |
124: | --- | --- |
125: | **Invoke** | `/systematic-debugging` |
126: | **When** | Any bug, failing test, or "why is this broken?" question |
127: | **When NOT** | When you already know the root cause with certainty |
128: | **Needs `[FILL:]`** | No |
129: | **Agents** | All |
130: 
131: ---
132: 
133: ### `writing-plans` `[this template]`
134: 
135: **Use when you have requirements** for a multi-step task, before touching code.
136: 
137: Produces a detailed implementation plan: which files to touch, in what order, how to test each step, and what to verify. Generates bite-sized tasks. Assumes zero context from the engineer reading it.
138: 
139: | | |
140: | --- | --- |
141: | **Invoke** | `/writing-plans` |
142: | **When** | Before starting any multi-step feature or refactor |
143: | **When NOT** | Single-file changes that fit in one prompt |
144: | **Needs `[FILL:]`** | No |
145: | **Agents** | All |
146: 
147: ---
148: 
149: ### `requesting-code-review` `[this template]`
150: 
151: **Use after completing a task** or before merging, to catch issues early.
152: 
153: Dispatches a `qa-reviewer` subagent (Claude) that reviews your changes against the project's rules and surfaces violations before they become problems.
154: 
155: | | |
156: | --- | --- |
157: | **Invoke** | `/requesting-code-review` |
158: | **When** | After implementing a feature, before creating a PR |
159: | **When NOT** | During development ‚Äî wait until a logical checkpoint |
160: | **Needs `[FILL:]`** | No |
161: | **Agents** | Claude Code (subagent dispatch), others (inline review) |
162: 
163: ---
164: 
165: ### `skill-creator` `[skills.sh]`
166: 
167: **Use when you want to add a new skill** to the library or update an existing one.
168: 
169: Guides you through the skill format, frontmatter conventions, workflow structure patterns, and cross-agent compatibility requirements.
170: 
171: | | |
172: | --- | --- |
173: | **Invoke** | `/skill-creator` |
174: | **When** | Creating or updating a skill |
175: | **When NOT** | When editing regular project files |
176: | **Needs `[FILL:]`** | No |
177: | **Agents** | All |
178: 
179: ---
180: 
181: ### `find-skills` `[obra/superpowers]`
182: 
183: **Use when you want to discover skills** from the open agent skills ecosystem.
184: 
185: Helps you find skills that might exist for your task ‚Äî both in this repo and from the broader community. Covers installation and integration.
186: 
187: | | |
188: | --- | --- |
189: | **Invoke** | `/find-skills` |
190: | **When** | "Is there a skill for X?", "How do I do Y with an agent?" |
191: | **When NOT** | When you know exactly what you need |
192: | **Needs `[FILL:]`** | No |
193: | **Agents** | All |
194: 
195: ---
196: 
197: ### `using-superpowers` `[obra/superpowers]`
198: 
199: **Meta-skill** ‚Äî establishes the rule that skills must be invoked before responding to any request where they apply. Activates at conversation start to prime the agent.
200: 
201: | | |
202: | --- | --- |
203: | **Invoke** | `/using-superpowers` (or load at start of session) |
204: | **When** | Start of any session where you want maximum skill usage |
205: | **Needs `[FILL:]`** | No |
206: | **Agents** | All |
207: 
208: ---
209: 
210: ### `frontend-design` `[skills.sh]`
211: 
212: **Use when building UI** ‚Äî web components, pages, dashboards, HTML/CSS layouts, React components.
213: 
214: Generates production-grade frontend code with strong aesthetic judgment. Deliberately avoids generic "AI slop" patterns. Prioritizes visual distinctiveness and working code over boilerplate.
215: 
216: | | |
217: | --- | --- |
218: | **Invoke** | `/frontend-design` |
219: | **When** | Any UI/frontend task |
220: | **When NOT** | Backend, config, or infrastructure tasks |
221: | **Needs `[FILL:]`** | No |
222: | **Agents** | All |
223: 
224: ---
225: 
226: ### `jules-tasks` `[this template]`
227: 
228: **Use to audit and manage Jules AI sessions.**
229: 
230: Lists active Jules sessions, reviews their status, and helps batch-manage tasks delegated to Jules.
231: 
232: | | |
233: | --- | --- |
234: | **Invoke** | `/jules-tasks` |
235: | **When** | Reviewing Jules batch work, checking session status |
236: | **Needs `[FILL:]`** | Requires `JULES_API_KEY` in `.env` |
237: | **Agents** | Claude Code, Antigravity |
238: 
239: ---
240: 
241: ## Project-Specific Skills `[this template]`
242: 
243: These skills contain `[FILL:]` markers. Fill them in for your project before using.
244: 
245: ---
246: 
247: ### `qa-audit` `[this template]`
248: 
249: **9-phase security and robustness audit** of your codebase.
250: 
251: Covers: XSS/injection scanning, rule compliance verification, race condition analysis, config schema validation, and documentation drift detection. Produces a severity-classified report (Critical / High / Medium / Low).
252: 
253: | | |
254: | --- | --- |
255: | **Invoke** | `/qa-audit` |
256: | **When** | Before releases, after large refactors, when reviewing security posture |
257: | **Needs `[FILL:]`** | Yes ‚Äî project-specific scan patterns in SKILL.md |
258: | **Agents** | All (`allowed-tools` restricted to read/grep for safety) |
259: 
260: ---
261: 
262: ### `doc-audit` `[this template]`
263: 
264: **8-phase documentation drift audit** across all docs, agent instructions, and config files.
265: 
266: Checks that every count, path, file reference, and config field in documentation matches the actual codebase. Surfaces stale docs, broken links, and inconsistencies.
267: 
268: | | |
269: | --- | --- |
270: | **Invoke** | `/doc-audit` |
271: | **When** | After adding/removing files, before releases, when docs feel out of date |
272: | **Needs `[FILL:]`** | Yes ‚Äî file paths and expected counts for your project |
273: | **Agents** | All (`disable-model-invocation: true` ‚Äî deterministic scan only) |
274: 
275: ---
276: 
277: ### `feature-delivery` `[this template]`
278: 
279: **End-to-end feature workflow**: planning ‚Üí implementation ‚Üí QA ‚Üí docs sync.
280: 
281: Follows `.agent/workflows/feature-delivery.md` strictly. Ensures every feature goes through the full delivery checklist: design, implementation, tests, documentation update, and review.
282: 
283: | | |
284: | --- | --- |
285: | **Invoke** | `/feature-delivery` |
286: | **When** | Delivering a new feature or larger enhancement |
287: | **When NOT** | Small bug fixes (use `/hotfix` instead) |
288: | **Needs `[FILL:]`** | Yes ‚Äî workflow file has project-specific steps |
289: | **Agents** | All |
290: 
291: ---
292: 
293: ### `hotfix` `[this template]`
294: 
295: **Fast but controlled workflow for urgent production fixes.**
296: 
297: Prioritizes speed while maintaining safety: targeted scope, mandatory test verification, no scope creep. Follows `.agent/workflows/hotfix.md`.
298: 
299: | | |
300: | --- | --- |
301: | **Invoke** | `/hotfix` |
302: | **When** | Critical bug in production that needs an immediate fix |
303: | **When NOT** | Non-urgent issues ‚Äî use `/feature-delivery` |
304: | **Needs `[FILL:]`** | Yes ‚Äî deployment/rollback steps in workflow file |
305: | **Agents** | All |
306: 
307: ---
308: 
309: ### `release-readiness` `[this template]`
310: 
311: **Pre-release quality gate**: functional checks, baseline validation, documentation integrity.
312: 
313: Runs through a checklist of everything that must be true before tagging a release: tests pass, docs are synced, no outstanding `[FILL:]` markers, CHANGELOG is updated.
314: 
315: | | |
316: | --- | --- |
317: | **Invoke** | `/release-readiness` |
318: | **When** | Before publishing a new version or tagging a release |
319: | **Needs `[FILL:]`** | Yes ‚Äî release checklist items for your project |
320: | **Agents** | All |
321: 
322: ---
323: 
324: ### `architecture-change` `[this template]`
325: 
326: **Controlled workflow for structural/architectural changes** with mandatory ADR.
327: 
328: Requires writing an Architecture Decision Record (ADR) before implementing. Enforces controlled rollout, documentation update, and risk assessment.
329: 
330: | | |
331: | --- | --- |
332: | **Invoke** | `/architecture-change` |
333: | **When** | Any change that affects the system's structure, data flow, or core dependencies |
334: | **When NOT** | Feature additions that don't change architecture |
335: | **Needs `[FILL:]`** | Yes ‚Äî ADR template and review process in workflow file |
336: | **Agents** | All |
337: 
338: ---
339: 
340: ## Prompt Files (GitHub Copilot)
341: These are Copilot-specific prompt files triggered with `/command` in VS Code Copilot Chat:
342: 
343: | Prompt | Invoke | What it does |
344: | --- | --- | --- |
345: | `new-feature.prompt.md` | `/new-feature` | Structured feature planning ‚Äî explores requirements before implementation |
346: | `review-changes.prompt.md` | `/review-changes` | Pre-commit rule compliance check ‚Äî catches violations before committing |
347: 
348: Prompt files live in `.github/prompts/`.
349: 
350: ---
351: 
352: ## Adding New Skills
353: 
354: Use the `/skill-creator` skill to guide creation. The format is:
355: 
356: ```text
357: .claude/skills/my-skill/
358:     SKILL.md          ‚Üê Required: frontmatter + instructions
359:     references/       ‚Üê Optional: supporting docs
360: ```
361: 
362: Copy to all three skill directories to make it available across agents:
363: 
364: ```bash
365: cp -r .claude/skills/my-skill .agents/skills/my-skill
366: cp -r .claude/skills/my-skill .agent/skills/my-skill
367: ```
368: 
369: ---
370: 
371: ## Skills Ecosystem ‚Äî Discover More
372: 
373: The skills in this template are a starting point. The broader ecosystem has hundreds more.
374: 
375: ### Where to find skills
376: 
377: | Resource | What's there |
378: | --- | --- |
379: | [skills.sh](https://skills.sh) | Public marketplace ‚Äî browse, install, and publish skills |
380: | [github.com/obra/superpowers](https://github.com/obra/superpowers) | The original superpowers suite by Jesse Vincent ‚Äî `using-superpowers`, `find-skills`, `systematic-debugging`, and more |
381: | [github.com/google-labs-code/jules-awesome-list](https://github.com/google-labs-code/jules-awesome-list) | Curated Jules prompts and workflows |
382: 
383: ### Installing a skill from skills.sh
384: 
385: ```bash
386: # Install via the skills CLI (if available)
387: skills install <skill-name>
388: 
389: # Or manually: copy SKILL.md into the correct directory
390: mkdir -p .claude/skills/<skill-name>
391: curl -o .claude/skills/<skill-name>/SKILL.md <skill-url>
392: 
393: # Then mirror to the other skill directories
394: cp -r .claude/skills/<skill-name> .agents/skills/<skill-name>
395: cp -r .claude/skills/<skill-name> .agent/skills/<skill-name>
396: ```
397: 
398: ### Installing obra/superpowers
399: 
400: The complete superpowers suite (including skills not in this template):
401: 
402: ```bash
403: # Clone and copy all superpowers skills
404: git clone https://github.com/obra/superpowers /tmp/superpowers
405: cp -r /tmp/superpowers/skills/* .claude/skills/
406: cp -r /tmp/superpowers/skills/* .agents/skills/
407: cp -r /tmp/superpowers/skills/* .agent/skills/
408: ```
409: 
410: ### Attribution when adding external skills
411: 
412: When adding community skills, update this catalog with the source tag so it's clear what came from where. The `[FILL:]` marker convention only applies to skills created for *this* template ‚Äî external skills should be used as-is and updated by pulling from their upstream repo.
</file>

<file path="LICENSE">
 1: MIT License
 2: 
 3: Copyright (c) 2026 Florian Grimmer
 4: 
 5: Permission is hereby granted, free of charge, to any person obtaining a copy
 6: of this software and associated documentation files (the "Software"), to deal
 7: in the Software without restriction, including without limitation the rights
 8: to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 9: copies of the Software, and to permit persons to whom the Software is
10: furnished to do so, subject to the following conditions:
11: 
12: The above copyright notice and this permission notice shall be included in all
13: copies or substantial portions of the Software.
14: 
15: THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
16: IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
17: FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
18: AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
19: LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
20: OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
21: SOFTWARE.
</file>

<file path=".agent/scripts/analyze_pr.sh">
 1: #!/bin/bash
 2: set -euo pipefail
 3: PR_NUMBER="$1"
 4: if [ -z "$PR_NUMBER" ]; then
 5:   echo "Usage: $0 <PR_NUMBER>"
 6:   exit 1
 7: fi
 8: echo "üîç Init Paranoid Analysis for PR #$PR_NUMBER..."
 9: # Set up temp directory
10: TMP_DIR=".agent/tmp"
11: mkdir -p "$TMP_DIR"
12: PR_STATUS="$TMP_DIR/pr_${PR_NUMBER}_status.json"
13: PR_DIFF="$TMP_DIR/pr_${PR_NUMBER}.diff"
14: URLS_FILE="$TMP_DIR/pr_${PR_NUMBER}_urls.txt"
15: # 1. Fetch Status (Mergeability)
16: echo "---------------------------------------------------"
17: echo "üì° Fetching PR Status..."
18: gh pr view "$PR_NUMBER" --json state,mergeable,baseRefName,headRefName,title > "$PR_STATUS"
19: jq '{state, mergeable, title}' "$PR_STATUS"
20: MERGEABLE=$(jq -r .mergeable "$PR_STATUS")
21: if [ "$MERGEABLE" = "CONFLICTING" ]; then
22:   echo "‚ùå CRITICAL: PR is CONFLICTING. Rebase required."
23:   echo "Recommendation: STOP audit. Request rebase."
24: fi
25: # 2. Fetch Raw Diff
26: echo "---------------------------------------------------"
27: echo "üì• Fetching Raw Diff..."
28: gh pr diff "$PR_NUMBER" > "$PR_DIFF"
29: echo "Diff saved to $PR_DIFF ($(wc -l < "$PR_DIFF") lines)"
30: # 2.1 Check for Dirty Branch (Commit Hygiene)
31: echo "---------------------------------------------------"
32: echo "üßπ Checking for Dirty Branching..."
33: # Check if PR has > 10 commits (sign of dirty history) or merges from main
34: COMMIT_COUNT=$(gh pr view "$PR_NUMBER" --json commits --jq '.commits | length')
35: if [ "$COMMIT_COUNT" -gt 10 ]; then
36:   echo "‚ö†Ô∏è  WARNING: High commit count ($COMMIT_COUNT). Check for unrelated changes."
37: else
38:   echo "‚úÖ Commit count reasonable ($COMMIT_COUNT)."
39: fi
40: # 3. Enhanced Threat Scan
41: echo "---------------------------------------------------"
42: echo "üõ°Ô∏è Scanning for Architecture Violations & Threats..."
43: # Expanded Red Patterns from workflow to match AGENTS.md rules for this repo
44: RED_PATTERNS="rm |eval |curl |wget |chmod 777|ghp_|ey[A-Za-z0-9]*|password|secret|token|\\<script src=\"http|localStorage|sessionStorage|postMessage"
45: if grep -rnE "$RED_PATTERNS" "$PR_DIFF"; then
46:   echo "‚ùå POTENTIAL THREATS FOUND (See above)"
47: else
48:   echo "‚úÖ No obvious red flags found in diff text."
49: fi
50: # 4. [FILL: Project-specific content scan]
51: # Add regex patterns relevant to your project's conventions.
52: # Example: check for forbidden strings, hardcoded values, or style violations.
53: echo "---------------------------------------------------"
54: echo "üîé Project-specific content scan..."
55: # YOUR_PATTERNS="\\bforbidden\\b|hardcodedValue"
56: # if grep -E '^\+[^+]' "$PR_DIFF" | grep -nE "$YOUR_PATTERNS"; then
57: #   echo "‚ö†Ô∏è  PROJECT-SPECIFIC VIOLATIONS FOUND (See above)"
58: # else
59: #   echo "‚úÖ No project-specific violations found."
60: # fi
61: echo "‚ÑπÔ∏è  No project-specific patterns configured. Add your patterns to section 4."
62: # 5. External Asset Verification (URL Check)
63: echo "---------------------------------------------------"
64: echo "üîó Verifying External URLs..."
65: # Extract URLs and check them (limit to 5 to avoid spam)
66: grep -oE 'https?://[^ ")\`]+' "$PR_DIFF" | head -n 5 | sort | uniq > "$URLS_FILE"
67: if [ -s "$URLS_FILE" ]; then
68:   while read -r url; do
69:     if curl --output /dev/null --silent --head --fail --max-time 5 "$url"; then
70:       echo "‚úÖ URL OK: $url"
71:     else
72:       echo "‚ùå URL BROKEN: $url"
73:     fi
74:   done < "$URLS_FILE"
75: else
76:   echo "‚ÑπÔ∏è  No URLs found to verify."
77: fi
78: # 6. Fetch Gemini AI Insights
79: echo "---------------------------------------------------"
80: echo "ü§ñ Fetching Gemini AI Reviews..."
81: python3 .agent/scripts/fetch_gemini_reviews.py "$PR_NUMBER"
82: GEMINI_REPORT="$TMP_DIR/pr_${PR_NUMBER}_gemini_report.md"
83: if [ -f "$GEMINI_REPORT" ]; then
84:   echo "‚úÖ Gemini insights found and saved to $GEMINI_REPORT"
85:   # Optional: print a snippet
86:   grep -F -A 5 "ü§ñ **Gemini Analysis" "$GEMINI_REPORT" | grep -v -F "ü§ñ **Gemini Analysis" || echo "   (Detailed analysis available in the report file)"
87: else
88:   echo "‚ö™ No Gemini reviews found for this PR."
89: fi
90: echo "---------------------------------------------------"
91: echo "‚ö†Ô∏è  Manual Logic Audit Needed."
92: echo "    1. Read $PR_DIFF"
93: echo "    2. Check for missing hover media queries"
94: echo "    3. Verify documentation matches code changes if applicable"
</file>

<file path=".agent/scripts/jules-api.sh">
  1: #!/usr/bin/env bash
  2: # Jules API Helper Script - COMPLETE COVERAGE
  3: # Usage: jules-api.sh <action> <args...>
  4: #
  5: # Session Actions:
  6: #   create-session <source> <prompt>   Create a new session/task
  7: #   get-session <id>                   Get session details
  8: #   delete-session <id>                Delete a session
  9: #   list-sessions [count]              List recent sessions
 10: #   send-message <id> <msg>            Send message to session
 11: #   approve-plan <id>                  Approve a pending plan
 12: #
 13: # Activity Actions:
 14: #   get-activities <id> [count]        Get session activities
 15: #   get-artifacts <id>                 Get artifacts (diffs, bash output)
 16: #
 17: # Source Actions:
 18: #   list-sources [count]               List connected repositories
 19: #   get-source <source_id>             Get source details
 20: set -euo pipefail
 21: SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
 22: REPO_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"
 23: JULES_KEY_FILE="$REPO_ROOT/.jules_key"
 24: TMP_DIR="$REPO_ROOT/.agent/tmp"
 25: API_BASE="https://jules.googleapis.com/v1alpha"
 26: # Load API key
 27: ENV_FILE="$REPO_ROOT/.env"
 28: if [[ -f "$ENV_FILE" ]]; then
 29:   set -a
 30:   # shellcheck disable=SC1090
 31:   source "$ENV_FILE"
 32:   set +a
 33: fi
 34: if [[ -z "${JULES_API_KEY:-}" ]]; then
 35:   if [[ -f "$JULES_KEY_FILE" ]]; then
 36:     JULES_KEY=$(tr -d '[:space:]' < "$JULES_KEY_FILE")
 37:   else
 38:     echo "‚ùå Error: Jules API key not found in .env (JULES_API_KEY) or at $JULES_KEY_FILE" >&2
 39:     exit 1
 40:   fi
 41: else
 42:   JULES_KEY="$JULES_API_KEY"
 43: fi
 44: # Common curl options
 45: curl_opts=(-s --max-time 60 -H "X-Goog-Api-Key: $JULES_KEY")
 46: usage() {
 47:   echo "Usage: $(basename "$0") <action> [args...]"
 48:   echo ""
 49:   echo "Session Actions:"
 50:   echo "  create-session <source> <prompt> [--auto-pr]  Create a new task"
 51:   echo "  get-session <session_id>                      Get session details"
 52:   echo "  delete-session <session_id>                   Delete a session"
 53:   echo "  list-sessions [count]                         List sessions (default: 10)"
 54:   echo "  send-message <session_id> <message|file>      Send message (string or file path)"
 55:   echo "  approve-plan <session_id>                     Approve pending plan"
 56:   echo ""
 57:   echo "Activity Actions:"
 58:   echo "  get-activities <session_id> [count]           Get activities (default: 5)"
 59:   echo "  get-artifacts <session_id>                    Get diffs/bash output"
 60:   echo ""
 61:   echo "Source Actions:"
 62:   echo "  list-sources [count]                          List connected repos"
 63:   echo "  get-source <source_id>                        Get source details"
 64:   echo ""
 65:   echo "Examples:"
 66:   echo "  $(basename "$0") create-session sources/github/owner/repo 'Fix the bug' --auto-pr"
 67:   echo "  $(basename "$0") get-artifacts 16856078149969131243"
 68:   echo "  $(basename "$0") approve-plan 16856078149969131243"
 69: }
 70: # ============================================================================
 71: # SESSION ACTIONS
 72: # ============================================================================
 73: create_session() {
 74:   local source="$1"
 75:   local prompt="$2"
 76:   local auto_pr="${3:-}"
 77:   mkdir -p "$TMP_DIR"
 78:   local payload_file
 79:   payload_file="$TMP_DIR/jules_create_$(date +%s).json"
 80:   # Build payload
 81:   if [[ "$auto_pr" == "--auto-pr" ]]; then
 82:     jq -n --arg src "$source" --arg p "$prompt" '{
 83:             sourceContext: { source: $src },
 84:             prompt: $p,
 85:             automationMode: "AUTO_CREATE_PR"
 86:         }' > "$payload_file"
 87:   else
 88:     jq -n --arg src "$source" --arg p "$prompt" '{
 89:             sourceContext: { source: $src },
 90:             prompt: $p
 91:         }' > "$payload_file"
 92:   fi
 93:   local response
 94:   response=$(curl "${curl_opts[@]}" -X POST \
 95:     -H "Content-Type: application/json" \
 96:     -d "@$payload_file" \
 97:     "$API_BASE/sessions")
 98:   rm -f "$payload_file"
 99:   # Extract session ID from response
100:   local session_id
101:   session_id=$(echo "$response" | jq -r '.name // empty')
102:   if [[ -n "$session_id" ]]; then
103:     echo "‚úÖ Session created: $session_id"
104:     echo "$response" | jq '{name, state, title}'
105:   else
106:     echo "Response: $response"
107:   fi
108: }
109: get_session() {
110:   local session_id="$1"
111:   curl "${curl_opts[@]}" "$API_BASE/sessions/$session_id" | jq '{
112:         state,
113:         title,
114:         prompt: .prompt[:500],
115:         automationMode,
116:         requirePlanApproval,
117:         output: {
118:             pullRequest: .output.pullRequest.url
119:         }
120:     }'
121: }
122: delete_session() {
123:   local session_id="$1"
124:   local response
125:   response=$(curl "${curl_opts[@]}" -X DELETE "$API_BASE/sessions/$session_id")
126:   if [[ "$response" == "{}" ]]; then
127:     echo "‚úÖ Session $session_id deleted successfully"
128:   else
129:     echo "Response: $response"
130:   fi
131: }
132: list_sessions() {
133:   local count="${1:-10}"
134:   curl "${curl_opts[@]}" "$API_BASE/sessions?pageSize=$count" \
135:     | jq '.sessions[] | {id: .name, state, title, created: .createTime}'
136: }
137: send_message() {
138:   local session_id="$1"
139:   local message="$2"
140:   # Support reading message from file if argument is a valid file path
141:   if [[ -f "$message" ]]; then
142:     message=$(cat "$message")
143:   fi
144:   # Pre-check: Verify session is active
145:   local state
146:   state=$(curl "${curl_opts[@]}" "$API_BASE/sessions/$session_id" | jq -r '.state')
147:   if [[ "$state" == "COMPLETED" || "$state" == "FAILED" ]]; then
148:     echo "‚ö†Ô∏è  WARNING: Session is $state. Attempting to send message anyway (API may hang/timeout)..." >&2
149:   fi
150:   mkdir -p "$TMP_DIR"
151:   local payload_file
152:   payload_file="$TMP_DIR/jules_message_$(date +%s).json"
153:   jq -n --arg msg "$message" '{"prompt": $msg}' > "$payload_file"
154:   local response
155:   response=$(curl "${curl_opts[@]}" -X POST \
156:     -H "Content-Type: application/json" \
157:     -d "@$payload_file" \
158:     "$API_BASE/sessions/$session_id:sendMessage")
159:   rm -f "$payload_file"
160:   if [[ "$response" == "{}" ]]; then
161:     echo "‚úÖ Message sent successfully to session $session_id"
162:     echo "   Run 'get-activities $session_id' to see Jules's response"
163:   else
164:     echo "Response: $response"
165:   fi
166: }
167: approve_plan() {
168:   local session_id="$1"
169:   # Check if session is awaiting approval
170:   local state
171:   state=$(curl "${curl_opts[@]}" "$API_BASE/sessions/$session_id" | jq -r '.state')
172:   if [[ "$state" != "AWAITING_PLAN_APPROVAL" ]]; then
173:     echo "‚ö†Ô∏è Session is not awaiting plan approval (state: $state)" >&2
174:     return 1
175:   fi
176:   local response
177:   response=$(curl "${curl_opts[@]}" -X POST \
178:     -H "Content-Type: application/json" \
179:     -d '{}' \
180:     "$API_BASE/sessions/$session_id:approvePlan")
181:   if [[ "$response" == "{}" ]]; then
182:     echo "‚úÖ Plan approved for session $session_id"
183:   else
184:     echo "Response: $response"
185:   fi
186: }
187: # ============================================================================
188: # ACTIVITY ACTIONS
189: # ============================================================================
190: get_activities() {
191:   local session_id="$1"
192:   local count="${2:-5}"
193:   curl "${curl_opts[@]}" "$API_BASE/sessions/$session_id/activities?pageSize=$count" \
194:     | jq --arg count "$count" '.activities | sort_by(.createTime) | reverse | .[:($count | tonumber)] | .[] | {
195:             time: .createTime,
196:             originator,
197:             type: (if .messageContent then "message" elif .progressUpdated then "progress" elif .planGenerated then "plan" elif .userMessaged then "user_message" elif .sessionCompleted then "completed" elif .sessionFailed then "failed" else "other" end),
198:             text: (.messageContent.text // .progressUpdated.title // .progressUpdated.description // .userMessaged.userMessage // .planGenerated.plan.steps[0].title // "")[:400]
199:         }'
200: }
201: get_artifacts() {
202:   local session_id="$1"
203:   echo "üîç Fetching artifacts (diffs, bash output) for session $session_id..."
204:   curl "${curl_opts[@]}" "$API_BASE/sessions/$session_id/activities?pageSize=50" \
205:     | jq '[.activities[] | select(.artifacts != null) | .artifacts[]] | {
206:             changeSets: [.[] | select(.changeSet != null) | {
207:                 source: .changeSet.source,
208:                 baseCommit: .changeSet.gitPatch.baseCommitId,
209:                 commitMessage: .changeSet.gitPatch.suggestedCommitMessage,
210:                 diff: .changeSet.gitPatch.unidiffPatch
211:             }],
212:             bashOutputs: [.[] | select(.bashOutput != null) | {
213:                 command: .bashOutput.command,
214:                 exitCode: .bashOutput.exitCode,
215:                 output: .bashOutput.output[:500]
216:             }],
217:             media: [.[] | select(.media != null) | {
218:                 mimeType: .media.mimeType
219:             }]
220:         }'
221: }
222: # ============================================================================
223: # SOURCE ACTIONS
224: # ============================================================================
225: list_sources() {
226:   local count="${1:-10}"
227:   curl "${curl_opts[@]}" "$API_BASE/sources?pageSize=$count" \
228:     | jq '.sources[] | {
229:             name,
230:             displayName,
231:             repo: .gitHubRepo.fullName,
232:             defaultBranch: .gitHubRepo.defaultBranch
233:         }'
234: }
235: get_source() {
236:   local source_id="$1"
237:   curl "${curl_opts[@]}" "$API_BASE/$source_id" | jq '.'
238: }
239: # ============================================================================
240: # MAIN DISPATCH
241: # ============================================================================
242: case "${1:-}" in
243:   # Session Actions
244:   create-session)
245:     [[ -z "${2:-}" || -z "${3:-}" ]] && {
246:       echo "Error: source and prompt required" >&2
247:       usage
248:       exit 1
249:     }
250:     create_session "$2" "$3" "${4:-}"
251:     ;;
252:   get-session)
253:     [[ -z "${2:-}" ]] && {
254:       echo "Error: session_id required" >&2
255:       usage
256:       exit 1
257:     }
258:     get_session "$2"
259:     ;;
260:   delete-session)
261:     [[ -z "${2:-}" ]] && {
262:       echo "Error: session_id required" >&2
263:       usage
264:       exit 1
265:     }
266:     delete_session "$2"
267:     ;;
268:   list-sessions)
269:     list_sessions "${2:-10}"
270:     ;;
271:   send-message)
272:     [[ -z "${2:-}" || -z "${3:-}" ]] && {
273:       echo "Error: session_id and message required" >&2
274:       usage
275:       exit 1
276:     }
277:     send_message "$2" "$3"
278:     ;;
279:   approve-plan)
280:     [[ -z "${2:-}" ]] && {
281:       echo "Error: session_id required" >&2
282:       usage
283:       exit 1
284:     }
285:     approve_plan "$2"
286:     ;;
287:   # Activity Actions
288:   get-activities)
289:     [[ -z "${2:-}" ]] && {
290:       echo "Error: session_id required" >&2
291:       usage
292:       exit 1
293:     }
294:     get_activities "$2" "${3:-5}"
295:     ;;
296:   get-artifacts)
297:     [[ -z "${2:-}" ]] && {
298:       echo "Error: session_id required" >&2
299:       usage
300:       exit 1
301:     }
302:     get_artifacts "$2"
303:     ;;
304:   # Source Actions
305:   list-sources)
306:     list_sources "${2:-10}"
307:     ;;
308:   get-source)
309:     [[ -z "${2:-}" ]] && {
310:       echo "Error: source_id required" >&2
311:       usage
312:       exit 1
313:     }
314:     get_source "$2"
315:     ;;
316:   # Help
317:   -h | --help | help)
318:     usage
319:     ;;
320:   *)
321:     echo "Error: Unknown action '${1:-}'" >&2
322:     usage
323:     exit 1
324:     ;;
325: esac
</file>

<file path=".agent/scripts/jules-create-prs.sh">
 1: #!/bin/bash
 2: # Applies a list of patches from Jules and creates Pull Requests.
 3: # Safe mode: uses isolated git worktrees, avoids destructive checkout/reset in the main workspace.
 4: set -euo pipefail
 5: # [FILL: Add Jules session IDs to process. Retrieve them via: bash .agent/scripts/jules-api.sh list-sessions]
 6: # Example:
 7: IDS=(
 8:     # 12345678901234567890
 9:     # 98765432109876543210
10: )
11: DEFAULT_BRANCH="$(git symbolic-ref --short refs/remotes/origin/HEAD 2>/dev/null | sed 's#^origin/##')"
12: DEFAULT_BRANCH="${DEFAULT_BRANCH:-master}"
13: for id in "${IDS[@]}"; do
14:     echo "=================================================="
15:     echo "üöÄ Processing session $id..."
16:     if [[ ! "$id" =~ ^[0-9]+$ ]]; then
17:         echo "‚ö†Ô∏è  Invalid session ID format: $id. Skipping."
18:         continue
19:     fi
20:     PATCH_FILE=".agent/tmp/${id}.patch"
21:     if [[ ! -f "$PATCH_FILE" ]]; then
22:         echo "‚ö†Ô∏è  Patch file not found for $id. Skipping."
23:         continue
24:     fi
25:     BRANCH_NAME="test-jules-${id}"
26:     WORKTREE_DIR=".agent/tmp/worktree-${id}"
27:     rm -rf "$WORKTREE_DIR"
28:     git worktree add -B "$BRANCH_NAME" "$WORKTREE_DIR" "origin/$DEFAULT_BRANCH" -q
29:     (
30:         cd "$WORKTREE_DIR"
31:         if git apply --3way "../${id}.patch"; then
32:             echo "‚úÖ Patch applied successfully."
33:             RAW_TITLE="$(head -n 1 "../${id}_msg.txt" 2>/dev/null || echo "Jules session ${id}")"
34:             CLEAN_TITLE="${RAW_TITLE,}"
35:             COMMIT_TITLE="test(jules): $CLEAN_TITLE"
36:             git add -A
37:             if git diff --cached --quiet; then
38:                 echo "‚ÑπÔ∏è  No staged changes after applying patch. Skipping commit."
39:                 exit 0
40:             fi
41:             git commit -m "$COMMIT_TITLE" -m "$(cat "../${id}_msg.txt" 2>/dev/null || echo "Jules session ${id}")" -q
42:             echo "‚¨ÜÔ∏è Pushing branch to remote..."
43:             git push -u origin "$BRANCH_NAME" -q
44:             echo "üåü Creating Pull Request..."
45:             gh pr create \
46:                 --title "üß™ $COMMIT_TITLE" \
47:                 --body "This PR contains automated testing improvements generated by Jules for session [$id](https://jules.google.com/task/$id)." \
48:                 --head "$BRANCH_NAME" \
49:                 --base "$DEFAULT_BRANCH" || echo "‚ö†Ô∏è PR creation might have failed."
50:         else
51:             echo "‚ùå Failed to apply patch for $id. Skipping."
52:         fi
53:     )
54:     git worktree remove "$WORKTREE_DIR" --force
55: done
56: echo "üéâ Finished processing PRs."
</file>

<file path="README.md">
  1: # Awesome Agentic AI Coding Template
  2: 
  3: > **A production-ready, multi-agent AI coding setup you can drop into any project.**
  4: > Stop configuring AI tools from scratch. Start from a battle-tested baseline that makes every coding agent smarter, safer, and more consistent from day one.
  5: 
  6: [üëâ **Click here to generate your project from this template** üëà](https://github.com/florian101010/awesome-agentic-AI-coding-template/generate) | [**Jump to Quick Start üöÄ**](#quick-start)
  7: 
  8: [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
  9: [![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](CONTRIBUTING.md)
 10: [![GitHub stars](https://img.shields.io/github/stars/florian101010/awesome-agentic-AI-coding-template?style=social)](https://github.com/florian101010/awesome-agentic-AI-coding-template/stargazers)
 11: [![GitHub forks](https://img.shields.io/github/forks/florian101010/awesome-agentic-AI-coding-template?style=social)](https://github.com/florian101010/awesome-agentic-AI-coding-template/network/members)
 12: [![GitHub last commit](https://img.shields.io/github/last-commit/florian101010/awesome-agentic-AI-coding-template)](https://github.com/florian101010/awesome-agentic-AI-coding-template/commits/main)
 13: 
 14: ---
 15: 
 16: ## Why This Template Exists
 17: 
 18: Most developers configure their AI coding tools ad-hoc ‚Äî a few lines in a `CLAUDE.md`, maybe a Copilot instruction file. The result: agents that hallucinate project conventions, make unsafe mutations, break existing patterns, and need constant correction.
 19: 
 20: This template encodes **production-ready agentic development practices** into a structured, multi-layered instruction system. It covers:
 21: 
 22: - **Consistent coding standards** enforced across all agents
 23: - **Security-first rules** (XSS guards, escaping, forbidden APIs)
 24: - **Safe AI orchestration patterns** (no hanging loops, MCP-first, strict timeouts)
 25: - **Pre-built skills and workflows** for the most common engineering tasks
 26: - **Documentation drift prevention** built in from the start
 27: - **Git hook integration** for automated quality gates
 28: 
 29: Clone it, fill in your project details, and every AI tool working on your codebase will follow the same high-quality standards.
 30: 
 31: ### Who is this for?
 32: 
 33: Whether you are a solo indie hacker using Cursor, or an enterprise team orchestrating GitHub Copilot and Google Jules, this template standardizes your AI interactions.
 34: 
 35: ---
 36: 
 37: ## Compatible AI Coding Agents
 38: 
 39: This template provides optimized configurations for all major AI coding tools:
 40: 
 41: | Agent | Config files | Key capability |
 42: | --- | --- | --- |
 43: | **Claude Code** (Anthropic) | `CLAUDE.md`, `.claude/rules/`, `.claude/agents/`, `.claude/skills/` | Full skill system, path-scoped rules, subagents, hooks |
 44: | **GitHub Copilot** (VS Code) | `.github/copilot-instructions.md`, `.github/prompts/`, `.github/instructions/` | Persistent instructions, prompt files, scoped instructions |
 45: | **Cursor** | `AGENTS.md` | Project-wide context via rules file |
 46: | **OpenAI Codex** | `AGENTS.md` | Project-wide context |
 47: | **Kilo Code** | `AGENTS.md`, `.kilocode/rules/` | AGENTS.md context + dedicated project rules (priority 2) |
 48: | **Google Jules** | `AGENTS.md` (read natively), `README.md` (env setup fallback) | Autonomous async task execution; Jules reads `AGENTS.md` automatically on every task |
 49: | **Google Gemini / Antigravity** | `GEMINI.md`, `.agent/rules/`, `.agent/workflows/`, `.agent/skills/` | Always-on rules, reusable workflow definitions, skill library |
 50: 
 51: One template, every major agent, zero duplication.
 52: 
 53: ---
 54: 
 55: ## What's Inside
 56: 
 57: ```text
 58: .
 59: ‚îú‚îÄ‚îÄ CLAUDE.md                          ‚Üê Claude Code ‚Äî always-on project instructions
 60: ‚îú‚îÄ‚îÄ AGENTS.md                          ‚Üê Copilot / Cursor / Codex / Jules ‚Äî always-on
 61: ‚îÇ
 62: ‚îú‚îÄ‚îÄ .github/
 63: ‚îÇ   ‚îú‚îÄ‚îÄ copilot-instructions.md        ‚Üê VS Code Copilot Chat ‚Äî persistent instructions
 64: ‚îÇ   ‚îú‚îÄ‚îÄ prompts/
 65: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ new-feature.prompt.md      ‚Üê /new-feature ‚Äî structured planning before coding
 66: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ review-changes.prompt.md   ‚Üê /review-changes ‚Äî pre-commit rule compliance
 67: ‚îÇ   ‚îú‚îÄ‚îÄ instructions/
 68: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docs.instructions.md       ‚Üê Scoped: docs/**/*.md ‚Äî documentation rules
 69: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ qa-audit.instructions.md   ‚Üê Scoped: audit files ‚Äî QA audit process
 70: ‚îÇ   ‚îî‚îÄ‚îÄ pull_request_template.md       ‚Üê PR quality-gate checklist
 71: ‚îÇ
 72: ‚îú‚îÄ‚îÄ .claude/
 73: ‚îÇ   ‚îú‚îÄ‚îÄ rules/                         ‚Üê Path-scoped always-on rules for Claude
 74: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coding-standards.md
 75: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ markdown-quality.md
 76: ‚îÇ   ‚îú‚îÄ‚îÄ agents/
 77: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ qa-reviewer.md             ‚Üê Claude subagent: automated code reviewer
 78: ‚îÇ   ‚îî‚îÄ‚îÄ skills/                        ‚Üê Claude skill library (15 skills)
 79: ‚îÇ       ‚îú‚îÄ‚îÄ brainstorming/
 80: ‚îÇ       ‚îú‚îÄ‚îÄ doc-audit/
 81: ‚îÇ       ‚îú‚îÄ‚îÄ feature-delivery/
 82: ‚îÇ       ‚îú‚îÄ‚îÄ frontend-design/
 83: ‚îÇ       ‚îú‚îÄ‚îÄ hotfix/
 84: ‚îÇ       ‚îú‚îÄ‚îÄ qa-audit/
 85: ‚îÇ       ‚îú‚îÄ‚îÄ release-readiness/
 86: ‚îÇ       ‚îú‚îÄ‚îÄ requesting-code-review/
 87: ‚îÇ       ‚îú‚îÄ‚îÄ skill-creator/
 88: ‚îÇ       ‚îú‚îÄ‚îÄ systematic-debugging/
 89: ‚îÇ       ‚îú‚îÄ‚îÄ writing-plans/
 90: ‚îÇ       ‚îî‚îÄ‚îÄ ...
 91: ‚îÇ
 92: ‚îú‚îÄ‚îÄ .agents/skills/                    ‚Üê Universal skill library (works with all tools)
 93: ‚îÇ
 94: ‚îú‚îÄ‚îÄ .kilocode/
 95: ‚îÇ   ‚îî‚îÄ‚îÄ rules/
 96: ‚îÇ       ‚îî‚îÄ‚îÄ coding-standards.md         ‚Üê Kilo Code project rules (priority 2, above AGENTS.md)
 97: ‚îÇ
 98: ‚îú‚îÄ‚îÄ .agent/
 99: ‚îÇ   ‚îú‚îÄ‚îÄ rules/                         ‚Üê Gemini/Antigravity/Jules always-on rules
100: ‚îÇ   ‚îú‚îÄ‚îÄ skills/                        ‚Üê Jules/Gemini skill library
101: ‚îÇ   ‚îú‚îÄ‚îÄ workflows/                     ‚Üê Reusable workflow procedures
102: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ doc-audit.md
103: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature-delivery.md
104: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ qa-audit.md
105: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ release-readiness.md
106: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ architecture-change.md
107: ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotfix.md
108: ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pr-analysis.md
109: ‚îÇ   ‚îî‚îÄ‚îÄ scripts/                       ‚Üê Jules API helpers, PR analysis automation
110: ‚îÇ
111: ‚îî‚îÄ‚îÄ docs/
112:     ‚îú‚îÄ‚îÄ ARCHITECTURE.md                       ‚Üê Why the template is structured the way it is
113:     ‚îú‚îÄ‚îÄ CUSTOMIZATION-GUIDE.md                ‚Üê How to fill every [FILL:] marker, file by file
114:     ‚îú‚îÄ‚îÄ SKILLS-CATALOG.md                     ‚Üê Every skill: what it does, when to use it, invocation
115:     ‚îî‚îÄ‚îÄ ai-coding-agents-best-practices.md    ‚Üê Full reference: Claude Code, Copilot, Kilo Code, Antigravity
116: ```
117: 
118: ---
119: 
120: ## Quick Start
121: 
122: ### Option A ‚Äî Use as GitHub Template
123: 
124: Click **"Use this template"** at the top right of this repository, or click the link below to generate it instantly:
125: 
126: [üëâ **Click here to generate your project from this template** üëà](https://github.com/florian101010/awesome-agentic-AI-coding-template/generate)
127: 
128: ### Option B ‚Äî Clone and Copy
129: 
130: ```bash
131: git clone https://github.com/yourusername/agentic-coding-template.git
132: cp -r agentic-coding-template/. your-project/
133: rm -rf your-project/.git
134: ```
135: 
136: ### Configure (5 minutes)
137: 
138: **Step 1 ‚Äî Find all placeholders.** Every customization point is marked with `[FILL: ...]`:
139: 
140: ```bash
141: grep -rn "\[FILL:" . --include="*.md" | grep -v README
142: ```
143: 
144: **Step 2 ‚Äî Fill in the most important files:**
145: 
146: | File | What to provide |
147: | --- | --- |
148: | `CLAUDE.md` | Project name, key constraints, prohibited patterns, test command |
149: | `AGENTS.md` | Project name, architecture overview, file structure |
150: | `.github/copilot-instructions.md` | Always-do / never-do rules, key file table |
151: | `.claude/agents/qa-reviewer.md` | Project-specific review checklist items |
152: | `.agent/rules/coding-standards.md` | Architecture constraints, stack-specific rules |
153: 
154: **Step 3 ‚Äî Remove what you don't need.** Sections like "Immutable Contract" or "Layout Constraints" are designed to be deleted for projects that don't need them.
155: 
156: **Step 4 ‚Äî Activate Git hooks** (optional but recommended):
157: 
158: ```bash
159: git config core.hooksPath .githooks
160: chmod +x .githooks/pre-commit .githooks/commit-msg
161: ```
162: 
163: **Step 5 ‚Äî Set up secrets** (required for Jules AI scripts):
164: 
165: ```bash
166: cp .env.example .env
167: # Then edit .env and add your JULES_API_KEY
168: ```
169: 
170: The `.env.example` documents every variable the scripts expect. `.env` is git-ignored ‚Äî never commit real keys.
171: 
172: Done. Your AI agents now operate with full project context.
173: 
174: ---
175: 
176: ## Pre-built Skills
177: 
178: Every skill is ready to invoke. Universal skills need no customization; project-specific ones have `[FILL:]` markers.
179: 
180: | Skill | Invoke | What it does |
181: | --- | --- | --- |
182: | **Brainstorming** | `/brainstorming` | Structured ideation ‚Äî explores user intent and constraints before building |
183: | **Systematic Debugging** | `/systematic-debugging` | Root-cause analysis ‚Äî never guess, always trace |
184: | **QA Audit** | `/qa-audit` | 9-phase security + robustness audit: XSS, rule compliance, race conditions |
185: | **Doc Audit** | `/doc-audit` | Documentation drift detection across all instruction files and project docs |
186: | **Feature Delivery** | `/feature-delivery` | End-to-end feature workflow: planning ‚Üí implementation ‚Üí QA ‚Üí docs sync |
187: | **Release Readiness** | `/release-readiness` | Pre-release quality gate with automated + manual checks |
188: | **Hotfix** | `/hotfix` | Emergency fix workflow with risk assessment |
189: | **Requesting Code Review** | `/requesting-code-review` | Structured review request with context |
190: | **Writing Plans** | `/writing-plans` | Spec-to-plan conversion before any code is written |
191: | **Frontend Design** | `/frontend-design` | Production-grade UI components ‚Äî avoids generic AI aesthetics |
192: | **Architecture Change** | `/architecture-change` | Controlled architecture refactor with ADR requirement |
193: | **Skill Creator** | `/skill-creator` | Create new custom skills for your project |
194: | **Find Skills** | `/find-skills` | Discover all available skills |
195: | **Using Superpowers** | `/using-superpowers` | Skill discovery on session start |
196: 
197: *(Example: Running the `/qa-audit` skill in your terminal or PR)*
198: ![QA Audit Skill in Action](docs/assets/qa-audit-demo.gif)
199: 
200: ---
201: 
202: ## Pre-built Workflows
203: 
204: Workflows are detailed, multi-phase procedures that agents follow step by step. Unlike skills (invoked interactively), workflows are loaded by agents working through a structured task.
205: 
206: | Workflow | Purpose |
207: | --- | --- |
208: | `doc-audit.md` | Comprehensive docs drift audit across all layers |
209: | `qa-audit.md` | Full-scope quality audit with 9 structured phases |
210: | `feature-delivery.md` | Feature planning ‚Üí implementation ‚Üí QA ‚Üí docs sync |
211: | `release-readiness.md` | Pre-release quality gate |
212: | `architecture-change.md` | ADR-gated architecture refactors |
213: | `hotfix.md` | Emergency fix with risk assessment |
214: | `pr-analysis.md` | Pull request quality review |
215: | `post-merge-analysis.md` | Post-merge verification |
216: 
217: ---
218: 
219: ## Universal Rules Baked In
220: 
221: These rules are active for all agents on day one ‚Äî no setup required.
222: 
223: ### AI Orchestration Safety
224: 
225: - No hanging bash loops ‚Äî agents iterate with individual tool calls
226: - MCP Server Tools over raw CLI calls (GitHub, databases, APIs)
227: - Every subprocess call has a strict timeout (`{ timeout: 10000 }`)
228: - No `eval()`, `document.write()`, or stateful browser APIs
229: 
230: ### Code Quality
231: 
232: - Config files get a structured header comment explaining their schema
233: - Code comments in English, always
234: - UTF-8 without BOM on all files
235: 
236: ### Documentation Hygiene
237: 
238: - Markdown tables: aligned `| --- | --- |` separator style
239: - Every fenced code block includes a language specifier
240: - Single H1 per file, logical heading hierarchy, unique subheadings
241: - No duplicate subheadings within a document
242: 
243: ### Git Discipline
244: 
245: - Repo-local hooks via `.githooks/`
246: - Commit format enforced: `type(optional-scope): description`
247: - Pre-commit quality gates before every commit
248: 
249: ---
250: 
251: ## The `[FILL:]` System
252: 
253: All project-specific content uses a consistent placeholder convention:
254: 
255: ```text
256: [FILL: project name]
257: [FILL: describe your tech stack constraints here]
258: [FILL: e.g. "npm test" or "pytest" or "cargo test"]
259: ```
260: 
261: This makes it trivially easy to scan for unfinished configuration:
262: 
263: ```bash
264: grep -rn "\[FILL:" . --include="*.md"
265: ```
266: 
267: Inline setup annotations use a different marker so they're visually distinct:
268: 
269: ```html
270: <!-- SETUP: Replace this section with your project's file structure -->
271: ```
272: 
273: ---
274: 
275: ## Design Principles
276: 
277: **1. Multi-layered** ‚Äî Each AI tool gets its own config file in its native format. Claude reads `CLAUDE.md` and `.claude/`; Copilot reads `.github/copilot-instructions.md`; Jules reads `AGENTS.md` natively; Antigravity reads `.agent/`. One source of truth, delivered in every dialect.
278: 
279: **2. Universal + project-specific** ‚Äî Universal rules (security, orchestration, markdown quality) ship ready-to-use. Project-specific rules are clearly marked with `[FILL: ...]` and isolated from the universal content.
280: 
281: **3. Prevention over correction** ‚Äî Rules are designed to stop agents from making dangerous changes ‚Äî not to catch mistakes after the fact. Security guards and forbidden patterns are enforced upfront.
282: 
283: **4. Drift-free** ‚Äî Documentation drift is a leading cause of agent misbehavior. The doc-audit skill and workflow track every file that must stay in sync and surface drift proactively.
284: 
285: **5. Skill-based** ‚Äî Complex multi-step tasks (audits, feature delivery, debugging) are codified as invocable skills. Skills are reusable, composable, and version-controlled alongside your code.
286: 
287: ---
288: 
289: ## Documentation
290: 
291: | Doc | What it covers |
292: | --- | --- |
293: | [ARCHITECTURE.md](docs/ARCHITECTURE.md) | Why the template is structured the way it is ‚Äî design decisions, directory map, layering principles |
294: | [CUSTOMIZATION-GUIDE.md](docs/CUSTOMIZATION-GUIDE.md) | How to fill every `[FILL:]` marker, file by file, with good/bad examples |
295: | [SKILLS-CATALOG.md](docs/SKILLS-CATALOG.md) | Every skill: what it does, when to invoke it, which agents support it |
296: | [ai-coding-agents-best-practices.md](docs/ai-coding-agents-best-practices.md) | Deep reference guide for Claude Code, Copilot, Kilo Code, and Antigravity |
297: 
298: ---
299: 
300: ## Contributing
301: 
302: Contributions are welcome. See [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.
303: 
304: Good contribution ideas:
305: 
306: - New universal skills (performance auditing, accessibility checking, etc.)
307: - Agent-specific optimizations as new tools emerge
308: - Improved workflow definitions
309: - Bug fixes and clarity improvements to existing skills
310: 
311: ---
312: 
313: ## License
314: 
315: MIT ‚Äî see [LICENSE](LICENSE).
316: 
317: ---
318: 
319: ## Acknowledgments
320: 
321: This template builds on top of the work of the teams and individuals behind these tools and projects:
322: 
323: **AI coding agents:**
324: 
325: | Tool | Repo / Docs |
326: | --- | --- |
327: | Claude Code (Anthropic) | [github.com/anthropics/claude-code](https://github.com/anthropics/claude-code) |
328: | GitHub Copilot (Microsoft) | [docs.github.com/copilot](https://docs.github.com/en/copilot) |
329: | Google Jules | [jules.google/docs](https://jules.google/docs) |
330: | Google Gemini / Antigravity | [github.com/google-gemini/gemini-cli](https://github.com/google-gemini/gemini-cli) |
331: | Cursor | [cursor.com](https://cursor.com) |
332: | OpenAI Codex | [platform.openai.com/docs/codex](https://platform.openai.com/docs) |
333: | Kilo Code | [github.com/Kilo-Org/kilocode](https://github.com/Kilo-Org/kilocode) |
334: 
335: **Skills & standards:**
336: 
337: | Project | What it contributed |
338: | --- | --- |
339: | [obra/superpowers](https://github.com/obra/superpowers) by Jesse Vincent (@obra) | `using-superpowers`, `find-skills`, `systematic-debugging` skills |
340: | [skills.sh](https://skills.sh) | `frontend-design`, `skill-creator` skills + the skills marketplace ecosystem |
341: | [Agent Skills Open Standard](https://agentskills.io) | The cross-agent `SKILL.md` format used throughout |
342: 
343: ---
344: 
345: **Stop configuring. Start building.**
346: 
347: *Clone once. Use everywhere.*
</file>

</files>
